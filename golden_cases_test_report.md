# Отчет о тестировании голден кейсов

## Общая статистика

- **Всего тестов**: 186
- **Пройдено**: 27
- **Провалено**: 17  
- **Пропущено (xfail)**: 18
- **Время выполнения**: 3.70s

## Анализ провалов

### 1. Legacy тесты (2 провала)

#### `en_nickname`
- **Ожидалось**: `William Gates`
- **Получено**: `Bill Gates`
- **Проблема**: Система не расширяет никнеймы до полных имен

#### `behavior_idempotent`
- **Ожидалось**: `Петр Сергеев`
- **Получено**: `Пётр Сергеев`
- **Проблема**: Морфология приводит к именительному падежу, меняя "Петр" на "Пётр"

### 2. Factory тесты (15 провалов)

#### Проблемы с порядком токенов
- **`ru_basic_full`**: Ожидалось `Иван Иванов Петрович`, получено `Иванов Иван Петрович`
- **`en_apostrophe`**: Ожидалось `Sean O'Connor`, получено `O'Connor Sean`

#### Проблемы с фильтрацией контекстных слов
- **`ru_context_words`**: Включено слово "Гражданин" в результат
- **`uk_ner_gate`**: Включены слова "Президент" и "України"
- **`uk_passport`**: Включено слово "Паспорт"

#### Проблемы с разделением множественных лиц
- **`ru_multiple_persons`**: Не разделены два человека
- **`mixed_languages`**: Не разделены лица разных языков

#### Проблемы с нормализацией
- **`ru_apostrophe`**: Неправильная нормализация апострофа
- **`ru_homoglyph`**: Не исправлены омоглифы
- **`mixed_org_noise`**: Неправильная транслитерация (Иван vs Іван)
- **`mixed_diacritics`**: Не отфильтрованы токены с диакритиками
- **`mixed_function_words`**: Не отфильтрованы служебные слова

#### Проблемы с обработкой английских имен
- **`en_nickname`**: Не расширяются никнеймы
- **`en_middle_name`**: Не удаляются средние имена

## Рекомендации по исправлению

### 1. Приоритетные исправления

1. **Фильтрация контекстных слов** - необходимо улучшить роль-теггер для исключения служебных слов
2. **Разделение множественных лиц** - добавить логику разделения разных персон
3. **Нормализация апострофов** - исправить обработку различных типов апострофов
4. **Омоглифы** - добавить нормализацию кириллических омоглифов

### 2. Вторичные исправления

1. **Порядок токенов** - исправить логику реконструкции порядка
2. **Никнеймы** - добавить расширение никнеймов до полных имен
3. **Средние имена** - добавить удаление средних имен для английских имен
4. **Транслитерация** - улучшить консистентность транслитерации

### 3. Технические улучшения

1. **Улучшить роль-теггер** для лучшего распознавания контекстных слов
2. **Добавить фильтр омоглифов** в Unicode сервис
3. **Улучшить логику разделения персон** в реконструкторе
4. **Добавить словарь никнеймов** для английских имен

## Заключение

Система нормализации показывает хорошие результаты для базовых случаев, но требует доработки в области:
- Фильтрации контекстных слов
- Разделения множественных лиц  
- Нормализации специальных символов
- Обработки сложных случаев с несколькими языками

Большинство провалов связаны с недостаточной фильтрацией служебных слов и отсутствием логики разделения разных персон в одном тексте.
