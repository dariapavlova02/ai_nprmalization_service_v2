# Отчет о падающих тестах - Краткое резюме

## Статистика
- **Всего тестов:** 1833
- **Падающих:** 202 (11.0%)
- **Прошедших:** 1616 (88.2%)
- **Пропущенных:** 15 (0.8%)

## Основные проблемы

### 1. Async/Await проблемы (Высокий приоритет)
- **Сигнатура:** `TypeError: object Mock can't be used in 'await' expression`
- **Тесты:** ~50 тестов с async моками
- **Причина:** Неправильная настройка моков для async методов
- **Фикс:** Использовать `AsyncMock` вместо обычных моков

### 2. pytest-asyncio проблемы (Высокий приоритет)
- **Сигнатура:** `async def functions are not natively supported`
- **Тесты:** ~100 тестов
- **Причина:** Отсутствие `@pytest.mark.asyncio` декораторов
- **Фикс:** Добавить декораторы ко всем async тестам

### 3. Проблемы с типами данных (Средний приоритет)
- **Сигнатура:** `AssertionError: assert False` + `isinstance`
- **Тесты:** ~30 тестов морфологии
- **Причина:** Возвращается `dict` вместо объекта
- **Фикс:** Исправить возвращаемые типы в morphology

### 4. Отсутствующие зависимости (Низкий приоритет)
- **Сигнатура:** `ModuleNotFoundError`
- **Тесты:** ~20 тестов
- **Причина:** Не установлены `httpx`, `spacy`
- **Фикс:** `pip install httpx spacy`

## Быстрые победы (≤1 час)

1. **Установка зависимостей** (5 мин)
   ```bash
   source venv/bin/activate
   pip install httpx spacy pytest-timeout
   ```

2. **Добавление @pytest.mark.asyncio** (30 мин)
   - Найти все async тесты без декоратора
   - Добавить `@pytest.mark.asyncio`

3. **Исправление AsyncMock** (15 мин)
   - Заменить `return_value = False` на `AsyncMock(return_value=False)`

4. **Исправление типов данных** (30 мин)
   - Заменить dict возвраты на правильные объекты

## Ожидаемый результат
После фиксов: снижение падающих тестов с 202 до ~20-30
