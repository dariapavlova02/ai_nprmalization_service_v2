..........FF......F.............F.F.F......FFF..........F..FF........... [  4%]
.........................F.F...FFFF.FF.FF.............FFFFFFFFFFFFF.FFFF [  8%]
FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF [ 12%]
FF................F.....F.FF.................s....................ssss.s [ 16%]
........................................................................ [ 21%]
....................................F....................F..FFFFF..F.Fss [ 25%]
s.ssssss................................................................ [ 29%]
........................................................................ [ 33%]
........................................................................ [ 37%]
........................................................................ [ 42%]
........................................................................ [ 46%]
........................................................................ [ 50%]
........................................................................ [ 54%]
........................................................................ [ 59%]
..............................................................F......... [ 63%]
....FFFFFFFFFFFFFFFFFFF.F.........F................................FFF.. [ 67%]
.......................................F.F.............................. [ 71%]
........................................................................ [ 75%]
.........................F...F.F........................................ [ 80%]
.........................................F.F.F..F...FFF..F.......F....F. [ 84%]
...................FF........FF.FF......F.FFF...FF....FFF............... [ 88%]
...............F........................................................ [ 92%]
.........F...................FFF.F..............................F....... [ 97%]
....F.............................................                       [100%]
=================================== FAILURES ===================================
_________ TestE2ESanctionsScreening.test_russian_person_with_documents _________
tests/integration/test_e2e_sanctions_screening.py:54: in test_russian_person_with_documents
    assert "Сергей" in normalized_words
E   AssertionError: assert 'Сергей' in ['Иванов', 'Петрович', 'No']
------------------------------ Captured log setup ------------------------------
WARNING  ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'ai_service.layers.variants.ukrainian_morphology'
WARNING  ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
WARNING  ai_service.core.orchestrator_factory:orchestrator_factory.py:150 Failed to initialize variants service: 'VariantGenerationService' object has no attribute 'initialize'
WARNING  ai_service.core.orchestrator_factory:orchestrator_factory.py:161 Failed to initialize embeddings service: EmbeddingService.__init__() missing 1 required positional argument: 'config'
____ TestE2ESanctionsScreening.test_ukrainian_organization_with_legal_form _____
tests/integration/test_e2e_sanctions_screening.py:105: in test_ukrainian_organization_with_legal_form
    assert result.language == "uk"
E   AssertionError: assert 'ru' == 'uk'
E     
E     - uk
E     + ru
___________ TestE2ESanctionsScreening.test_golden_dataset_stability ____________
tests/integration/test_e2e_sanctions_screening.py:398: in test_golden_dataset_stability
    assert case["expected_normalized"] in result.normalized_text
E   AssertionError: assert 'Иванов Сергей Петрович' in 'Иванов Петрович Д. Р.'
E    +  where 'Иванов Петрович Д. Р.' = UnifiedProcessingResult(original_text='Иванов Сергей Петрович д.р. 15.03.1985', language='ru', language_confidence=0.6..._skip'], details={'smartfilter_should_process': False}), processing_time=0.002208709716796875, success=True, errors=[]).normalized_text
_ test_ukrainian_full_normalization[\u0414\u043b\u044f \u0416\u0435\u043d\u0456 \u0413\u0430\u043b\u0438\u0447\u0430 \u0437 \u0433\u0440\u0443\u043f\u0438 O.Torvald-\u0404\u0432\u0433\u0435\u043d \u0413\u0430\u043b\u0438\u0447] _
tests/integration/test_full_normalization_suite.py:70: in test_ukrainian_full_normalization
    assert_normalized_name(result, expected_name)
tests/integration/test_full_normalization_suite.py:38: in assert_normalized_name
    assert expected_parts == actual_tokens, \
E   AssertionError: Ожидалось: {'євген', 'галич'}, получено: {'з.', 'євген', 'галич'}
E   assert {'галич', 'євген'} == {'галич', 'з.', 'євген'}
E     
E     Extra items in the right set:
E     'з.'
E     Use -v to get more diff
_ test_ukrainian_full_normalization[\u0417\u0443\u0441\u0442\u0440\u0456\u0447 \u0437 \u041b\u0456\u043d\u043e\u044e \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e-\u041b\u0456\u043d\u0430 \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e] _
tests/integration/test_full_normalization_suite.py:70: in test_ukrainian_full_normalization
    assert_normalized_name(result, expected_name)
tests/integration/test_full_normalization_suite.py:38: in assert_normalized_name
    assert expected_parts == actual_tokens, \
E   AssertionError: Ожидалось: {'костенко', 'ліна'}, получено: {'костенко', 'з.', 'ліна'}
E   assert {'костенко', 'ліна'} == {'з.', 'костенко', 'ліна'}
E     
E     Extra items in the right set:
E     'з.'
E     Use -v to get more diff
_ test_ukrainian_full_normalization[\u0420\u043e\u0437\u043c\u043e\u0432\u043b\u044f\u0432 \u0437 \u0412\u0430\u043b\u0435\u0440\u0456\u0454\u043c \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u043c-\u0412\u0430\u043b\u0435\u0440\u0456\u0439 \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u0439] _
tests/integration/test_full_normalization_suite.py:70: in test_ukrainian_full_normalization
    assert_normalized_name(result, expected_name)
tests/integration/test_full_normalization_suite.py:38: in assert_normalized_name
    assert expected_parts == actual_tokens, \
E   AssertionError: Ожидалось: {'валерій', 'залужний'}, получено: {'з.', 'валерій', 'залужний'}
E   assert {'валерій', 'залужний'} == {'валерій', 'з.', 'залужний'}
E     
E     Extra items in the right set:
E     'з.'
E     Use -v to get more diff
_ test_russian_full_normalization[\u0414\u043b\u044f \u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430] _
tests/integration/test_full_normalization_suite.py:97: in test_russian_full_normalization
    assert_normalized_name(result, expected_name)
tests/integration/test_full_normalization_suite.py:38: in assert_normalized_name
    assert expected_parts == actual_tokens, \
E   AssertionError: Ожидалось: {'алла', 'борисовна', 'пугачева'}, получено: {'аллы', 'борисовн', 'пугачев'}
E   assert {'алла', 'бор...', 'пугачева'} == {'аллы', 'бор...н', 'пугачев'}
E     
E     Extra items in the left set:
E     'алла'
E     'борисовна'
E     'пугачева'
E     Extra items in the right set:
E     'аллы'...
E     
E     ...Full output truncated (3 lines hidden), use '-vv' to show
_ test_russian_full_normalization[\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439] _
tests/integration/test_full_normalization_suite.py:97: in test_russian_full_normalization
    assert_normalized_name(result, expected_name)
tests/integration/test_full_normalization_suite.py:38: in assert_normalized_name
    assert expected_parts == actual_tokens, \
E   AssertionError: Ожидалось: {'петр', 'чайковский'}, получено: {'чайковском', 'петр'}
E   assert {'петр', 'чайковский'} == {'петр', 'чайковском'}
E     
E     Extra items in the left set:
E     'чайковский'
E     Extra items in the right set:
E     'чайковском'
E     Use -v to get more diff
_ test_russian_full_normalization[\u0412\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0410\u043d\u043d\u043e\u0439 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u043e\u0439-\u0410\u043d\u043d\u0430 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u0430] _
tests/integration/test_full_normalization_suite.py:97: in test_russian_full_normalization
    assert_normalized_name(result, expected_name)
tests/integration/test_full_normalization_suite.py:38: in assert_normalized_name
    assert expected_parts == actual_tokens, \
E   AssertionError: Ожидалось: {'ахматова', 'анна'}, получено: {'с.', 'ахматова', 'анна'}
E   assert {'анна', 'ахматова'} == {'анна', 'ахматова', 'с.'}
E     
E     Extra items in the right set:
E     'с.'
E     Use -v to get more diff
___ test_english_full_normalization[Sent to ELON MUSK for X corp-Elon Musk] ____
tests/integration/test_full_normalization_suite.py:124: in test_english_full_normalization
    assert_normalized_name(result, expected_name)
tests/integration/test_full_normalization_suite.py:38: in assert_normalized_name
    assert expected_parts == actual_tokens, \
E   AssertionError: Ожидалось: {'elon', 'musk'}, получено: {'x', 'elon', 'musk'}
E   assert {'elon', 'musk'} == {'elon', 'musk', 'x'}
E     
E     Extra items in the right set:
E     'x'
E     Use -v to get more diff
_____________________ test_critical_russian_normalization ______________________
tests/integration/test_full_normalization_suite.py:160: in test_critical_russian_normalization
    assert tokens_lower == expected_tokens, f"Expected {expected_tokens}, but got {tokens_lower}"
E   AssertionError: Expected {'владимирович', 'петров', 'сергей'}, but got {'владимирович', 'петров', 'в.', 'сергей'}
E   assert {'в.', 'влади...ов', 'сергей'} == {'владимирови...ов', 'сергей'}
E     
E     Extra items in the left set:
E     'в.'
E     Use -v to get more diff
__ TestGenderAdjustmentIntegration.test_ukrainian_female_name_with_patronymic __
tests/integration/test_gender_adjustment.py:32: in test_ukrainian_female_name_with_patronymic
    assert person["tokens"] == ["Павлов", "Дарʼя", "Юріївна"]
E   AssertionError: assert ['Павлов', 'Дарʼї', 'Юріївна'] == ['Павлов', 'Дарʼя', 'Юріївна']
E     
E     At index 1 diff: 'Дарʼї' != 'Дарʼя'
E     Use -v to get more diff
_________ TestMixedScriptNames.test_ascii_names_with_cyrillic_surnames _________
tests/integration/test_mixed_script_names.py:66: in test_ascii_names_with_cyrillic_surnames
    assert "Петрова" in result.normalized
E   AssertionError: assert 'Петрова' in 'John Коваленко Mary Петров'
E    +  where 'John Коваленко Mary Петров' = NormalizationResult(normalized='John Коваленко Mary Петров', tokens=['John', 'Коваленко', 'Mary', 'Петров'], trace=[To...re_female': 0, 'score_male': 2, 'gap': 2}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
_____________ TestMixedScriptNames.test_ascii_names_no_morphology ______________
tests/integration/test_mixed_script_names.py:106: in test_ascii_names_no_morphology
    assert "morph" not in smith_trace.rule.lower()
E   AssertionError: assert 'morph' not in 'morph'
E     
E     'morph' is contained here:
E       morph
____________ TestNormalizationPipeline.test_ukrainian_name_pipeline ____________
tests/integration/test_normalization_pipeline.py:53: in test_ukrainian_name_pipeline
    assert normalization_result['original_text'] == input_text
E   AssertionError: assert None == 'Олена Петрівна'
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____________ TestNormalizationPipeline.test_russian_name_pipeline _____________
tests/integration/test_normalization_pipeline.py:104: in test_russian_name_pipeline
    assert 'token_variants' in normalization_result
E   AssertionError: assert 'token_variants' in NormalizationResult(normalized='Сергей Иванов', tokens=['Сергей', 'Иванов'], trace=[TokenTrace(token='Сергей', role='g...re_female': 0, 'score_male': 5, 'gap': 5}}], person_gender=None, gender_confidence=None, organizations=[], org_core='')
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_________ TestNormalizationPipeline.test_mixed_language_text_pipeline __________
tests/integration/test_normalization_pipeline.py:127: in test_mixed_language_text_pipeline
    assert 'token_variants' in normalization_result
E   AssertionError: assert 'token_variants' in NormalizationResult(normalized='John Smith And Іван Петренко', tokens=['John', 'Smith', 'And', 'Іван', 'Петренко'], tr...re_female': 0, 'score_male': 3, 'gap': 3}}], person_gender=None, gender_confidence=None, organizations=[], org_core='')
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
____________ TestNormalizationPipeline.test_compound_name_pipeline _____________
tests/integration/test_normalization_pipeline.py:160: in test_compound_name_pipeline
    assert 'token_variants' in normalization_result
E   AssertionError: assert 'token_variants' in NormalizationResult(normalized='', tokens=[], trace=[], errors=[], language='ru', confidence=1.0, original_length=14, ..._core=[], organizations_core=[], persons=[], person_gender=None, gender_confidence=None, organizations=[], org_core='')
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
______________ TestNormalizationPipeline.test_empty_text_pipeline ______________
tests/integration/test_normalization_pipeline.py:225: in test_empty_text_pipeline
    assert normalization_result['total_variants'] == 0
E   assert None == 0
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____________ TestNormalizationPipeline.test_performance_pipeline ______________
tests/integration/test_normalization_pipeline.py:263: in test_performance_pipeline
    assert 'token_variants' in result
E   AssertionError: assert 'token_variants' in NormalizationResult(normalized='Олександр Петренко', tokens=['Олександр', 'Петренко'], trace=[TokenTrace(token='Олекса...re_female': 0, 'score_male': 3, 'gap': 3}}], person_gender=None, gender_confidence=None, organizations=[], org_core='')
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
____________ TestNormalizationPipeline.test_morphology_integration _____________
tests/integration/test_normalization_pipeline.py:310: in test_morphology_integration
    for variants in token_variants.values():
                    ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'NoneType' object has no attribute 'values'
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
__________ TestNormalizationPipeline.test_transliteration_integration __________
tests/integration/test_normalization_pipeline.py:331: in test_transliteration_integration
    for variants in token_variants.values():
                    ^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'NoneType' object has no attribute 'values'
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____ TestPipelineEnd2End.test_pipeline_integration[ukrainian_simple_name] _____
tests/integration/test_pipeline_end2end.py:336: in test_pipeline_integration
    assert result.language == test_case.expected_language, \
E   AssertionError: Expected language uk, got ru
E   assert 'ru' == 'uk'
E     
E     - uk
E     + ru
------------------------------ Captured log setup ------------------------------
WARNING  ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'ai_service.layers.variants.ukrainian_morphology'
WARNING  ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
WARNING  ai_service.core.orchestrator_factory:orchestrator_factory.py:150 Failed to initialize variants service: 'VariantGenerationService' object has no attribute 'initialize'
WARNING  ai_service.core.orchestrator_factory:orchestrator_factory.py:161 Failed to initialize embeddings service: EmbeddingService.__init__() missing 1 required positional argument: 'config'
_ TestPipelineEnd2End.test_pipeline_integration[ukrainian_full_name_with_patronymic] _
tests/integration/test_pipeline_end2end.py:336: in test_pipeline_integration
    assert result.language == test_case.expected_language, \
E   AssertionError: Expected language uk, got ru
E   assert 'ru' == 'uk'
E     
E     - uk
E     + ru
_ TestPipelineEnd2End.test_pipeline_integration[ukrainian_company_with_legal_form] _
tests/integration/test_pipeline_end2end.py:375: in test_pipeline_integration
    assert len(result.signals.organizations) == len(test_case.expected_organizations), \
E   AssertionError: Expected 1 orgs, got 0
E   assert 0 == 1
E    +  where 0 = len([])
E    +    where [] = <ai_service.layers.signals.signals_service.SignalsService.extract_signals.<locals>.ResultWrapper object at 0x17ab47230>.organizations
E    +      where <ai_service.layers.signals.signals_service.SignalsService.extract_signals.<locals>.ResultWrapper object at 0x17ab47230> = UnifiedProcessingResult(original_text="ТОВ 'ПриватБанк'", language='ru', language_confidence=0.6, normalized_text='', ...b47230>, variants=None, embeddings=None, decision=None, processing_time=0.0014841556549072266, success=True, errors=[]).signals
E    +  and   1 = len([{'core': 'ПриватБанк', 'full_name': 'ТОВ ПриватБанк', 'legal_form': 'ТОВ'}])
E    +    where [{'core': 'ПриватБанк', 'full_name': 'ТОВ ПриватБанк', 'legal_form': 'ТОВ'}] = IntegrationTestCase(name='ukrainian_company_with_legal_form', input_text="ТОВ 'ПриватБанк'", expected_language='ru', e...cess=True, expected_trace_roles=[], notes='Company with legal form - legal form handled by Signals, not Normalization').expected_organizations
___ TestPipelineEnd2End.test_pipeline_integration[mixed_person_and_company] ____
tests/integration/test_pipeline_end2end.py:336: in test_pipeline_integration
    assert result.language == test_case.expected_language, \
E   AssertionError: Expected language uk, got ru
E   assert 'ru' == 'uk'
E     
E     - uk
E     + ru
____ TestPipelineEnd2End.test_pipeline_integration[person_with_birth_date] _____
tests/integration/test_pipeline_end2end.py:336: in test_pipeline_integration
    assert result.language == test_case.expected_language, \
E   AssertionError: Expected language uk, got ru
E   assert 'ru' == 'uk'
E     
E     - uk
E     + ru
________ TestPipelineEnd2End.test_pipeline_integration[person_with_inn] ________
tests/integration/test_pipeline_end2end.py:336: in test_pipeline_integration
    assert result.language == test_case.expected_language, \
E   AssertionError: Expected language uk, got ru
E   assert 'ru' == 'uk'
E     
E     - uk
E     + ru
______ TestPipelineEnd2End.test_pipeline_integration[mixed_script_names] _______
tests/integration/test_pipeline_end2end.py:351: in test_pipeline_integration
    assert result.normalized_text == test_case.expected_normalized, \
E   AssertionError: Expected normalized 'John Smith Олена Петренко', got 'John Smith'
E   assert 'John Smith' == 'John Smith Олена Петренко'
E     
E     - John Smith Олена Петренко
E     + John Smith
__ TestPipelineEnd2End.test_pipeline_integration[noise_context_should_filter] __
tests/integration/test_pipeline_end2end.py:336: in test_pipeline_integration
    assert result.language == test_case.expected_language, \
E   AssertionError: Expected language uk, got ru
E   assert 'ru' == 'uk'
E     
E     - uk
E     + ru
__ TestPipelineEnd2End.test_pipeline_integration[quoted_company_with_person] ___
tests/integration/test_pipeline_end2end.py:339: in test_pipeline_integration
    assert result.language_confidence >= test_case.expected_language_confidence_min, \
E   AssertionError: Language confidence 0.75 below minimum 0.8
E   assert 0.75 >= 0.8
E    +  where 0.75 = UnifiedProcessingResult(original_text="ООО 'Тест Системс' перевод средств Ивану Петрову", language='ru', language_conf...b44ad0>, variants=None, embeddings=None, decision=None, processing_time=0.0032057762145996094, success=True, errors=[]).language_confidence
E    +  and   0.8 = IntegrationTestCase(name='quoted_company_with_person', input_text="ООО 'Тест Системс' перевод средств Ивану Петрову", ...ected_should_process=True, expected_trace_roles=['given', 'surname'], notes='Quoted company name with person transfer').expected_language_confidence_min
______ TestPipelineEnd2End.test_pipeline_integration[hyphenated_surname] _______
tests/integration/test_pipeline_end2end.py:336: in test_pipeline_integration
    assert result.language == test_case.expected_language, \
E   AssertionError: Expected language uk, got ru
E   assert 'ru' == 'uk'
E     
E     - uk
E     + ru
________ TestPipelineEnd2End.test_pipeline_integration[overfit_canary] _________
tests/integration/test_pipeline_end2end.py:336: in test_pipeline_integration
    assert result.language == test_case.expected_language, \
E   AssertionError: Expected language uk, got ru
E   assert 'ru' == 'uk'
E     
E     - uk
E     + ru
___ TestPipelineEnd2End.test_pipeline_integration[full_pipeline_stress_test] ___
tests/integration/test_pipeline_end2end.py:336: in test_pipeline_integration
    assert result.language == test_case.expected_language, \
E   AssertionError: Expected language uk, got ru
E   assert 'ru' == 'uk'
E     
E     - uk
E     + ru
____________ TestPipelineEnd2End.test_normalization_flags_behavior _____________
tests/integration/test_pipeline_end2end.py:415: in test_normalization_flags_behavior
    assert len(unique_results) > 1, \
E   AssertionError: Flags should produce different results but all were identical: ['Иван Петрович Сидоренко', 'Иван Петрович Сидоренко', 'Иван Петрович Сидоренко', 'Иван Петрович Сидоренко']
E   assert 1 > 1
E    +  where 1 = len({'Иван Петрович Сидоренко'})
_______________ TestPipelineInitialsOrgsCase.test_initials_only ________________
tests/integration/test_pipeline_initials_orgs.py:27: in test_initials_only
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='А.Б. Петров', language='unknown', language_confidence=0.0, normalized_text='', ...n=None, processing_time=7.82012939453125e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_______ TestPipelineInitialsOrgsCase.test_english_initials_with_surname ________
tests/integration/test_pipeline_initials_orgs.py:47: in test_english_initials_with_surname
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='J.R.R. Tolkien', language='unknown', language_confidence=0.0, normalized_text='...n=None, processing_time=4.76837158203125e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
________ TestPipelineInitialsOrgsCase.test_mixed_initials_and_full_name ________
tests/integration/test_pipeline_initials_orgs.py:67: in test_mixed_initials_and_full_name
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='А.Б. и Сергей Иванович Петров', language='unknown', language_confidence=0.0, no...None, processing_time=4.9114227294921875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineInitialsOrgsCase.test_russian_organization_ooo __________
tests/integration/test_pipeline_initials_orgs.py:88: in test_russian_organization_ooo
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='ООО Газпром', language='unknown', language_confidence=0.0, normalized_text='', ...None, processing_time=0.00012183189392089844, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_________ TestPipelineInitialsOrgsCase.test_ukrainian_organization_tov _________
tests/integration/test_pipeline_initials_orgs.py:110: in test_ukrainian_organization_tov
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='ТОВ Нафтогаз', language='unknown', language_confidence=0.0, normalized_text='',...=None, processing_time=7.176399230957031e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineInitialsOrgsCase.test_english_organization_llc __________
tests/integration/test_pipeline_initials_orgs.py:132: in test_english_organization_llc
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Microsoft LLC', language='unknown', language_confidence=0.0, normalized_text=''...sion=None, processing_time=4.57763671875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_______ TestPipelineInitialsOrgsCase.test_organization_with_person_name ________
tests/integration/test_pipeline_initials_orgs.py:154: in test_organization_with_person_name
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='ООО Петров и Ко', language='unknown', language_confidence=0.0, normalized_text=...=None, processing_time=4.291534423828125e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineInitialsOrgsCase.test_multiple_organizations ___________
tests/integration/test_pipeline_initials_orgs.py:177: in test_multiple_organizations
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='ООО Газпром и ТОВ Нафтогаз', language='unknown', language_confidence=0.0, norma...n=None, processing_time=4.00543212890625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_______ TestPipelineInitialsOrgsCase.test_person_and_organization_mixed ________
tests/integration/test_pipeline_initials_orgs.py:200: in test_person_and_organization_mixed
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Сергей Петров работает в ООО Газпром', language='unknown', language_confidence=...=None, processing_time=5.602836608886719e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineInitialsOrgsCase.test_organization_with_quotes __________
tests/integration/test_pipeline_initials_orgs.py:226: in test_organization_with_quotes
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='ООО "Рога и Копыта"', language='unknown', language_confidence=0.0, normalized_t...None, processing_time=4.9114227294921875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_________ TestPipelineInitialsOrgsCase.test_initials_with_organization _________
tests/integration/test_pipeline_initials_orgs.py:247: in test_initials_with_organization
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='А.Б. Петров, директор ООО Газпром', language='unknown', language_confidence=0.0...=None, processing_time=4.982948303222656e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
____________ TestPipelineInitialsOrgsCase.test_multiple_legal_forms ____________
tests/integration/test_pipeline_initials_orgs.py:273: in test_multiple_legal_forms
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='ООО Газпром, ЗАО Лукойл, ПАО Сбербанк', language='unknown', language_confidence...=None, processing_time=4.315376281738281e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_________ TestPipelineInitialsOrgsCase.test_organization_with_numbers __________
tests/integration/test_pipeline_initials_orgs.py:294: in test_organization_with_numbers
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='ООО Завод-25', language='unknown', language_confidence=0.0, normalized_text='',...=None, processing_time=4.410743713378906e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
____________ TestPipelineInitialsOrgsCase.test_foreign_organization ____________
tests/integration/test_pipeline_initials_orgs.py:315: in test_foreign_organization
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Apple Inc.', language='unknown', language_confidence=0.0, normalized_text='', t...=None, processing_time=3.910064697265625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineInitialsOrgsCase.test_initials_without_periods __________
tests/integration/test_pipeline_initials_orgs.py:337: in test_initials_without_periods
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='АБ Петров', language='unknown', language_confidence=0.0, normalized_text='', to...=None, processing_time=4.291534423828125e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineInitialsOrgsCase.test_organization_in_sentence __________
tests/integration/test_pipeline_initials_orgs.py:357: in test_organization_in_sentence
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Компания ООО Газпром объявила о новых инвестициях', language='unknown', languag...=None, processing_time=4.100799560546875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineInitialsOrgsCase.test_mixed_case_organization ___________
tests/integration/test_pipeline_initials_orgs.py:379: in test_mixed_case_organization
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='ооо ГАЗПРОМ', language='unknown', language_confidence=0.0, normalized_text='', ...=None, processing_time=4.315376281738281e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_________ TestPipelineInitialsOrgsCase.test_organization_with_address __________
tests/integration/test_pipeline_initials_orgs.py:401: in test_organization_with_address
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='ООО Газпром, г. Москва, ул. Ленина, д. 1', language='unknown', language_confide...on=None, processing_time=4.1961669921875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______ TestPipelineInitialsOrgsCase.test_no_unknown_in_normalized_output _______
tests/integration/test_pipeline_initials_orgs.py:423: in test_no_unknown_in_normalized_output
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='А.Б. Петров, ООО Газпром', language='unknown', language_confidence=0.0, normali...=None, processing_time=5.984306335449219e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_____________ TestPipelineMixedEnglishCases.test_english_full_name _____________
tests/integration/test_pipeline_mixed_en.py:27: in test_english_full_name
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='John Michael Smith', language='unknown', language_confidence=0.0, normalized_te...None, processing_time=5.6743621826171875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_______ TestPipelineMixedEnglishCases.test_english_name_with_apostrophe ________
tests/integration/test_pipeline_mixed_en.py:51: in test_english_name_with_apostrophe
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text="John O'Connor", language='unknown', language_confidence=0.0, normalized_text=''...None, processing_time=3.7670135498046875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineMixedEnglishCases.test_english_hyphenated_name __________
tests/integration/test_pipeline_mixed_en.py:72: in test_english_hyphenated_name
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Mary-Jane Watson', language='unknown', language_confidence=0.0, normalized_text...=None, processing_time=3.933906555175781e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineMixedEnglishCases.test_mixed_english_ukrainian __________
tests/integration/test_pipeline_mixed_en.py:94: in test_mixed_english_ukrainian
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='John Smith and Олександр Петренко', language='unknown', language_confidence=0.0...=None, processing_time=3.719329833984375e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineMixedEnglishCases.test_mixed_english_russian ___________
tests/integration/test_pipeline_mixed_en.py:115: in test_mixed_english_russian
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Michael Johnson и Сергей Петров', language='unknown', language_confidence=0.0, ...n=None, processing_time=4.00543212890625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_____________ TestPipelineMixedEnglishCases.test_english_initials ______________
tests/integration/test_pipeline_mixed_en.py:136: in test_english_initials
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='J.M. Smith', language='unknown', language_confidence=0.0, normalized_text='', t...=None, processing_time=9.799003601074219e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineMixedEnglishCases.test_english_name_with_title __________
tests/integration/test_pipeline_mixed_en.py:156: in test_english_name_with_title
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Dr. John Smith', language='unknown', language_confidence=0.0, normalized_text='...n=None, processing_time=4.38690185546875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
____________ TestPipelineMixedEnglishCases.test_transliterated_name ____________
tests/integration/test_pipeline_mixed_en.py:177: in test_transliterated_name
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Sergey Ivanov', language='unknown', language_confidence=0.0, normalized_text=''...None, processing_time=5.0067901611328125e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineMixedEnglishCases.test_multiple_english_names ___________
tests/integration/test_pipeline_mixed_en.py:198: in test_multiple_english_names
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='John Smith, Mary Johnson, and Robert Brown', language='unknown', language_confi...None, processing_time=5.1975250244140625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_____ TestPipelineMixedEnglishCases.test_english_name_with_middle_initial ______
tests/integration/test_pipeline_mixed_en.py:220: in test_english_name_with_middle_initial
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='John F. Kennedy', language='unknown', language_confidence=0.0, normalized_text=...None, processing_time=3.5762786865234375e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_________ TestPipelineMixedEnglishCases.test_english_compound_surname __________
tests/integration/test_pipeline_mixed_en.py:241: in test_english_compound_surname
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='John Smith-Brown', language='unknown', language_confidence=0.0, normalized_text...=None, processing_time=3.886222839355469e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_______ TestPipelineMixedEnglishCases.test_english_name_case_insensitive _______
tests/integration/test_pipeline_mixed_en.py:263: in test_english_name_case_insensitive
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='jOHN sMITH', language='unknown', language_confidence=0.0, normalized_text='', t...=None, processing_time=4.100799560546875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
____________ TestPipelineMixedEnglishCases.test_three_language_mix _____________
tests/integration/test_pipeline_mixed_en.py:284: in test_three_language_mix
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='John Smith, Олександр Петренко, и Сергей Иванов', language='unknown', language_...=None, processing_time=3.886222839355469e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_________________ TestPipelineNegativeCanaries.test_empty_text _________________
tests/integration/test_pipeline_negative_canaries.py:27: in test_empty_text
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='', language='unknown', language_confidence=0.0, normalized_text='', tokens=[], ...None, processing_time=5.1975250244140625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineNegativeCanaries.test_whitespace_only _______________
tests/integration/test_pipeline_negative_canaries.py:45: in test_whitespace_only
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='   \t\n   ', language='unknown', language_confidence=0.0, normalized_text='', t...=None, processing_time=4.100799560546875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
________________ TestPipelineNegativeCanaries.test_numbers_only ________________
tests/integration/test_pipeline_negative_canaries.py:62: in test_numbers_only
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='123 456 789', language='unknown', language_confidence=0.0, normalized_text='', ...=None, processing_time=6.079673767089844e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineNegativeCanaries.test_punctuation_only ______________
tests/integration/test_pipeline_negative_canaries.py:80: in test_punctuation_only
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='!@#$%^&*()_+-={}[]|\\:;"\'<>?,./', language='unknown', language_confidence=0.0,...ion=None, processing_time=3.814697265625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineNegativeCanaries.test_stop_words_only _______________
tests/integration/test_pipeline_negative_canaries.py:98: in test_stop_words_only
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='the and or but with in on at', language='unknown', language_confidence=0.0, nor...=None, processing_time=6.604194641113281e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineNegativeCanaries.test_random_gibberish ______________
tests/integration/test_pipeline_negative_canaries.py:116: in test_random_gibberish
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='asdfghjkl qwertyuiop zxcvbnm', language='unknown', language_confidence=0.0, nor...=None, processing_time=3.790855407714844e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_____________ TestPipelineNegativeCanaries.test_special_characters _____________
tests/integration/test_pipeline_negative_canaries.py:136: in test_special_characters
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='∑∂∆∞π√∫≈≠≤≥', language='unknown', language_confidence=0.0, normalized_text='', ...=None, processing_time=5.316734313964844e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_________________ TestPipelineNegativeCanaries.test_emoji_only _________________
tests/integration/test_pipeline_negative_canaries.py:153: in test_emoji_only
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='😀😃😄😁😆😅😂🤣', language='unknown', language_confidence=0.0, normalized_text='', tok...=None, processing_time=3.790855407714844e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_______________ TestPipelineNegativeCanaries.test_very_long_text _______________
tests/integration/test_pipeline_negative_canaries.py:170: in test_very_long_text
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='test test test test test test test test test test test test test test test test...None, processing_time=4.9114227294921875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineNegativeCanaries.test_mixed_scripts_nonsense ___________
tests/integration/test_pipeline_negative_canaries.py:187: in test_mixed_scripts_nonsense
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='αβγδε абвгд abcde 12345 !@#$%', language='unknown', language_confidence=0.0, no...None, processing_time=5.3882598876953125e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineNegativeCanaries.test_common_words_not_names ___________
tests/integration/test_pipeline_negative_canaries.py:204: in test_common_words_not_names
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='table chair window door computer phone book', language='unknown', language_conf...=None, processing_time=4.887580871582031e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
____________ TestPipelineNegativeCanaries.test_dates_and_addresses _____________
tests/integration/test_pipeline_negative_canaries.py:223: in test_dates_and_addresses
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='15.03.1980 г. Москва ул. Ленина д. 10 кв. 5', language='unknown', language_conf...=None, processing_time=3.981590270996094e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineNegativeCanaries.test_currencies_and_amounts ___________
tests/integration/test_pipeline_negative_canaries.py:246: in test_currencies_and_amounts
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='1000 USD 500 EUR 2000 RUB 3000 UAH', language='unknown', language_confidence=0....on=None, processing_time=5.7220458984375e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineNegativeCanaries.test_technical_terms _______________
tests/integration/test_pipeline_negative_canaries.py:265: in test_technical_terms
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='HTTP HTTPS API REST JSON XML SQL HTML CSS JavaScript', language='unknown', lang...=None, processing_time=3.600120544433594e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_______________ TestPipelineNegativeCanaries.test_medical_terms ________________
tests/integration/test_pipeline_negative_canaries.py:284: in test_medical_terms
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='COVID-19 influenza pneumonia diabetes hypertension', language='unknown', langua...on=None, processing_time=4.1961669921875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineNegativeCanaries.test_country_and_city_names ___________
tests/integration/test_pipeline_negative_canaries.py:303: in test_country_and_city_names
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Ukraine Russia Germany France Italy Spain', language='unknown', language_confid...=None, processing_time=3.695487976074219e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
________________ TestPipelineNegativeCanaries.test_brand_names _________________
tests/integration/test_pipeline_negative_canaries.py:324: in test_brand_names
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Apple Google Microsoft Amazon Facebook Tesla', language='unknown', language_con...=None, processing_time=4.887580871582031e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineNegativeCanaries.test_malformed_input _______________
tests/integration/test_pipeline_negative_canaries.py:347: in test_malformed_input
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Test\x00\x01\x02\x03\x04\x05', language='unknown', language_confidence=0.0, nor...=None, processing_time=4.982948303222656e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineNegativeCanaries.test_sql_injection_attempt ____________
tests/integration/test_pipeline_negative_canaries.py:364: in test_sql_injection_attempt
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text="'; DROP TABLE users; --", language='unknown', language_confidence=0.0, normaliz...=None, processing_time=7.128715515136719e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
________ TestPipelineNegativeCanaries.test_no_unknown_tokens_in_output _________
tests/integration/test_pipeline_negative_canaries.py:388: in test_no_unknown_tokens_in_output
    assert result.success, f"Processing failed for '{text}': {result.errors}"
E   AssertionError: Processing failed for 'random gibberish text': ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='random gibberish text', language='unknown', language_confidence=0.0, normalized...=None, processing_time=3.790855407714844e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
________ TestPipelineRuUkCases.test_ukrainian_full_name_with_patronymic ________
tests/integration/test_pipeline_ru_uk_cases.py:28: in test_ukrainian_full_name_with_patronymic
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко', language='unknown', language_confidence=0.0, nor...=None, processing_time=6.198883056640625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_________ TestPipelineRuUkCases.test_russian_full_name_with_patronymic _________
tests/integration/test_pipeline_ru_uk_cases.py:61: in test_russian_full_name_with_patronymic
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров', language='unknown', language_confidence=0.0, normalize...n=None, processing_time=4.00543212890625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_______ TestPipelineRuUkCases.test_ukrainian_female_name_with_patronymic _______
tests/integration/test_pipeline_ru_uk_cases.py:86: in test_ukrainian_female_name_with_patronymic
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Олена Петрівна Коваленко', language='unknown', language_confidence=0.0, normali...None, processing_time=0.00012993812561035156, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
________ TestPipelineRuUkCases.test_russian_female_name_with_patronymic ________
tests/integration/test_pipeline_ru_uk_cases.py:110: in test_russian_female_name_with_patronymic
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Мария Ивановна Смирнова', language='unknown', language_confidence=0.0, normaliz...on=None, processing_time=4.1961669921875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_____________ TestPipelineRuUkCases.test_ukrainian_double_surname ______________
tests/integration/test_pipeline_ru_uk_cases.py:134: in test_ukrainian_double_surname
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Володимир Петрович Коваленко-Сміт', language='unknown', language_confidence=0.0...n=None, processing_time=4.00543212890625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineRuUkCases.test_russian_double_surname _______________
tests/integration/test_pipeline_ru_uk_cases.py:158: in test_russian_double_surname
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Александр Сергеевич Петров-Сидоров', language='unknown', language_confidence=0....=None, processing_time=4.291534423828125e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineRuUkCases.test_ukrainian_name_with_initials ____________
tests/integration/test_pipeline_ru_uk_cases.py:182: in test_ukrainian_name_with_initials
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='О.П. Коваленко', language='unknown', language_confidence=0.0, normalized_text='...n=None, processing_time=4.00543212890625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
____________ TestPipelineRuUkCases.test_russian_name_with_initials _____________
tests/integration/test_pipeline_ru_uk_cases.py:203: in test_russian_name_with_initials
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='С.И. Петров', language='unknown', language_confidence=0.0, normalized_text='', ...ion=None, processing_time=3.814697265625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineRuUkCases.test_ukrainian_compound_name ______________
tests/integration/test_pipeline_ru_uk_cases.py:224: in test_ukrainian_compound_name
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Анна-Марія Петрівна Коваленко', language='unknown', language_confidence=0.0, no...=None, processing_time=5.507469177246094e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_______________ TestPipelineRuUkCases.test_russian_compound_name _______________
tests/integration/test_pipeline_ru_uk_cases.py:248: in test_russian_compound_name
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Анна-Мария Ивановна Смирнова', language='unknown', language_confidence=0.0, nor...=None, processing_time=4.076957702636719e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineRuUkCases.test_ukrainian_name_with_apostrophe ___________
tests/integration/test_pipeline_ru_uk_cases.py:272: in test_ukrainian_name_with_apostrophe
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text="О'Коннор Петрович", language='unknown', language_confidence=0.0, normalized_tex...n=None, processing_time=4.00543212890625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineRuUkCases.test_russian_name_with_apostrophe ____________
tests/integration/test_pipeline_ru_uk_cases.py:294: in test_russian_name_with_apostrophe
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text="Д'Артаньян Иванович", language='unknown', language_confidence=0.0, normalized_t...=None, processing_time=3.790855407714844e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_____________ TestPipelineRuUkCases.test_multiple_ukrainian_names ______________
tests/integration/test_pipeline_ru_uk_cases.py:316: in test_multiple_ukrainian_names
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко та Олена Іванівна Сміт', language='unknown', langu...=None, processing_time=4.982948303222656e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineRuUkCases.test_multiple_russian_names _______________
tests/integration/test_pipeline_ru_uk_cases.py:344: in test_multiple_russian_names
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров и Мария Сергеевна Смирнова', language='unknown', languag...sion=None, processing_time=4.57763671875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_____________ TestPipelineRuUkCases.test_ukrainian_name_with_typos _____________
tests/integration/test_pipeline_ru_uk_cases.py:373: in test_ukrainian_name_with_typos
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко', language='unknown', language_confidence=0.0, nor...=None, processing_time=4.887580871582031e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPipelineRuUkCases.test_russian_name_with_typos ______________
tests/integration/test_pipeline_ru_uk_cases.py:397: in test_russian_name_with_typos
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров', language='unknown', language_confidence=0.0, normalize...=None, processing_time=3.790855407714844e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
____________ TestPipelineRuUkCases.test_ukrainian_name_with_numbers ____________
tests/integration/test_pipeline_ru_uk_cases.py:420: in test_ukrainian_name_with_numbers
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко 123 456', language='unknown', language_confidence=...n=None, processing_time=3.62396240234375e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_____________ TestPipelineRuUkCases.test_russian_name_with_numbers _____________
tests/integration/test_pipeline_ru_uk_cases.py:444: in test_russian_name_with_numbers
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров 789 012', language='unknown', language_confidence=0.0, n...=None, processing_time=4.076957702636719e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineRuUkCases.test_ukrainian_name_with_punctuation __________
tests/integration/test_pipeline_ru_uk_cases.py:469: in test_ukrainian_name_with_punctuation
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко, д.р. 15.03.1980', language='unknown', language_co...=None, processing_time=4.100799560546875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineRuUkCases.test_russian_name_with_punctuation ___________
tests/integration/test_pipeline_ru_uk_cases.py:492: in test_russian_name_with_punctuation
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров, д.р. 15.03.1980', language='unknown', language_confiden...None, processing_time=5.6743621826171875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_________ TestPipelineRuUkCases.test_ukrainian_name_with_extra_spaces __________
tests/integration/test_pipeline_ru_uk_cases.py:515: in test_ukrainian_name_with_extra_spaces
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='  Олександр   Петрович   Коваленко  ', language='unknown', language_confidence=...n=None, processing_time=4.00543212890625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineRuUkCases.test_russian_name_with_extra_spaces ___________
tests/integration/test_pipeline_ru_uk_cases.py:538: in test_russian_name_with_extra_spaces
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='  Сергей   Иванович   Петров  ', language='unknown', language_confidence=0.0, n...on=None, processing_time=4.1961669921875e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________ TestPipelineRuUkCases.test_ukrainian_name_case_insensitive __________
tests/integration/test_pipeline_ru_uk_cases.py:561: in test_ukrainian_name_case_insensitive
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='оЛЕКСАНДР пЕТРОВИЧ кОВАЛЕНКО', language='unknown', language_confidence=0.0, nor...=None, processing_time=4.220008850097656e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
___________ TestPipelineRuUkCases.test_russian_name_case_insensitive ___________
tests/integration/test_pipeline_ru_uk_cases.py:584: in test_russian_name_case_insensitive
    assert result.success, f"Processing failed: {result.errors}"
E   AssertionError: Processing failed: ["object str can't be used in 'await' expression"]
E   assert False
E    +  where False = UnifiedProcessingResult(original_text='сЕРГЕЙ иВАНОВИЧ пЕТРОВ', language='unknown', language_confidence=0.0, normalize...None, processing_time=3.6716461181640625e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_ test_role_based_slavic_normalization[\u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430-ru] _
tests/integration/test_role_based_normalization.py:43: in test_role_based_slavic_normalization
    assert_normalized_name(result, expected_name)
tests/integration/test_full_normalization_suite.py:38: in assert_normalized_name
    assert expected_parts == actual_tokens, \
E   AssertionError: Ожидалось: {'алла', 'борисовна', 'пугачева'}, получено: {'аллы', 'борисовн', 'пугачев'}
E   assert {'алла', 'бор...', 'пугачева'} == {'аллы', 'бор...н', 'пугачев'}
E     
E     Extra items in the left set:
E     'алла'
E     'борисовна'
E     'пугачева'
E     Extra items in the right set:
E     'аллы'...
E     
E     ...Full output truncated (3 lines hidden), use '-vv' to show
_ test_role_based_slavic_normalization[\u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439-ru] _
tests/integration/test_role_based_normalization.py:43: in test_role_based_slavic_normalization
    assert_normalized_name(result, expected_name)
tests/integration/test_full_normalization_suite.py:38: in assert_normalized_name
    assert expected_parts == actual_tokens, \
E   AssertionError: Ожидалось: {'петр', 'чайковский'}, получено: {'чайковском', 'петр'}
E   assert {'петр', 'чайковский'} == {'петр', 'чайковском'}
E     
E     Extra items in the left set:
E     'чайковский'
E     Extra items in the right set:
E     'чайковском'
E     Use -v to get more diff
_______ TestRussianUkrainianSentences.test_multiple_persons_same_surname _______
tests/integration/test_ru_uk_sentences.py:97: in test_multiple_persons_same_surname
    assert "Владимир Петров" in result.normalized
E   AssertionError: assert 'Владимир Петров' in 'Владимир Анна Петров'
E    +  where 'Владимир Анна Петров' = NormalizationResult(normalized='Владимир Анна Петров', tokens=['Владимир', 'Анна', 'Петров'], trace=[TokenTrace(token=...re_female': 3, 'score_male': 2, 'gap': 1}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
____________ TestRussianUkrainianSentences.test_surname_variations _____________
tests/integration/test_ru_uk_sentences.py:161: in test_surname_variations
    assert "Петрова" in result.normalized
E   AssertionError: assert 'Петрова' in 'Петров Петров Петров Петров'
E    +  where 'Петров Петров Петров Петров' = NormalizationResult(normalized='Петров Петров Петров Петров', tokens=['Петров', 'Петров', 'Петров', 'Петров'], trace=[...re_female': 0, 'score_male': 2, 'gap': 2}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
____ TestRussianUkrainianSentences.test_organization_legal_forms_filtering _____
tests/integration/test_ru_uk_sentences.py:184: in test_organization_legal_forms_filtering
    assert "EXAMPLE" in result.organizations
E   AssertionError: assert 'EXAMPLE' in ['ПРИВАТБАНК', 'ТЕСТ']
E    +  where ['ПРИВАТБАНК', 'ТЕСТ'] = NormalizationResult(normalized='Example', tokens=['Example'], trace=[TokenTrace(token='ПРИВАТБАНК', role='org', rule='...p': 0}}], person_gender=None, gender_confidence=None, organizations=['ПРИВАТБАНК', 'ТЕСТ'], org_core='ПРИВАТБАНК ТЕСТ').organizations
________ TestRussianUkrainianSentences.test_performance_with_long_text _________
tests/integration/test_ru_uk_sentences.py:198: in test_performance_with_long_text
    assert "Анна Петровна Сидорова" in result.normalized
E   AssertionError: assert 'Анна Петровна Сидорова' in 'Петр Иванович Коваленко Анна Петровна Сидоров Владимир Сергеевич Петров Елена Александровна Козлов Михаил Николаевич Смирнов Ольга Владимировна Морозов'
E    +  where 'Петр Иванович Коваленко Анна Петровна Сидоров Владимир Сергеевич Петров Елена Александровна Козлов Михаил Николаевич Смирнов Ольга Владимировна Морозов' = NormalizationResult(normalized='Петр Иванович Коваленко Анна Петровна Сидоров Владимир Сергеевич Петров Елена Александ...female': 18, 'score_male': 28, 'gap': 10}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
____________________ test_orchestrator_with_metrics_service ____________________
tests/unit/monitoring/test_metrics_basic.py:85: in test_orchestrator_with_metrics_service
    assert result.success is True
E   assert False is True
E    +  where False = UnifiedProcessingResult(original_text='John Doe', language='unknown', language_confidence=0.0, normalized_text='', tok...e, decision=None, processing_time=0.0002219676971435547, success=False, errors=["'str' object has no attribute 'get'"]).success
------------------------------ Captured log call -------------------------------
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.requests.total
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.requests.active
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.layer.validation
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.requests.failed
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.exceptions
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.requests.active
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.total_time
__________ TestOrchestratorMetrics.test_successful_processing_metrics __________
tests/unit/monitoring/test_orchestrator_metrics.py:188: in test_successful_processing_metrics
    assert len(successful_requests) > 0
E   assert 0 > 0
E    +  where 0 = len([])
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
__________ TestOrchestratorMetrics.test_normalization_failure_metrics __________
tests/unit/monitoring/test_orchestrator_metrics.py:301: in test_normalization_failure_metrics
    assert "processing.normalization.failed" in metrics_service.metrics
E   AssertionError: assert 'processing.normalization.failed' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.0830998, 'type': 'counter', ...}, 'proces...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757967431.083101, 'type': 'gauge', ...}, ...}
E    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.0830998, 'type': 'counter', ...}, 'proces...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757967431.083101, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4f297cf30>.metrics
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
____________ TestOrchestratorMetrics.test_variants_failure_metrics _____________
tests/unit/monitoring/test_orchestrator_metrics.py:319: in test_variants_failure_metrics
    assert "processing.variants.failed" in metrics_service.metrics
E   AssertionError: assert 'processing.variants.failed' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.089494, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757967431.089495, 'type': 'gauge', ...}, ...}
E    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.089494, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757967431.089495, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4f29ad390>.metrics
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
___________ TestOrchestratorMetrics.test_embeddings_failure_metrics ____________
tests/unit/monitoring/test_orchestrator_metrics.py:337: in test_embeddings_failure_metrics
    assert "processing.embeddings.failed" in metrics_service.metrics
E   AssertionError: assert 'processing.embeddings.failed' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.097711, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757967431.097713, 'type': 'gauge', ...}, ...}
E    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.097711, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757967431.097713, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4f29c9550>.metrics
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
____________ TestOrchestratorMetrics.test_decision_failure_metrics _____________
tests/unit/monitoring/test_orchestrator_metrics.py:351: in test_decision_failure_metrics
    assert "processing.decision.failed" in metrics_service.metrics
E   AssertionError: assert 'processing.decision.failed' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.105223, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757967431.105224, 'type': 'gauge', ...}, ...}
E    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.105223, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757967431.105224, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4f29d9550>.metrics
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
_____________ TestOrchestratorMetrics.test_slow_processing_metrics _____________
tests/unit/monitoring/test_orchestrator_metrics.py:377: in test_slow_processing_metrics
    assert "processing.slow_requests" in metrics_service.metrics
E   AssertionError: assert 'processing.slow_requests' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1000.5, 'type': 'counter', ...}, 'processing.layer.s...timer', ...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1000.5, 'type': 'gauge', ...}, ...}
E    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1000.5, 'type': 'counter', ...}, 'processing.layer.s...timer', ...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1000.5, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4f2a99550>.metrics
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
_________ TestOrchestratorMetrics.test_language_detection_distribution _________
tests/unit/monitoring/test_orchestrator_metrics.py:437: in test_language_detection_distribution
    assert counter_name in metrics_service.metrics
E   AssertionError: assert 'language_detection.detected.en' in {'processing.exceptions': {'count': 3, 'labels': {}, 'timestamp': 1757967431.1261592, 'type': 'counter', ...}, 'proces....}, 'processing.requests.active': {'count': 6, 'labels': {}, 'timestamp': 1757967431.12616, 'type': 'gauge', ...}, ...}
E    +  where {'processing.exceptions': {'count': 3, 'labels': {}, 'timestamp': 1757967431.1261592, 'type': 'counter', ...}, 'proces....}, 'processing.requests.active': {'count': 6, 'labels': {}, 'timestamp': 1757967431.12616, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4e34ba510>.metrics
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
________ TestOrchestratorMetrics.test_metrics_without_optional_services ________
tests/unit/monitoring/test_orchestrator_metrics.py:491: in test_metrics_without_optional_services
    assert "processing.requests.successful" in metrics_service.metrics
E   AssertionError: assert 'processing.requests.successful' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.138533, 'type': 'counter', ...}, 'process..., 'processing.requests.failed': {'count': 1, 'labels': {}, 'timestamp': 1757967431.13853, 'type': 'counter', ...}, ...}
E    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757967431.138533, 'type': 'counter', ...}, 'process..., 'processing.requests.failed': {'count': 1, 'labels': {}, 'timestamp': 1757967431.13853, 'type': 'counter', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4f2a3f230>.metrics
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
___________ TestUnifiedOrchestrator.test_process_basic_functionality ___________
tests/unit/test_orchestrator_service.py:121: in test_process_basic_functionality
    assert result.success is True
E   assert False is True
E    +  where False = UnifiedProcessingResult(original_text='Test text', language='unknown', language_confidence=0.0, normalized_text='', to...None, processing_time=0.0005557537078857422, success=False, errors=["object Mock can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object Mock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object Mock can't be used in 'await' expression
___________ TestOrchestratorService.test_process_basic_functionality ___________
tests/unit/test_orchestrator_service_old.py:40: in test_process_basic_functionality
    assert result.success is True
E   assert False is True
E    +  where False = UnifiedProcessingResult(original_text='Test text', language='unknown', language_confidence=0.0, normalized_text='', to...=None, processing_time=3.886222839355469e-05, success=False, errors=["object str can't be used in 'await' expression"]).success
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
_____________ TestOrchestratorService.test_process_with_cache_hit ______________
tests/unit/test_orchestrator_service_old.py:53: in test_process_with_cache_hit
    cached_result = UnifiedProcessingResult(
E   TypeError: UnifiedProcessingResult.__init__() missing 3 required positional arguments: 'tokens', 'trace', and 'signals'
_____________ TestOrchestratorService.test_process_with_cache_miss _____________
tests/unit/test_orchestrator_service_old.py:80: in test_process_with_cache_miss
    with patch.object(orchestrator_service.cache_service, 'get') as mock_get, \
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'cache_service'. Did you mean: 'unicode_service'?
_____________ TestOrchestratorService.test_process_with_embeddings _____________
tests/unit/test_orchestrator_service_old.py:108: in test_process_with_embeddings
    patch.object(orchestrator_service.embedding_service, 'get_embeddings') as mock_embeddings:
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'embedding_service'. Did you mean: 'embeddings_service'?
_____________ TestOrchestratorService.test_process_error_handling ______________
tests/unit/test_orchestrator_service_old.py:142: in test_process_error_handling
    assert "Unicode service error" in result.errors[0]
E   assert 'Unicode service error' in "object str can't be used in 'await' expression"
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
__________________ TestOrchestratorService.test_process_batch __________________
tests/unit/test_orchestrator_service_old.py:155: in test_process_batch
    UnifiedProcessingResult(
E   TypeError: UnifiedProcessingResult.__init__() missing 3 required positional arguments: 'tokens', 'trace', and 'signals'
__________ TestOrchestratorService.test_process_batch_with_exceptions __________
tests/unit/test_orchestrator_service_old.py:183: in test_process_batch_with_exceptions
    UnifiedProcessingResult(
E   TypeError: UnifiedProcessingResult.__init__() missing 3 required positional arguments: 'tokens', 'trace', and 'signals'
______ TestOrchestratorService.test_search_similar_names_with_embeddings _______
tests/unit/test_orchestrator_service_old.py:209: in test_search_similar_names_with_embeddings
    with patch.object(orchestrator_service.embedding_service, 'find_similar_texts') as mock_search:
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'embedding_service'. Did you mean: 'embeddings_service'?
__________ TestOrchestratorService.test_search_similar_names_fallback __________
tests/unit/test_orchestrator_service_old.py:239: in test_search_similar_names_fallback
    with patch.object(orchestrator_service.embedding_service, 'find_similar_texts') as mock_search, \
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'embedding_service'. Did you mean: 'embeddings_service'?
_____________ TestOrchestratorService.test_analyze_text_complexity _____________
tests/unit/test_orchestrator_service_old.py:266: in test_analyze_text_complexity
    patch.object(orchestrator_service.signal_service, 'get_name_signals') as mock_signals:
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'signal_service'. Did you mean: 'signals_service'?
______________ TestOrchestratorService.test_get_processing_stats _______________
tests/unit/test_orchestrator_service_old.py:305: in test_get_processing_stats
    orchestrator_service.processing_stats['total_processed'] = 10
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'processing_stats'
___________________ TestOrchestratorService.test_clear_cache ___________________
tests/unit/test_orchestrator_service_old.py:325: in test_clear_cache
    orchestrator_service.clear_cache()
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'clear_cache'
___________________ TestOrchestratorService.test_reset_stats ___________________
tests/unit/test_orchestrator_service_old.py:334: in test_reset_stats
    orchestrator_service.processing_stats['total_processed'] = 5
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'processing_stats'
_______________ TestOrchestratorService.test_generate_cache_key ________________
tests/unit/test_orchestrator_service_old.py:347: in test_generate_cache_key
    key1 = orchestrator_service._generate_cache_key("test", True, False)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute '_generate_cache_key'
__________________ TestOrchestratorService.test_update_stats ___________________
tests/unit/test_orchestrator_service_old.py:360: in test_update_stats
    initial_processed = orchestrator_service.processing_stats['total_processed']
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'processing_stats'
___________ TestOrchestratorService.test_calculate_complexity_score ____________
tests/unit/test_orchestrator_service_old.py:382: in test_calculate_complexity_score
    score = orchestrator_service._calculate_complexity_score(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute '_calculate_complexity_score'
_______ TestOrchestratorService.test_generate_complexity_recommendations _______
tests/unit/test_orchestrator_service_old.py:395: in test_generate_complexity_recommendations
    low_recommendations = orchestrator_service._generate_complexity_recommendations(0.2)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute '_generate_complexity_recommendations'
__________ TestOrchestratorService.test_force_reprocess_ignores_cache __________
tests/unit/test_orchestrator_service_old.py:416: in test_force_reprocess_ignores_cache
    cached_result = UnifiedProcessingResult(
E   TypeError: UnifiedProcessingResult.__init__() missing 3 required positional arguments: 'tokens', 'trace', and 'signals'
___________ TestOrchestratorService.test_orchestrator_initialization ___________
tests/unit/test_orchestrator_service_old.py:450: in test_orchestrator_initialization
    assert orchestrator.cache_service.max_size == 100  # From fixture
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AttributeError: 'UnifiedOrchestrator' object has no attribute 'cache_service'. Did you mean: 'unicode_service'?
_____ TestOrchestratorService.test_process_normalization_service_exception _____
tests/unit/test_orchestrator_service_old.py:531: in test_process_normalization_service_exception
    assert any('normalization service error' in error.lower() for error in result.errors)
E   assert False
E    +  where False = any(<generator object TestOrchestratorService.test_process_normalization_service_exception.<locals>.<genexpr> at 0x60194f2a0>)
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
______________ TestPatternService.test_case_sensitivity_handling _______________
tests/unit/test_pattern_service.py:192: in test_case_sensitivity_handling
    assert len(patterns) > 0
E   assert 0 > 0
E    +  where 0 = len([])
__________ TestRunServiceScript.test_check_spacy_models_all_available __________
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: None does not have the attribute 'load'
_ TestRunServiceScript.test_check_spacy_models_some_missing_auto_install_success _
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: None does not have the attribute 'load'
___ TestRunServiceScript.test_check_spacy_models_all_missing_no_auto_install ___
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1497: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1467: in get_original
    raise AttributeError(
E   AttributeError: None does not have the attribute 'load'
______________ TestSmartFilterService.test_service_words_cleaning ______________
tests/unit/test_smart_filter_service.py:195: in test_service_words_cleaning
    self.assertNotEqual(cleaned, text_with_service_words)
E   AssertionError: 'оплата за консультацію Петров Іван' == 'оплата за консультацію Петров Іван'
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.smart_filter.smart_filter_service:smart_filter_service.py:479 _clean_service_words is deprecated - use context-aware analysis instead
___________ TestSmartFilterService.test_should_process_text_excluded ___________
tests/unit/test_smart_filter_service.py:59: in test_should_process_text_excluded
    self.assertIn("исключен", result.processing_recommendation)
E   AssertionError: 'исключен' not found in 'Text excluded from processing (service information only)'
____________________ TestUnicodeService.test_final_cleanup _____________________
tests/unit/test_unicode_service.py:181: in test_final_cleanup
    assert normalized == "multiple spaces"  # Should be cleaned and converted to lowercase
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: assert 'Multiple spaces' == 'multiple spaces'
E     
E     - multiple spaces
E     ? ^
E     + Multiple spaces
E     ? ^
________ TestUnicodeService.test_unicode_normalization_failure_handling ________
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1423: in patched
    with self.decoration_helper(patched,
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:141: in __enter__
    return next(self.gen)
           ^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1405: in decoration_helper
    arg = exit_stack.enter_context(patching)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py:530: in enter_context
    result = _enter(cm)
             ^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:1481: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'src.ai_service.services' has no attribute 'unicode_service'
__________________ TestUnicodeService.test_case_normalization __________________
tests/unit/test_unicode_service.py:265: in test_case_normalization
    assert result['normalized'].islower()
E   AssertionError: assert False
E    +  where False = <built-in method islower of str object at 0x37b263a70>()
E    +    where <built-in method islower of str object at 0x37b263a70> = 'MiXeD CaSe TeXt'.islower
_ test_ukrainian_full_normalization[\u0414\u043b\u044f \u0416\u0435\u043d\u0456 \u0413\u0430\u043b\u0438\u0447\u0430 \u0437 \u0433\u0440\u0443\u043f\u0438 O.Torvald-\u0404\u0432\u0433\u0435\u043d \u0413\u0430\u043b\u0438\u0447] _
tests/unit/text_processing/test_normalization_logic.py:48: in test_ukrainian_full_normalization
    assert_normalized_name(result, expected_name)
tests/unit/text_processing/test_normalization_logic.py:18: in assert_normalized_name
    assert result.normalized == expected_name, f"Expected '{expected_name}', but got '{result.normalized}'"
E   AssertionError: Expected 'Євген Галич', but got 'Євген Галич З.'
E   assert 'Євген Галич З.' == 'Євген Галич'
E     
E     - Євген Галич
E     + Євген Галич З.
E     ?            +++
_ test_ukrainian_full_normalization[\u0417\u0443\u0441\u0442\u0440\u0456\u0447 \u0437 \u041b\u0456\u043d\u043e\u044e \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e-\u041b\u0456\u043d\u0430 \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e] _
tests/unit/text_processing/test_normalization_logic.py:48: in test_ukrainian_full_normalization
    assert_normalized_name(result, expected_name)
tests/unit/text_processing/test_normalization_logic.py:18: in assert_normalized_name
    assert result.normalized == expected_name, f"Expected '{expected_name}', but got '{result.normalized}'"
E   AssertionError: Expected 'Ліна Костенко', but got 'З. Ліна Костенко'
E   assert 'З. Ліна Костенко' == 'Ліна Костенко'
E     
E     - Ліна Костенко
E     + З. Ліна Костенко
E     ? +++
_ test_ukrainian_full_normalization[\u0420\u043e\u0437\u043c\u043e\u0432\u043b\u044f\u0432 \u0437 \u0412\u0430\u043b\u0435\u0440\u0456\u0454\u043c \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u043c-\u0412\u0430\u043b\u0435\u0440\u0456\u0439 \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u0439] _
tests/unit/text_processing/test_normalization_logic.py:48: in test_ukrainian_full_normalization
    assert_normalized_name(result, expected_name)
tests/unit/text_processing/test_normalization_logic.py:18: in assert_normalized_name
    assert result.normalized == expected_name, f"Expected '{expected_name}', but got '{result.normalized}'"
E   AssertionError: Expected 'Валерій Залужний', but got 'З. Валерій Залужний'
E   assert 'З. Валерій Залужний' == 'Валерій Залужний'
E     
E     - Валерій Залужний
E     + З. Валерій Залужний
E     ? +++
_ test_ukrainian_full_normalization[\u0414\u043b\u044f \u0406\u0432\u0430\u043d\u043e\u0432\u0430-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u0430 \u0421.\u0412.-\u0406\u0432\u0430\u043d\u043e\u0432-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u043e \u0421.\u0412.] _
tests/unit/text_processing/test_normalization_logic.py:48: in test_ukrainian_full_normalization
    assert_normalized_name(result, expected_name)
tests/unit/text_processing/test_normalization_logic.py:18: in assert_normalized_name
    assert result.normalized == expected_name, f"Expected '{expected_name}', but got '{result.normalized}'"
E   AssertionError: Expected 'Іванов-Петренко С.В.', but got 'Іванов-Петренко С. В.'
E   assert 'Іванов-Петренко С. В.' == 'Іванов-Петренко С.В.'
E     
E     - Іванов-Петренко С.В.
E     + Іванов-Петренко С. В.
E     ?                   +
_ test_russian_full_normalization[\u0414\u043b\u044f \u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430] _
tests/unit/text_processing/test_normalization_logic.py:111: in test_russian_full_normalization
    assert_normalized_name(result, expected_name)
tests/unit/text_processing/test_normalization_logic.py:18: in assert_normalized_name
    assert result.normalized == expected_name, f"Expected '{expected_name}', but got '{result.normalized}'"
E   AssertionError: Expected 'Алла Борисовна Пугачева', but got 'Аллы Борисовн Пугачев'
E   assert 'Аллы Борисовн Пугачев' == 'Алла Борисовна Пугачева'
E     
E     - Алла Борисовна Пугачева
E     ?    ^         -        -
E     + Аллы Борисовн Пугачев
E     ?    ^
_ test_russian_full_normalization[\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439] _
tests/unit/text_processing/test_normalization_logic.py:111: in test_russian_full_normalization
    assert_normalized_name(result, expected_name)
tests/unit/text_processing/test_normalization_logic.py:18: in assert_normalized_name
    assert result.normalized == expected_name, f"Expected '{expected_name}', but got '{result.normalized}'"
E   AssertionError: Expected 'Петр Чайковский', but got 'Петр Чайковском'
E   assert 'Петр Чайковском' == 'Петр Чайковский'
E     
E     - Петр Чайковский
E     ?              ^^
E     + Петр Чайковском
E     ?              ^^
_ test_russian_full_normalization[\u0412\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0410\u043d\u043d\u043e\u0439 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u043e\u0439-\u0410\u043d\u043d\u0430 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u0430] _
tests/unit/text_processing/test_normalization_logic.py:111: in test_russian_full_normalization
    assert_normalized_name(result, expected_name)
tests/unit/text_processing/test_normalization_logic.py:18: in assert_normalized_name
    assert result.normalized == expected_name, f"Expected '{expected_name}', but got '{result.normalized}'"
E   AssertionError: Expected 'Анна Ахматова', but got 'С. Анна Ахматова'
E   assert 'С. Анна Ахматова' == 'Анна Ахматова'
E     
E     - Анна Ахматова
E     + С. Анна Ахматова
E     ? +++
_ test_russian_full_normalization[\u0417\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u043e\u0442 \u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432\u0430 \u041c.\u042e.-\u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432 \u041c.\u042e.] _
tests/unit/text_processing/test_normalization_logic.py:111: in test_russian_full_normalization
    assert_normalized_name(result, expected_name)
tests/unit/text_processing/test_normalization_logic.py:18: in assert_normalized_name
    assert result.normalized == expected_name, f"Expected '{expected_name}', but got '{result.normalized}'"
E   AssertionError: Expected 'Лермонтов М.Ю.', but got 'Лермонтов М. Ю.'
E   assert 'Лермонтов М. Ю.' == 'Лермонтов М.Ю.'
E     
E     - Лермонтов М.Ю.
E     + Лермонтов М. Ю.
E     ?             +
___ test_english_full_normalization[Sent to ELON MUSK for X corp-Elon Musk] ____
tests/unit/text_processing/test_normalization_logic.py:130: in test_english_full_normalization
    assert_normalized_name(result, expected_name)
tests/unit/text_processing/test_normalization_logic.py:18: in assert_normalized_name
    assert result.normalized == expected_name, f"Expected '{expected_name}', but got '{result.normalized}'"
E   AssertionError: Expected 'Elon Musk', but got 'Elon Musk X'
E   assert 'Elon Musk X' == 'Elon Musk'
E     
E     - Elon Musk
E     + Elon Musk X
E     ?          ++
_ TestNormalizationResultFields.test_normalization_result_basic_serialization __
tests/unit/text_processing/test_normalization_result_fields.py:110: in test_normalization_result_basic_serialization
    result_dict = dataclasses.asdict(result)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/dataclasses.py:1358: in asdict
    raise TypeError("asdict() should be called on dataclass instances")
E   TypeError: asdict() should be called on dataclass instances
_________ TestNormalizationService.test_normalize_russian_complex_text _________
tests/unit/text_processing/test_normalization_service.py:226: in test_normalize_russian_complex_text
    assert "Анна" in result.normalized
E   AssertionError: assert 'Анна' in 'Иван Петров Анны Смирнов'
E    +  where 'Иван Петров Анны Смирнов' = NormalizationResult(normalized='Иван Петров Анны Смирнов', tokens=['Иван', 'Петров', 'Анны', 'Смирнов'], trace=[TokenT...re_female': 0, 'score_male': 7, 'gap': 7}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
________ TestNormalizationService.test_normalize_ukrainian_complex_text ________
tests/unit/text_processing/test_normalization_service.py:237: in test_normalize_ukrainian_complex_text
    assert "Анна" in result.normalized
E   AssertionError: assert 'Анна' in 'Іван Петров Анни Смірнов'
E    +  where 'Іван Петров Анни Смірнов' = NormalizationResult(normalized='Іван Петров Анни Смірнов', tokens=['Іван', 'Петров', 'Анни', 'Смірнов'], trace=[TokenT...re_female': 0, 'score_male': 7, 'gap': 7}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
_____________ TestNormalizationService.test_normalize_english_text _____________
tests/unit/text_processing/test_normalization_service_fixed.py:48: in test_normalize_english_text
    assert "Hello world" in result.normalized
E   AssertionError: assert 'Hello world' in 'Hello World'
E    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
_____________ TestNormalizationService.test_normalize_russian_text _____________
tests/unit/text_processing/test_normalization_service_fixed.py:56: in test_normalize_russian_text
    assert "Привет" in result.normalized
E   AssertionError: assert 'Привет' in ''
E    +  where '' = NormalizationResult(normalized='', tokens=[], trace=[], errors=[], language='ru', confidence=1.0, original_length=10, ..._core=[], organizations_core=[], persons=[], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
____________ TestNormalizationService.test_normalize_with_fallback _____________
tests/unit/text_processing/test_normalization_service_fixed.py:72: in test_normalize_with_fallback
    assert "Hello world" in result.normalized
E   AssertionError: assert 'Hello world' in 'Hello World'
E    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
_____ TestNormalizationService.test_normalize_with_auto_language_detection _____
tests/unit/text_processing/test_normalization_service_fixed.py:76: in test_normalize_with_auto_language_detection
    result = service.normalize("Hello world", language="auto")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/ai_service/utils/performance.py:21: in wrapper
    result = func(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^
src/ai_service/utils/performance.py:54: in wrapper
    return func(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
src/ai_service/layers/normalization/normalization_service.py:390: in normalize
    return self._normalize_sync(
src/ai_service/layers/normalization/normalization_service.py:568: in _normalize_sync
    return NormalizationResult(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for NormalizationResult
E   language
E     Input should be a valid string [type=string_type, input_value=<Mock name='LanguageDetec...guage' id='23990509520'>, input_type=Mock]
E       For further information visit https://errors.pydantic.dev/2.11/v/string_type
------------------------------ Captured log call -------------------------------
ERROR    ai_service.layers.normalization.normalization_service:normalization_service.py:561 Normalization failed: 2 validation errors for NormalizationResult
language
  Input should be a valid string [type=string_type, input_value=<Mock name='LanguageDetec...guage' id='23990509520'>, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
confidence
  Input should be a valid number [type=float_type, input_value=<Mock name='LanguageDetec...dence' id='23990509856'>, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
ERROR    ai_service.utils.performance:performance.py:34 Error in normalize after 0.042s: 1 validation error for NormalizationResult
language
  Input should be a valid string [type=string_type, input_value=<Mock name='LanguageDetec...guage' id='23990509520'>, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
_______ TestNormalizationService.test_normalize_with_special_characters ________
tests/unit/text_processing/test_normalization_service_fixed.py:132: in test_normalize_with_special_characters
    assert "O'Connor" in result.normalized
E   assert "O'Connor" in "O'connor"
E    +  where "O'connor" = NormalizationResult(normalized="O'connor", tokens=["O'connor"], trace=[TokenTrace(token="O'Connor", role='given', rule...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
_____________ TestNormalizationService.test_normalize_sync_method ______________
tests/unit/text_processing/test_normalization_service_fixed.py:147: in test_normalize_sync_method
    assert "Hello world" in result.normalized
E   AssertionError: assert 'Hello world' in 'Hello World'
E    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
_____________ TestNormalizationService.test_normalize_async_method _____________
tests/unit/text_processing/test_normalization_service_fixed.py:158: in test_normalize_async_method
    asyncio.run(run_test())
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py:195: in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py:118: in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py:725: in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
tests/unit/text_processing/test_normalization_service_fixed.py:156: in run_test
    assert "Hello world" in result.normalized
E   AssertionError: assert 'Hello world' in 'Hello World'
E    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
______________ TestNormalizationService.test_normalize_with_flags ______________
tests/unit/text_processing/test_normalization_service_fixed.py:171: in test_normalize_with_flags
    assert "Hello world" in result.normalized
E   AssertionError: assert 'Hello world' in 'Hello World'
E    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
_________ TestNormalizationService.test_normalize_russian_complex_text _________
tests/unit/text_processing/test_normalization_service_fixed.py:216: in test_normalize_russian_complex_text
    assert "Анна" in result.normalized
E   AssertionError: assert 'Анна' in 'Иван Петров Анны Смирнов'
E    +  where 'Иван Петров Анны Смирнов' = NormalizationResult(normalized='Иван Петров Анны Смирнов', tokens=['Иван', 'Петров', 'Анны', 'Смирнов'], trace=[TokenT...re_female': 0, 'score_male': 7, 'gap': 7}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
________ TestNormalizationService.test_normalize_ukrainian_complex_text ________
tests/unit/text_processing/test_normalization_service_fixed.py:227: in test_normalize_ukrainian_complex_text
    assert "Анна" in result.normalized
E   AssertionError: assert 'Анна' in 'Іван Петров Анни Смірнов'
E    +  where 'Іван Петров Анни Смірнов' = NormalizationResult(normalized='Іван Петров Анни Смірнов', tokens=['Іван', 'Петров', 'Анни', 'Смірнов'], trace=[TokenT...re_female': 0, 'score_male': 7, 'gap': 7}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized
__ TestNormalizationServiceConfiguration.test_diminutive_maps_initialization ___
tests/unit/text_processing/test_normalization_service_fixed.py:292: in test_diminutive_maps_initialization
    assert 'en' in service.diminutive_maps
E   AssertionError: assert 'en' in {'ru': {'алекс': 'Александр', 'алекса': 'Александра', 'алина': 'Алина', 'алис': 'Алиса', ...}, 'uk': {'алекс': 'Олександр', 'алекса': 'Олександра', 'алина': 'Алина', 'алка': 'Алла', ...}}
E    +  where {'ru': {'алекс': 'Александр', 'алекса': 'Александра', 'алина': 'Алина', 'алис': 'Алиса', ...}, 'uk': {'алекс': 'Олександр', 'алекса': 'Олександра', 'алина': 'Алина', 'алка': 'Алла', ...}} = <ai_service.layers.normalization.normalization_service.NormalizationService object at 0x5910cccd0>.diminutive_maps
__________ TestNormalizationResult.test_normalization_result_creation __________
tests/unit/text_processing/test_normalization_service_fixed.py:304: in test_normalization_result_creation
    result = NormalizationResult(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for NormalizationResult
E   normalized
E     Field required [type=missing, input_value={'original_text': 'test',...ss': True, 'errors': []}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
_________ TestNormalizationResult.test_normalization_result_error_case _________
tests/unit/text_processing/test_normalization_service_fixed.py:328: in test_normalization_result_error_case
    result = NormalizationResult(
E   pydantic_core._pydantic_core.ValidationError: 1 validation error for NormalizationResult
E   normalized
E     Field required [type=missing, input_value={'original_text': 'test',...errors': ['Test error']}, input_type=dict]
E       For further information visit https://errors.pydantic.dev/2.11/v/missing
____________________ TestUnicodeService.test_final_cleanup _____________________
tests/unit/text_processing/test_unicode_service.py:182: in test_final_cleanup
    assert normalized == "  Multiple   spaces  \t\n  "  # Should be unchanged by UnicodeService
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: assert 'Multiple spaces' == '  Multiple   spaces  \t\n  '
E     
E     -   Multiple   spaces  	
E     ? --         --      ----
E     + Multiple spaces
E     -
___ TestUnicodeServiceIntegration.test_aggressive_vs_conservative_mode[True] ___
tests/unit/unicode/test_unicode_service_comprehensive.py:335: in test_aggressive_vs_conservative_mode
    assert "🌟" not in normalized_text
E   AssertionError: assert '🌟' not in 'cafe 🌟 jose...com #hashtag'
E     
E     '🌟' is contained here:
E       cafe 🌟 jose@email.com #hashtag
E     ?      +
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.unicode.unicode_service:unicode_service.py:448 unidecode not available, skipping ASCII folding
___________ TestCanaryOverfit.test_context_words_never_become_names ____________
tests/unit/utilities/test_canary_overfit.py:34: in test_context_words_never_become_names
    assert name in normalized, f"Expected name '{name}' not found in normalized output: {result.normalized}"
E   AssertionError: Expected name 'п.і.' not found in normalized output: П. І. Коваленко Петросян
E   assert 'п.і.' in 'п. і. коваленко петросян'
________________ TestCanaryOverfit.test_ukrainian_context_words ________________
tests/unit/utilities/test_canary_overfit.py:55: in test_ukrainian_context_words
    assert context_word not in result.normalized.lower(), f"Context word '{context_word}' should not appear in normalized output: {result.normalized}"
E   AssertionError: Context word 'і' should not appear in normalized output: Іван І. Петро Коваленко
E   assert 'і' not in 'іван і. петро коваленко'
E     
E     'і' is contained here:
E       іван і. петро коваленко
E     ? +
_________________ TestCanaryOverfit.test_russian_context_words _________________
tests/unit/utilities/test_canary_overfit.py:78: in test_russian_context_words
    assert context_word not in result.normalized.lower(), f"Context word '{context_word}' should not appear in normalized output: {result.normalized}"
E   AssertionError: Context word 'и' should not appear in normalized output: Иван Петр Коваленко
E   assert 'и' not in 'иван петр коваленко'
E     
E     'и' is contained here:
E       иван петр коваленко
E     ? +
_____________ TestCanaryOverfit.test_mixed_language_context_words ______________
tests/unit/utilities/test_canary_overfit.py:119: in test_mixed_language_context_words
    assert context_word not in normalized, f"Context word '{context_word}' should not appear in normalized output: {result.normalized}"
E   AssertionError: Context word 'and' should not appear in normalized output: П. І. Коваленко And Петросян Work Together
E   assert 'and' not in 'п. і. ковал...ork together'
E     
E     'and' is contained here:
E       п. і. коваленко and петросян work together
E     ?                 +++
________________ TestInputValidator.test_homoglyph_replacement _________________
tests/unit/utilities/test_input_validation.py:48: in test_homoglyph_replacement
    assert result.sanitized_text == "Pavlov"  # Should be normalized
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   AssertionError: assert 'Pаvlоv' == 'Pavlov'
E     
E     - Pavlov
E     + Pаvlоv
_______ TestInputValidator.test_suspicion_analysis_high_homoglyph_ratio ________
tests/unit/utilities/test_input_validation.py:207: in test_suspicion_analysis_high_homoglyph_ratio
    assert analysis['is_suspicious'] is True
E   assert False is True
=============================== warnings summary ===============================
tests/performance/test_lang_perf.py:89
  /Users/dariapavlova/Desktop/ai-service/tests/performance/test_lang_perf.py:89: PytestUnknownMarkWarning: Unknown pytest.mark.performance - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.performance

tests/performance/test_lang_perf.py:133
  /Users/dariapavlova/Desktop/ai-service/tests/performance/test_lang_perf.py:133: PytestUnknownMarkWarning: Unknown pytest.mark.performance - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.performance

tests/performance/test_lang_perf.py:170
  /Users/dariapavlova/Desktop/ai-service/tests/performance/test_lang_perf.py:170: PytestUnknownMarkWarning: Unknown pytest.mark.performance - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.performance

tests/performance/test_lang_perf.py:189
  /Users/dariapavlova/Desktop/ai-service/tests/performance/test_lang_perf.py:189: PytestUnknownMarkWarning: Unknown pytest.mark.performance - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.performance

tests/performance/test_lang_perf.py:220
  /Users/dariapavlova/Desktop/ai-service/tests/performance/test_lang_perf.py:220: PytestUnknownMarkWarning: Unknown pytest.mark.performance - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.performance

tests/unit/core/test_decision_engine.py:273
  /Users/dariapavlova/Desktop/ai-service/tests/unit/core/test_decision_engine.py:273: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests/unit/core/test_decision_engine.py:282
  /Users/dariapavlova/Desktop/ai-service/tests/unit/core/test_decision_engine.py:282: PytestUnknownMarkWarning: Unknown pytest.mark.performance - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.performance

tests/unit/core/test_orchestrator_factory.py:276
  /Users/dariapavlova/Desktop/ai-service/tests/unit/core/test_orchestrator_factory.py:276: PytestUnknownMarkWarning: Unknown pytest.mark.integration - is this a typo?  You can register custom marks to avoid this warning - for details, see https://docs.pytest.org/en/stable/how-to/mark.html
    @pytest.mark.integration

tests/integration/test_simple_normalization.py::test_normalization_directly
  /opt/homebrew/lib/python3.13/site-packages/_pytest/python.py:161: PytestReturnNotNoneWarning: Test functions should return None, but tests/integration/test_simple_normalization.py::test_normalization_directly returned <class 'bool'>.
  Did you mean to use `assert` instead of `return`?
  See https://docs.pytest.org/en/stable/how-to/assert.html#return-not-none for more information.
    warnings.warn(

tests/unit/test_orchestrator_service_fixed.py::TestUnifiedOrchestrator::test_orchestrator_initialization
  /opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py:2247: RuntimeWarning: coroutine 'AsyncMockMixin._execute_mock_call' was never awaited
    def __init__(self, name, parent):
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
==================================== PASSES ====================================
____________________________ test_diminutive_forms _____________________________
----------------------------- Captured stdout call -----------------------------
🔍 Testing Diminutive Forms
==================================================

Input: 'Петрик'
Expected base: 'Петро'
Forms: ["Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim datv'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 2),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim gent'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 1),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,Name,masc,anim datv'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 1897, 2),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,Surn,masc,anim loct'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 488, 6),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,Name,masc,anim gent'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 1897, 1),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim accs'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 3),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim nomn'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 0),))", "Parse(word='петриком', tag=OpencorporaTag('NOUN,Name,masc,anim ablt'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петриком', 1897, 5),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,Name,masc,anim loct'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 1897, 6),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,Name,masc,anim accs'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 1897, 4),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,masc,inan nomn'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 316, 0),))", "Parse(word='петриком', tag=OpencorporaTag('NOUN,Surn,masc,anim ablt'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петриком', 488, 5),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,anim masc,nomn'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 488, 0),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,masc,inan datv'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 316, 3),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,Surn,masc,anim datv'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 488, 2),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim loct'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 5),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,masc,inan gent'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 316, 1),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,Surn,masc,anim gent'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 488, 1),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,Surn,masc,anim accs'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 488, 4),))", 'Петрик', "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim ablt'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 4),))", "Parse(word='петриком', tag=OpencorporaTag('NOUN,masc,inan ablt'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петриком', 316, 6),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,masc,inan loct'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 316, 7),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Name,anim masc,nomn'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 1897, 0),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,masc,inan accs'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 316, 5),))"]
❌ Expected base form 'Петро' NOT found
   Available forms: ["Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim datv'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 2),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim gent'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 1),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,Name,masc,anim datv'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 1897, 2),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,Surn,masc,anim loct'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 488, 6),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,Name,masc,anim gent'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 1897, 1),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim accs'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 3),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim nomn'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 0),))", "Parse(word='петриком', tag=OpencorporaTag('NOUN,Name,masc,anim ablt'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петриком', 1897, 5),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,Name,masc,anim loct'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 1897, 6),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,Name,masc,anim accs'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 1897, 4),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,masc,inan nomn'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 316, 0),))", "Parse(word='петриком', tag=OpencorporaTag('NOUN,Surn,masc,anim ablt'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петриком', 488, 5),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,anim masc,nomn'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 488, 0),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,masc,inan datv'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 316, 3),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,Surn,masc,anim datv'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 488, 2),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim loct'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 5),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,masc,inan gent'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 316, 1),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,Surn,masc,anim gent'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 488, 1),))", "Parse(word='петрика', tag=OpencorporaTag('NOUN,Surn,masc,anim accs'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрика', 488, 4),))", 'Петрик', "Parse(word='петрик', tag=OpencorporaTag('NOUN,Surn,Fixd,femn,anim ablt'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 9, 4),))", "Parse(word='петриком', tag=OpencorporaTag('NOUN,masc,inan ablt'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петриком', 316, 6),))", "Parse(word='петрикові', tag=OpencorporaTag('NOUN,masc,inan loct'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрикові', 316, 7),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,Name,anim masc,nomn'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 1897, 0),))", "Parse(word='петрик', tag=OpencorporaTag('NOUN,masc,inan accs'), normal_form='петрик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрик', 316, 5),))"]

Input: 'Сашко'
Expected base: 'Олександр'
Forms: ["Parse(word='сашці', tag=OpencorporaTag('NOUN,Name,masc,anim loct'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашці', 365, 5),))", "Parse(word='сашкою', tag=OpencorporaTag('NOUN,Name,femn,anim ablt'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашкою', 265, 4),))", "Parse(word='сашком', tag=OpencorporaTag('NOUN,Name,masc,anim ablt'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашком', 407, 5),))", "Parse(word='сашки', tag=OpencorporaTag('NOUN,Name,masc,anim gent'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашки', 365, 1),))", "Parse(word='сашкою', tag=OpencorporaTag('NOUN,Name,masc,anim ablt'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашкою', 365, 4),))", "Parse(word='сашка', tag=OpencorporaTag('NOUN,Name,masc,anim accs'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашка', 407, 4),))", "Parse(word='сашку', tag=OpencorporaTag('NOUN,Name,masc,anim accs'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашку', 365, 3),))", "Parse(word='сашко', tag=OpencorporaTag('NOUN,Name,anim masc,nomn'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашко', 407, 0),))", "Parse(word='сашці', tag=OpencorporaTag('NOUN,Name,masc,anim datv'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашці', 365, 2),))", "Parse(word='сашка', tag=OpencorporaTag('NOUN,Name,masc,anim nomn'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашка', 365, 0),))", "Parse(word='сашці', tag=OpencorporaTag('NOUN,Name,femn,anim loct'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашці', 265, 5),))", "Parse(word='сашка', tag=OpencorporaTag('NOUN,Name,femn,anim nomn'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашка', 265, 0),))", "Parse(word='сашці', tag=OpencorporaTag('NOUN,Name,femn,anim datv'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашці', 265, 2),))", "Parse(word='сашку', tag=OpencorporaTag('NOUN,Name,femn,anim accs'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашку', 265, 3),))", "Parse(word='сашкові', tag=OpencorporaTag('NOUN,Name,masc,anim datv'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашкові', 407, 2),))", "Parse(word='сашки', tag=OpencorporaTag('NOUN,Name,femn,anim gent'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашки', 265, 1),))", 'Сашко', "Parse(word='сашка', tag=OpencorporaTag('NOUN,Name,masc,anim gent'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашка', 407, 1),))", "Parse(word='сашкові', tag=OpencorporaTag('NOUN,Name,masc,anim loct'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашкові', 407, 6),))"]
❌ Expected base form 'Олександр' NOT found
   Available forms: ["Parse(word='сашці', tag=OpencorporaTag('NOUN,Name,masc,anim loct'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашці', 365, 5),))", "Parse(word='сашкою', tag=OpencorporaTag('NOUN,Name,femn,anim ablt'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашкою', 265, 4),))", "Parse(word='сашком', tag=OpencorporaTag('NOUN,Name,masc,anim ablt'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашком', 407, 5),))", "Parse(word='сашки', tag=OpencorporaTag('NOUN,Name,masc,anim gent'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашки', 365, 1),))", "Parse(word='сашкою', tag=OpencorporaTag('NOUN,Name,masc,anim ablt'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашкою', 365, 4),))", "Parse(word='сашка', tag=OpencorporaTag('NOUN,Name,masc,anim accs'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашка', 407, 4),))", "Parse(word='сашку', tag=OpencorporaTag('NOUN,Name,masc,anim accs'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашку', 365, 3),))", "Parse(word='сашко', tag=OpencorporaTag('NOUN,Name,anim masc,nomn'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашко', 407, 0),))", "Parse(word='сашці', tag=OpencorporaTag('NOUN,Name,masc,anim datv'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашці', 365, 2),))", "Parse(word='сашка', tag=OpencorporaTag('NOUN,Name,masc,anim nomn'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашка', 365, 0),))", "Parse(word='сашці', tag=OpencorporaTag('NOUN,Name,femn,anim loct'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашці', 265, 5),))", "Parse(word='сашка', tag=OpencorporaTag('NOUN,Name,femn,anim nomn'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашка', 265, 0),))", "Parse(word='сашці', tag=OpencorporaTag('NOUN,Name,femn,anim datv'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашці', 265, 2),))", "Parse(word='сашку', tag=OpencorporaTag('NOUN,Name,femn,anim accs'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашку', 265, 3),))", "Parse(word='сашкові', tag=OpencorporaTag('NOUN,Name,masc,anim datv'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашкові', 407, 2),))", "Parse(word='сашки', tag=OpencorporaTag('NOUN,Name,femn,anim gent'), normal_form='сашка', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашки', 265, 1),))", 'Сашко', "Parse(word='сашка', tag=OpencorporaTag('NOUN,Name,masc,anim gent'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашка', 407, 1),))", "Parse(word='сашкові', tag=OpencorporaTag('NOUN,Name,masc,anim loct'), normal_form='сашко', score=1.0, methods_stack=((DictionaryAnalyzer(), 'сашкові', 407, 6),))"]

Input: 'Вовчик'
Expected base: 'Володимир'
Forms: ["Parse(word='вовчика', tag=OpencorporaTag('NOUN,masc,inan gent'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчика', 316, 1),))", "Parse(word='вовчик', tag=OpencorporaTag('NOUN,masc,inan nomn'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчик', 316, 0),))", "Parse(word='вовчикові', tag=OpencorporaTag('NOUN,masc,inan datv'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчикові', 316, 3),))", "Parse(word='вовчикові', tag=OpencorporaTag('NOUN,anim masc,datv'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчикові', 197, 2),))", "Parse(word='вовчика', tag=OpencorporaTag('NOUN,anim masc,gent'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчика', 197, 1),))", "Parse(word='вовчика', tag=OpencorporaTag('NOUN,anim masc,accs'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчика', 197, 4),))", 'Вовчик', "Parse(word='вовчикові', tag=OpencorporaTag('NOUN,anim masc,loct'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчикові', 197, 6),))", "Parse(word='вовчиком', tag=OpencorporaTag('NOUN,masc,inan ablt'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчиком', 316, 6),))", "Parse(word='вовчик', tag=OpencorporaTag('NOUN,masc,inan accs'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчик', 316, 5),))", "Parse(word='вовчик', tag=OpencorporaTag('NOUN,anim masc,nomn'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчик', 197, 0),))", "Parse(word='вовчиком', tag=OpencorporaTag('NOUN,anim masc,ablt'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчиком', 197, 5),))", "Parse(word='вовчикові', tag=OpencorporaTag('NOUN,masc,inan loct'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчикові', 316, 7),))"]
❌ Expected base form 'Володимир' NOT found
   Available forms: ["Parse(word='вовчика', tag=OpencorporaTag('NOUN,masc,inan gent'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчика', 316, 1),))", "Parse(word='вовчик', tag=OpencorporaTag('NOUN,masc,inan nomn'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчик', 316, 0),))", "Parse(word='вовчикові', tag=OpencorporaTag('NOUN,masc,inan datv'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчикові', 316, 3),))", "Parse(word='вовчикові', tag=OpencorporaTag('NOUN,anim masc,datv'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчикові', 197, 2),))", "Parse(word='вовчика', tag=OpencorporaTag('NOUN,anim masc,gent'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчика', 197, 1),))", "Parse(word='вовчика', tag=OpencorporaTag('NOUN,anim masc,accs'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчика', 197, 4),))", 'Вовчик', "Parse(word='вовчикові', tag=OpencorporaTag('NOUN,anim masc,loct'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчикові', 197, 6),))", "Parse(word='вовчиком', tag=OpencorporaTag('NOUN,masc,inan ablt'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчиком', 316, 6),))", "Parse(word='вовчик', tag=OpencorporaTag('NOUN,masc,inan accs'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчик', 316, 5),))", "Parse(word='вовчик', tag=OpencorporaTag('NOUN,anim masc,nomn'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчик', 197, 0),))", "Parse(word='вовчиком', tag=OpencorporaTag('NOUN,anim masc,ablt'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчиком', 197, 5),))", "Parse(word='вовчикові', tag=OpencorporaTag('NOUN,masc,inan loct'), normal_form='вовчик', score=1.0, methods_stack=((DictionaryAnalyzer(), 'вовчикові', 316, 7),))"]

Input: 'Женя'
Expected base: 'Євген'
Forms: ["Parse(word='женя', tag=OpencorporaTag('NOUN,Name,masc,anim nomn'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женя', 786, 0),))", "Parse(word='женю', tag=OpencorporaTag('NOUN,Name,femn,anim accs'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женю', 413, 3),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,femn,anim loct'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 413, 5),))", "Parse(word='женею', tag=OpencorporaTag('NOUN,Name,masc,anim ablt'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женею', 786, 4),))", 'Женя', "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,masc,anim datv'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 786, 2),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,femn,anim datv'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 413, 2),))", "Parse(word='женя', tag=OpencorporaTag('NOUN,Name,femn,anim nomn'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женя', 413, 0),))", "Parse(word='женею', tag=OpencorporaTag('NOUN,Name,femn,anim ablt'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женею', 413, 4),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,masc,anim loct'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 786, 5),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,femn,anim gent'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 413, 1),))", "Parse(word='женю', tag=OpencorporaTag('NOUN,Name,masc,anim accs'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женю', 786, 3),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,masc,anim gent'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 786, 1),))"]
❌ Expected base form 'Євген' NOT found
   Available forms: ["Parse(word='женя', tag=OpencorporaTag('NOUN,Name,masc,anim nomn'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женя', 786, 0),))", "Parse(word='женю', tag=OpencorporaTag('NOUN,Name,femn,anim accs'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женю', 413, 3),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,femn,anim loct'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 413, 5),))", "Parse(word='женею', tag=OpencorporaTag('NOUN,Name,masc,anim ablt'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женею', 786, 4),))", 'Женя', "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,masc,anim datv'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 786, 2),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,femn,anim datv'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 413, 2),))", "Parse(word='женя', tag=OpencorporaTag('NOUN,Name,femn,anim nomn'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женя', 413, 0),))", "Parse(word='женею', tag=OpencorporaTag('NOUN,Name,femn,anim ablt'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женею', 413, 4),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,masc,anim loct'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 786, 5),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,femn,anim gent'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 413, 1),))", "Parse(word='женю', tag=OpencorporaTag('NOUN,Name,masc,anim accs'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'женю', 786, 3),))", "Parse(word='жені', tag=OpencorporaTag('NOUN,Name,masc,anim gent'), normal_form='женя', score=1.0, methods_stack=((DictionaryAnalyzer(), 'жені', 786, 1),))"]

Input: 'Дашенька'
Expected base: 'Дарія'
Forms: ["Parse(word='дашенька', tag=OpencorporaTag('ADJF femn,nomn'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенька', 5, 9), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенької', tag=OpencorporaTag('ADJF femn,gent'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенької', 5, 10), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашеньки', tag=OpencorporaTag('NOUN,inan femn,gent'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашеньки', 55, 1), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенька', tag=OpencorporaTag('NOUN,inan femn,nomn'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашенька', 55, 0), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", 'Дашенька', "Parse(word='дашеньці', tag=OpencorporaTag('NOUN,inan femn,datv'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашеньці', 55, 2), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашеньку', tag=OpencorporaTag('NOUN,inan femn,accs'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашеньку', 55, 3), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенькою', tag=OpencorporaTag('NOUN,inan femn,ablt'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашенькою', 55, 4), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашеньку', tag=OpencorporaTag('ADJF femn,accs'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашеньку', 5, 12), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенькій', tag=OpencorporaTag('ADJF femn,datv'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенькій', 5, 11), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенькою', tag=OpencorporaTag('ADJF femn,ablt'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенькою', 5, 13), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашеньці', tag=OpencorporaTag('NOUN,inan femn,loct'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашеньці', 55, 5), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенькій', tag=OpencorporaTag('ADJF femn,loct'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенькій', 5, 14), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))"]
❌ Expected base form 'Дарія' NOT found
   Available forms: ["Parse(word='дашенька', tag=OpencorporaTag('ADJF femn,nomn'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенька', 5, 9), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенької', tag=OpencorporaTag('ADJF femn,gent'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенької', 5, 10), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашеньки', tag=OpencorporaTag('NOUN,inan femn,gent'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашеньки', 55, 1), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенька', tag=OpencorporaTag('NOUN,inan femn,nomn'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашенька', 55, 0), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", 'Дашенька', "Parse(word='дашеньці', tag=OpencorporaTag('NOUN,inan femn,datv'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашеньці', 55, 2), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашеньку', tag=OpencorporaTag('NOUN,inan femn,accs'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашеньку', 55, 3), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенькою', tag=OpencorporaTag('NOUN,inan femn,ablt'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашенькою', 55, 4), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашеньку', tag=OpencorporaTag('ADJF femn,accs'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашеньку', 5, 12), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенькій', tag=OpencorporaTag('ADJF femn,datv'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенькій', 5, 11), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенькою', tag=OpencorporaTag('ADJF femn,ablt'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенькою', 5, 13), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашеньці', tag=OpencorporaTag('NOUN,inan femn,loct'), normal_form='дашенька', score=1.0, methods_stack=((FakeDictionary(), 'дашеньці', 55, 5), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))", "Parse(word='дашенькій', tag=OpencorporaTag('ADJF femn,loct'), normal_form='дашенький', score=1.0, methods_stack=((FakeDictionary(), 'дашенькій', 5, 14), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'енька')))"]

==================================================
Test completed!
___________ TestMultilingualEmbeddings.test_name_variants_similarity ___________
----------------------------- Captured stdout call -----------------------------
Similarity between 'Ivan Petrov' and 'Іван Петров': 0.912
Similarity between 'Ivan Petrov' and 'Иван Петров': 0.973
Similarity between 'Іван Петров' and 'Иван Петров': 0.929
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(3 texts): 4233.50ms > 100ms
________ TestMultilingualEmbeddings.test_organization_names_similarity _________
----------------------------- Captured stdout call -----------------------------
Similarity between 'PrivatBank' and 'Приватбанк': 0.898
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(2 texts): 3507.09ms > 100ms
_______ TestMultilingualEmbeddings.test_unrelated_strings_low_similarity _______
----------------------------- Captured stdout call -----------------------------
Similarity between 'Ivan Petrov' and 'PrivatBank': 0.255
Similarity between 'Ivan Petrov' and 'random text here': 0.038
Similarity between 'Ivan Petrov' and 'completely different': 0.050
Similarity between 'Ivan Petrov' and 'unrelated content': 0.093
Similarity between 'PrivatBank' and 'random text here': 0.037
Similarity between 'PrivatBank' and 'completely different': 0.006
Similarity between 'PrivatBank' and 'unrelated content': 0.037
Similarity between 'random text here' and 'completely different': 0.103
Similarity between 'random text here' and 'unrelated content': 0.400
Similarity between 'completely different' and 'unrelated content': 0.245
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(5 texts): 3893.93ms > 100ms
______________ TestMultilingualEmbeddings.test_mixed_script_names ______________
----------------------------- Captured stdout call -----------------------------
Similarity between 'Ivan Петров' and 'Іван Petrov': 0.920
Similarity between 'Ivan Петров' and 'Иван Петров': 0.997
Similarity between 'Іван Petrov' and 'Иван Петров': 0.928
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(3 texts): 3354.64ms > 100ms
_______ TestMultilingualEmbeddings.test_common_names_different_languages _______
----------------------------- Captured stdout call -----------------------------
Similarity between 'Alexander' and 'Александр': 0.953
Similarity between 'Alexander' and 'Олександр': 0.907
Similarity between 'Александр' and 'Олександр': 0.980
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(3 texts): 3383.18ms > 100ms
____________ TestMultilingualEmbeddings.test_organization_variants _____________
----------------------------- Captured stdout call -----------------------------
Similarity between 'PrivatBank' and 'Приватбанк': 0.898
Similarity between 'PrivatBank' and 'ПРИВАТБАНК': 0.379
Similarity between 'PrivatBank' and 'privatbank': 0.953
Similarity between 'Приватбанк' and 'ПРИВАТБАНК': 0.423
Similarity between 'Приватбанк' and 'privatbank': 0.955
Similarity between 'ПРИВАТБАНК' and 'privatbank': 0.357
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(4 texts): 3758.60ms > 100ms
_______ TestMultilingualEmbeddings.test_embedding_dimensions_consistency _______
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(7 texts): 2955.90ms > 100ms
_________ TestMultilingualEmbeddings.test_preprocessing_effectiveness __________
----------------------------- Captured stdout call -----------------------------
Similarity between preprocessed texts 0 and 1: 0.912
Similarity between preprocessed texts 0 and 2: 0.973
Similarity between preprocessed texts 1 and 2: 0.929
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(3 texts): 3341.62ms > 100ms
____________________ test_critical_ukrainian_normalization _____________________
----------------------------- Captured stdout call -----------------------------
✅ Critical test passed: Оплата от Петра Порошенка по Договору 123 -> ['Петро', 'Порошенко']
_ TestUnicodeFirstLanguageDetectionOrder.test_orchestrator_call_order_verification _
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object of type 'Mock' has no len()
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 302, in process
    self.metrics_service.record_histogram('signals.persons_count', len(signals_result.persons))
                                                                   ~~~^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object of type 'Mock' has no len()
___________ TestNormalizationPipeline.test_error_resilience_pipeline ___________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestNormalizationPipeline.test_language_detection_consistency _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestNormalizationPipeline.test_variant_generation_integration _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_________________________ test_normalization_directly __________________________
----------------------------- Captured stdout call -----------------------------
🧪 Testing Normalization Service Directly
==================================================
❌ Error testing normalization: module 'ai_service.services' has no attribute 'normalization_service'
----------------------------- Captured stderr call -----------------------------
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/tests/integration/test_simple_normalization.py", line 29, in test_normalization_directly
    with patch('ai_service.services.normalization_service._nltk_stopwords') as mock_stopwords, \
         ~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", line 1481, in __enter__
    self.target = self.getter()
                  ~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py", line 528, in resolve_name
    result = getattr(result, p)
AttributeError: module 'ai_service.services' has no attribute 'normalization_service'
_________________________ test_strict_name_extraction __________________________
----------------------------- Captured stdout call -----------------------------
🔍 Strict Name Extraction Test (No Mocks)
============================================================
⚠️  Skipping test - CleanOrchestratorService not available
_______________________ test_ukrainian_morphology_simple _______________________
----------------------------- Captured stdout call -----------------------------
🔍 Ukrainian Morphology Simple Test
==================================================
Input: 'Сергея'
Forms: ['Сергея', "Parse(word='сергеєм', tag=OpencorporaTag('NOUN,anim masc,ablt'), normal_form='сергей', score=1.0, methods_stack=((DictionaryAnalyzer(), 'геєм', 208, 5), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'сер')))", "Parse(word='сергеєві', tag=OpencorporaTag('NOUN,Surn,masc,anim datv'), normal_form='сергей', score=1.0, methods_stack=((FakeDictionary(), 'сергеєві', 303, 2), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'ергея')))", "Parse(word='сергея', tag=OpencorporaTag('NOUN,anim masc,accs'), normal_form='сергей', score=1.0, methods_stack=((DictionaryAnalyzer(), 'гея', 208, 4), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'сер')))", "Parse(word='сергей', tag=OpencorporaTag('NOUN,anim masc,nomn'), normal_form='сергей', score=1.0, methods_stack=((DictionaryAnalyzer(), 'гей', 208, 0), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'сер')))", "Parse(word='сергеєві', tag=OpencorporaTag('NOUN,anim masc,datv'), normal_form='сергей', score=1.0, methods_stack=((DictionaryAnalyzer(), 'геєві', 208, 2), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'сер')))", "Parse(word='сергея', tag=OpencorporaTag('NOUN,Surn,masc,anim gent'), normal_form='сергей', score=1.0, methods_stack=((FakeDictionary(), 'сергея', 303, 1), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'ергея')))", "Parse(word='сергея', tag=OpencorporaTag('NOUN,Surn,masc,anim accs'), normal_form='сергей', score=1.0, methods_stack=((FakeDictionary(), 'сергея', 303, 4), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'ергея')))", "Parse(word='сергеєві', tag=OpencorporaTag('NOUN,Surn,masc,anim loct'), normal_form='сергей', score=1.0, methods_stack=((FakeDictionary(), 'сергеєві', 303, 6), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'ергея')))", "Parse(word='сергеєм', tag=OpencorporaTag('NOUN,Surn,masc,anim ablt'), normal_form='сергей', score=1.0, methods_stack=((FakeDictionary(), 'сергеєм', 303, 5), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'ергея')))", "Parse(word='сергея', tag=OpencorporaTag('NOUN,anim masc,gent'), normal_form='сергей', score=1.0, methods_stack=((DictionaryAnalyzer(), 'гея', 208, 1), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'сер')))", "Parse(word='сергей', tag=OpencorporaTag('NOUN,Surn,masc,anim nomn'), normal_form='сергей', score=1.0, methods_stack=((FakeDictionary(), 'сергей', 303, 0), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'ергея')))", "Parse(word='сергеєві', tag=OpencorporaTag('NOUN,anim masc,loct'), normal_form='сергей', score=1.0, methods_stack=((DictionaryAnalyzer(), 'геєві', 208, 6), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'сер')))"]
Types: ['str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str']
All strings: ✅
Has nominative form: ❌
------------------------------
Input: 'Владимировича'
Forms: ["Parse(word='владимировичої', tag=OpencorporaTag('ADJF femn,gent'), normal_form='владимировичий', score=1.0, methods_stack=((FakeDictionary(), 'владимировичої', 5, 10), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировичу', tag=OpencorporaTag('ADJF femn,accs'), normal_form='владимировичий', score=1.0, methods_stack=((FakeDictionary(), 'владимировичу', 5, 12), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировичеві', tag=OpencorporaTag('NOUN,Patr,masc,anim datv'), normal_form='владимирович', score=1.0, methods_stack=((FakeDictionary(), 'владимировичеві', 28, 2), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировичеві', tag=OpencorporaTag('NOUN,Patr,masc,anim loct'), normal_form='владимирович', score=1.0, methods_stack=((FakeDictionary(), 'владимировичеві', 28, 6), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировичем', tag=OpencorporaTag('NOUN,Patr,masc,anim ablt'), normal_form='владимирович', score=1.0, methods_stack=((FakeDictionary(), 'владимировичем', 28, 5), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировича', tag=OpencorporaTag('NOUN,Patr,masc,anim gent'), normal_form='владимирович', score=1.0, methods_stack=((FakeDictionary(), 'владимировича', 28, 1), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировичеві', tag=OpencorporaTag('NOUN,Surn,masc,anim datv'), normal_form='владимирович', score=1.0, methods_stack=((DictionaryAnalyzer(), 'мировичеві', 90, 2), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'влади')))", "Parse(word='владимировичій', tag=OpencorporaTag('ADJF femn,loct'), normal_form='владимировичий', score=1.0, methods_stack=((FakeDictionary(), 'владимировичій', 5, 14), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировича', tag=OpencorporaTag('NOUN,Patr,masc,anim accs'), normal_form='владимирович', score=1.0, methods_stack=((FakeDictionary(), 'владимировича', 28, 4), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировичою', tag=OpencorporaTag('ADJF femn,ablt'), normal_form='владимировичий', score=1.0, methods_stack=((FakeDictionary(), 'владимировичою', 5, 13), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировича', tag=OpencorporaTag('ADJF femn,nomn'), normal_form='владимировичий', score=1.0, methods_stack=((FakeDictionary(), 'владимировича', 5, 9), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимирович', tag=OpencorporaTag('NOUN,Surn,masc,anim nomn'), normal_form='владимирович', score=1.0, methods_stack=((DictionaryAnalyzer(), 'мирович', 90, 0), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'влади')))", 'Владимировича', "Parse(word='владимировичем', tag=OpencorporaTag('NOUN,Surn,masc,anim ablt'), normal_form='владимирович', score=1.0, methods_stack=((DictionaryAnalyzer(), 'мировичем', 90, 5), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'влади')))", "Parse(word='владимирович', tag=OpencorporaTag('NOUN,Patr,masc,anim nomn'), normal_form='владимирович', score=1.0, methods_stack=((FakeDictionary(), 'владимирович', 28, 0), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировичій', tag=OpencorporaTag('ADJF femn,datv'), normal_form='владимировичий', score=1.0, methods_stack=((FakeDictionary(), 'владимировичій', 5, 11), (KnownSuffixAnalyzer(min_word_length=4, score_multiplier=0.5), 'овича')))", "Parse(word='владимировичеві', tag=OpencorporaTag('NOUN,Surn,masc,anim loct'), normal_form='владимирович', score=1.0, methods_stack=((DictionaryAnalyzer(), 'мировичеві', 90, 6), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'влади')))", "Parse(word='владимировича', tag=OpencorporaTag('NOUN,Surn,masc,anim gent'), normal_form='владимирович', score=1.0, methods_stack=((DictionaryAnalyzer(), 'мировича', 90, 1), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'влади')))", "Parse(word='владимировича', tag=OpencorporaTag('NOUN,Surn,masc,anim accs'), normal_form='владимирович', score=1.0, methods_stack=((DictionaryAnalyzer(), 'мировича', 90, 4), (UnknownPrefixAnalyzer(score_multiplier=0.5), 'влади')))"]
Types: ['str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str']
All strings: ✅
Has nominative form: ❌
------------------------------
Input: 'Петрова'
Forms: ["Parse(word='петрові', tag=OpencorporaTag('NOUN,masc,inan loct'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрові', 286, 5),))", "Parse(word='петріва', tag=OpencorporaTag('NOUN,Surn,masc,anim gent'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петріва', 285, 1),))", "Parse(word='петров', tag=OpencorporaTag('NOUN,Surn,anim masc,nomn'), normal_form='петров', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петров', 26, 0),))", "Parse(word='петрової', tag=OpencorporaTag('ADJF femn,gent'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрової', 24, 10),))", "Parse(word='петрова', tag=OpencorporaTag('NOUN,masc,inan gent'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрова', 286, 1),))", "Parse(word='петрів', tag=OpencorporaTag('NOUN,masc,inan nomn'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрів', 286, 0),))", "Parse(word='петровом', tag=OpencorporaTag('NOUN,masc,inan ablt'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петровом', 286, 4),))", "Parse(word='петрової', tag=OpencorporaTag('NOUN,Surn,femn,anim gent'), normal_form='петрова', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрової', 27, 1),))", "Parse(word='петровій', tag=OpencorporaTag('NOUN,Surn,femn,anim loct'), normal_form='петрова', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петровій', 27, 5),))", "Parse(word='петрову', tag=OpencorporaTag('NOUN,Surn,masc,anim datv'), normal_form='петров', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрову', 26, 2),))", "Parse(word='петрів', tag=OpencorporaTag('NOUN,masc,inan accs'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрів', 286, 3),))", "Parse(word='петрову', tag=OpencorporaTag('NOUN,Surn,femn,anim accs'), normal_form='петрова', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрову', 27, 3),))", "Parse(word='петрова', tag=OpencorporaTag('NOUN,Surn,masc,anim gent'), normal_form='петров', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрова', 26, 1),))", "Parse(word='петровим', tag=OpencorporaTag('NOUN,Surn,masc,anim ablt'), normal_form='петров', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петровим', 26, 4),))", "Parse(word='петрова', tag=OpencorporaTag('NOUN,Surn,masc,anim accs'), normal_form='петров', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрова', 26, 3),))", 'Петрова', "Parse(word='петрову', tag=OpencorporaTag('NOUN,masc,inan datv'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрову', 286, 2),))", "Parse(word='петровою', tag=OpencorporaTag('ADJF femn,ablt'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петровою', 24, 13),))", "Parse(word='петровою', tag=OpencorporaTag('NOUN,Surn,femn,anim ablt'), normal_form='петрова', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петровою', 27, 4),))", "Parse(word='петровій', tag=OpencorporaTag('ADJF femn,loct'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петровій', 24, 14),))", "Parse(word='петрові', tag=OpencorporaTag('NOUN,Surn,masc,anim loct'), normal_form='петров', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрові', 26, 5),))", "Parse(word='петровій', tag=OpencorporaTag('NOUN,Surn,femn,anim datv'), normal_form='петрова', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петровій', 27, 2),))", "Parse(word='петровій', tag=OpencorporaTag('ADJF femn,datv'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петровій', 24, 11),))", "Parse(word='петріва', tag=OpencorporaTag('NOUN,Surn,masc,anim accs'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петріва', 285, 5),))", "Parse(word='петрівим', tag=OpencorporaTag('NOUN,Surn,masc,anim ablt'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрівим', 285, 7),))", "Parse(word='петрова', tag=OpencorporaTag('ADJF femn,nomn'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрова', 24, 9),))", "Parse(word='петрова', tag=OpencorporaTag('NOUN,Surn,femn,anim nomn'), normal_form='петрова', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрова', 27, 0),))", "Parse(word='петрів', tag=OpencorporaTag('NOUN,Surn,masc,anim nomn'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрів', 285, 0),))", "Parse(word='петріву', tag=OpencorporaTag('NOUN,Surn,masc,anim datv'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петріву', 285, 3),))", "Parse(word='петріві', tag=OpencorporaTag('NOUN,Surn,masc,anim loct'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петріві', 285, 9),))", "Parse(word='петрову', tag=OpencorporaTag('ADJF femn,accs'), normal_form='петрів', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрову', 24, 12),))"]
Types: ['str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str']
All strings: ✅
Has nominative form: ❌
------------------------------
Input: 'Петра'
Forms: ["Parse(word='петрою', tag=OpencorporaTag('NOUN,Name,femn,anim ablt'), normal_form='петра', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрою', 264, 4),))", "Parse(word='петрі', tag=OpencorporaTag('NOUN,Name,femn,anim loct'), normal_form='петра', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрі', 264, 5),))", "Parse(word='петра', tag=OpencorporaTag('NOUN,Name,masc,anim accs'), normal_form='петро', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петра', 2461, 4),))", "Parse(word='петрі', tag=OpencorporaTag('NOUN,Name,femn,anim datv'), normal_form='петра', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрі', 264, 2),))", "Parse(word='петра', tag=OpencorporaTag('NOUN,Name,masc,anim gent'), normal_form='петро', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петра', 2461, 1),))", "Parse(word='петру', tag=OpencorporaTag('NOUN,Name,femn,anim accs'), normal_form='петра', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петру', 264, 3),))", "Parse(word='петром', tag=OpencorporaTag('NOUN,Name,masc,anim ablt'), normal_form='петро', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петром', 2461, 5),))", 'Петра', "Parse(word='петрі', tag=OpencorporaTag('NOUN,Name,masc,anim loct'), normal_form='петро', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрі', 2461, 6),))", "Parse(word='петро', tag=OpencorporaTag('NOUN,Name,anim masc,nomn'), normal_form='петро', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петро', 2461, 0),))", "Parse(word='петра', tag=OpencorporaTag('NOUN,Name,anim femn,nomn'), normal_form='петра', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петра', 264, 0),))", "Parse(word='петрові', tag=OpencorporaTag('NOUN,Name,masc,anim datv'), normal_form='петро', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петрові', 2461, 2),))", "Parse(word='петри', tag=OpencorporaTag('NOUN,Name,femn,anim gent'), normal_form='петра', score=1.0, methods_stack=((DictionaryAnalyzer(), 'петри', 264, 1),))"]
Types: ['str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str', 'str']
All strings: ✅
Has nominative form: ❌
------------------------------
Test completed!
______________ TestEmbeddingsPerformance.test_warmup_performance _______________
----------------------------- Captured stdout call -----------------------------
⏱️  warmup_encode_batch: 3280.54ms
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(10 texts): 3280.21ms > 100ms
_____________ TestEmbeddingsPerformance.test_batch_performance_p95 _____________
----------------------------- Captured stdout call -----------------------------

📊 Performance Results:
   Average latency: 43.25ms
   P95 latency: 55.16ms
   Max latency: 55.16ms
   Total batches: 19
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(10 texts): 3106.53ms > 100ms
__________ TestEmbeddingsPerformance.test_repeated_batch_performance ___________
----------------------------- Captured stdout call -----------------------------

🔄 Repeated Batch Performance:
   First run: 3285.94ms
   Second run: 31.12ms
   Speedup: 105.60x
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(20 texts): 3284.13ms > 100ms
__________ TestEmbeddingsPerformance.test_single_vs_batch_performance __________
----------------------------- Captured stdout call -----------------------------

⚡ Single vs Batch Performance:
   Single encodes: 3748.99ms
   Batch encode: 16.54ms
   Batch efficiency: 226.60x
____________ TestEmbeddingsPerformance.test_large_batch_performance ____________
----------------------------- Captured stdout call -----------------------------
⏱️  large_batch_encode: 4061.62ms
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(200 texts): 4061.27ms > 100ms
_______ TestEmbeddingsPerformance.test_empty_and_single_text_performance _______
----------------------------- Captured stdout call -----------------------------

🔍 Edge Case Performance:
   Empty batch: 0.00ms
   Single text: 16.70ms
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(1 texts): 3020.60ms > 100ms
________ TestLanguageDetectionPerformance.test_single_pass_performance _________
----------------------------- Captured stdout call -----------------------------

Testing performance with 10000 texts...
Performance metrics:
  Total texts processed: 10000
  Total processing time: 0.328s
  Average time per text: 0.033ms
  Texts per second: 30495
  WARNING: Processing took 0.328s (target: <0.1s)
_________ TestLanguageDetectionPerformance.test_edge_case_performance __________
----------------------------- Captured stdout call -----------------------------

Edge case performance:
  Processed 10 edge cases in 0.0001s
  Average time per edge case: 0.009ms
_________ TestOrchestratorFactory.test_service_initialization_mocking __________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'ai_service.layers.variants.ukrainian_morphology'
WARNING  ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
WARNING  ai_service.core.orchestrator_factory:orchestrator_factory.py:150 Failed to initialize variants service: 'VariantGenerationService' object has no attribute 'initialize'
WARNING  ai_service.core.orchestrator_factory:orchestrator_factory.py:161 Failed to initialize embeddings service: EmbeddingService.__init__() missing 1 required positional argument: 'config'
______ TestOrchestratorFactory.test_service_initialization_error_handling ______
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.orchestrator_factory:orchestrator_factory.py:93 Failed to initialize validation service: Service init failed
ERROR    ai_service.core.orchestrator_factory:orchestrator_factory.py:204 Failed to create orchestrator: Validation service: Service init failed
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/orchestrator_factory.py", line 90, in create_orchestrator
    validation_service = ValidationService()
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
Exception: Service init failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/orchestrator_factory.py", line 94, in create_orchestrator
    raise ServiceInitializationError(f"Validation service: {e}")
ai_service.exceptions.ServiceInitializationError: Validation service: Service init failed
_________ TestOrchestratorFactoryIntegration.test_factory_performance __________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.core.orchestrator_factory:orchestrator_factory.py:139 Failed to initialize smart filter adapter: object Mock can't be used in 'await' expression
WARNING  ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'ai_service.layers.variants.ukrainian_morphology'
WARNING  ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
WARNING  ai_service.core.orchestrator_factory:orchestrator_factory.py:150 Failed to initialize variants service: 'VariantGenerationService' object has no attribute 'initialize'
WARNING  ai_service.core.orchestrator_factory:orchestrator_factory.py:161 Failed to initialize embeddings service: EmbeddingService.__init__() missing 1 required positional argument: 'config'
__________ TestEmbeddingServiceErrorHandling.test_model_encode_error ___________
------------------------------ Captured log call -------------------------------
ERROR    ai_service.layers.embeddings.embedding_service:embedding_service.py:276 Failed to encode texts: Model encode error
_________ TestEmbeddingServiceErrorHandling.test_memory_error_handling _________
------------------------------ Captured log call -------------------------------
ERROR    ai_service.layers.embeddings.embedding_service:embedding_service.py:276 Failed to encode texts: Out of memory
____________ TestOptimizedEmbeddingService.test_faiss_acceleration _____________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:optimized_embedding_service.py:391 FAISS search failed, falling back to numpy: FAISS not available
______________ TestOptimizedEmbeddingService.test_error_handling _______________
------------------------------ Captured log call -------------------------------
WARNING  sentence_transformers.SentenceTransformer:SentenceTransformer.py:2046 No sentence-transformers model found with name sentence-transformers/invalid_model_name. Creating a new one with mean pooling.
ERROR    ai_service.layers.embeddings.embedding_service:optimized_embedding_service.py:210 Failed to load optimized model invalid_model_name: sentence-transformers/invalid_model_name is not a local folder and is not a valid model identifier listed on 'https://huggingface.co/models'
If this is a private repository, make sure to pass a token having permission to this repo either by logging in with `hf auth login` or by passing `token=<your_token>`
ERROR    ai_service.layers.embeddings.embedding_service:optimized_embedding_service.py:342 Failed to generate optimized embeddings: 'types.SimpleNamespace' object has no attribute 'device'
_____________________ TestMetricsService.test_alert_system _____________________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:338 Alert triggered: test.alert_metric_gt_10.0 - Alert: value 15.0 is greater than threshold 10.0
____________________ TestMetricsService.test_alert_cooldown ____________________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:338 Alert triggered: test.cooldown_metric_gt_5.0 - Value 10.0 exceeds threshold 5.0
________________ TestMetricsService.test_memory_usage_tracking _________________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.0
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.1
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.2
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.3
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.4
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.5
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.6
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.7
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.8
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.9
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.10
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.11
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.12
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.13
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.14
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.15
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.16
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.17
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.18
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.19
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.20
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.21
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.22
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.23
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.24
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.25
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.26
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.27
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.28
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.29
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.30
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.31
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.32
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.33
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.34
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.35
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.36
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.37
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.38
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.39
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.40
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.41
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.42
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.43
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.44
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.45
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.46
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.47
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.48
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.49
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.50
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.51
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.52
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.53
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.54
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.55
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.56
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.57
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.58
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.59
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.60
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.61
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.62
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.63
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.64
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.65
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.66
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.67
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.68
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.69
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.70
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.71
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.72
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.73
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.74
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.75
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.76
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.77
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.78
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.79
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.80
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.81
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.82
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.83
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.84
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.85
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.86
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.87
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.88
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.89
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.90
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.91
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.92
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.93
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.94
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.95
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.96
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.97
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.98
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.99
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.100
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.101
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.102
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.103
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.104
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.105
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.106
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.107
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.108
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.109
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.110
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.111
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.112
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.113
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.114
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.115
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.116
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.117
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.118
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.119
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.120
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.121
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.122
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.123
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.124
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.125
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.126
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.127
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.128
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.129
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.130
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.131
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.132
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.133
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.134
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.135
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.136
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.137
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.138
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.139
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.140
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.141
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.142
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.143
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.144
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.145
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.146
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.147
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.148
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.149
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.150
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.151
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.152
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.153
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.154
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.155
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.156
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.157
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.158
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.159
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.160
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.161
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.162
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.163
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.164
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.165
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.166
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.167
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.168
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.169
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.170
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.171
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.172
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.173
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.174
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.175
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.176
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.177
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.178
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.179
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.180
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.181
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.182
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.183
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.184
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.185
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.186
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.187
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.188
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.189
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.190
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.191
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.192
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.193
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.194
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.195
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.196
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.197
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.198
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: memory.test.199
____________________ TestMetricsService.test_error_handling ____________________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: 
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: None
WARNING  ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: test.record_histogram
___________ TestOrchestratorMetrics.test_exception_handling_metrics ____________
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
______________ TestOrchestratorMetrics.test_active_requests_gauge ______________
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
___________ TestOrchestratorMetrics.test_histogram_metrics_accuracy ____________
------------------------------ Captured log call -------------------------------
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
ERROR    ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
___________ TestRussianMorphology.test_get_all_forms_with_exception ____________
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.layers.normalization.morphology.russian_morphology:russian_morphology.py:457 Error getting word forms for 'Тест': Parser error
__________ TestRussianMorphology.test_batch_process_names_with_errors __________
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.layers.normalization.morphology.russian_morphology:russian_morphology.py:875 Error processing name 'Мария': Processing error
___ TestUkrainianMorphologyAnalyzer.test_pymorphy_analysis_failure_handling ____
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.layers.normalization.morphology.ukrainian_morphology:ukrainian_morphology.py:145 Error analyzing word 'Тест': Pymorphy analysis failed
_____________ TestDecisionLogic.test_update_thresholds_invalid_key _____________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.smart_filter.decision_logic:decision_logic.py:656 Unknown threshold key: invalid_key
______________ TestSmartFilterService.test_service_words_cleaning ______________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.smart_filter.smart_filter_service:smart_filter_service.py:479 _clean_service_words is deprecated - use context-aware analysis instead
_____________ TestDecisionLogic.test_update_thresholds_invalid_key _____________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.smart_filter.decision_logic:decision_logic.py:656 Unknown threshold key: invalid_key
________________ TestEmbeddingService.test_single_text_encoding ________________
----------------------------- Captured stderr call -----------------------------
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
Retrying in 1s [Retry 1/5].
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
Retrying in 2s [Retry 2/5].
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
Retrying in 4s [Retry 3/5].
------------------------------ Captured log call -------------------------------
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 1s [Retry 1/5].
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 2s [Retry 2/5].
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 4s [Retry 3/5].
____________ TestEmbeddingContract.test_encode_batch_returns_2x384 _____________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(2 texts): 3213.63ms > 100ms
__________ TestEmbeddingContract.test_encode_batch_mixed_valid_empty ___________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(4 texts): 4778.29ms > 100ms
_______ TestEmbeddingModelSwitch.test_model_switch_with_batch_processing _______
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(4 texts): 2650.05ms > 100ms
___________ TestEmbeddingPreprocessor.test_include_attrs_future_flag ___________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.services.embedding_preprocessor:embedding_preprocessor.py:77 include_attrs=True not yet implemented, using default behavior
_____ TestEmbeddingsCanaryNames.test_multilingual_name_triangle_similarity _____
----------------------------- Captured stdout call -----------------------------
Similarity 'Oleksandr' ~ 'Олександр': 0.632
Similarity 'Oleksandr' ~ 'Александр': 0.620
Similarity 'Олександр' ~ 'Александр': 0.980
Min similarity: 0.620
Avg similarity: 0.744
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(3 texts): 4957.65ms > 100ms
_________ TestEmbeddingsCanaryNames.test_name_vs_noise_low_similarity __________
----------------------------- Captured stdout call -----------------------------
Similarity 'Ivan Petrov' ~ 'invoice 12345': 0.002
Similarity 'Ivan Petrov' ~ 'document 67890': 0.259
Similarity 'Ivan Petrov' ~ 'report 2023': 0.259
Similarity 'Ivan Petrov' ~ 'file 98765': 0.110
Similarity 'Ivan Petrov' ~ 'data 54321': 0.105
Similarity 'Ivan Petrov' ~ 'system 11111': -0.019
Similarity 'Ivan Petrov' ~ 'error 404': 0.039
Similarity 'Ivan Petrov' ~ 'status 200': 0.114
Similarity 'Anna Smith' ~ 'invoice 12345': 0.114
Similarity 'Anna Smith' ~ 'document 67890': 0.244
Similarity 'Anna Smith' ~ 'report 2023': 0.261
Similarity 'Anna Smith' ~ 'file 98765': 0.166
Similarity 'Anna Smith' ~ 'data 54321': 0.161
Similarity 'Anna Smith' ~ 'system 11111': 0.144
Similarity 'Anna Smith' ~ 'error 404': 0.148
Similarity 'Anna Smith' ~ 'status 200': 0.247
Similarity 'Олександр Коваленко' ~ 'invoice 12345': 0.143
Similarity 'Олександр Коваленко' ~ 'document 67890': 0.276
Similarity 'Олександр Коваленко' ~ 'report 2023': 0.280
Similarity 'Олександр Коваленко' ~ 'file 98765': 0.177
Similarity 'Олександр Коваленко' ~ 'data 54321': 0.149
Similarity 'Олександр Коваленко' ~ 'system 11111': 0.099
Similarity 'Олександр Коваленко' ~ 'error 404': 0.086
Similarity 'Олександр Коваленко' ~ 'status 200': 0.185
Similarity 'Владимир Путин' ~ 'invoice 12345': 0.026
Similarity 'Владимир Путин' ~ 'document 67890': 0.080
Similarity 'Владимир Путин' ~ 'report 2023': 0.121
Similarity 'Владимир Путин' ~ 'file 98765': -0.003
Similarity 'Владимир Путин' ~ 'data 54321': 0.010
Similarity 'Владимир Путин' ~ 'system 11111': -0.018
Similarity 'Владимир Путин' ~ 'error 404': -0.008
Similarity 'Владимир Путин' ~ 'status 200': 0.056
Max name-noise similarity: 0.280
Avg name-noise similarity: 0.125
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(4 texts): 3557.86ms > 100ms
__ TestEmbeddingsCanaryNames.test_organization_vs_personal_names_distinction ___
----------------------------- Captured stdout call -----------------------------
Similarity 'Ivan Petrov' ~ 'Apple Inc': 0.084
Similarity 'Ivan Petrov' ~ 'Microsoft Corporation': 0.043
Similarity 'Ivan Petrov' ~ 'Приватбанк': 0.226
Similarity 'Ivan Petrov' ~ 'ООО Рога и Копыта': 0.522
Similarity 'Anna Smith' ~ 'Apple Inc': 0.236
Similarity 'Anna Smith' ~ 'Microsoft Corporation': 0.252
Similarity 'Anna Smith' ~ 'Приватбанк': 0.205
Similarity 'Anna Smith' ~ 'ООО Рога и Копыта': 0.349
Similarity 'Олександр Коваленко' ~ 'Apple Inc': 0.029
Similarity 'Олександр Коваленко' ~ 'Microsoft Corporation': 0.090
Similarity 'Олександр Коваленко' ~ 'Приватбанк': 0.193
Similarity 'Олександр Коваленко' ~ 'ООО Рога и Копыта': 0.777
Avg personal-org similarity: 0.251
----------------------------- Captured stderr call -----------------------------
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
Retrying in 1s [Retry 1/5].
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
Retrying in 2s [Retry 2/5].
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
Retrying in 4s [Retry 3/5].
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
Retrying in 8s [Retry 4/5].
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
Retrying in 8s [Retry 5/5].
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
Retrying in 1s [Retry 1/5].
HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
Retrying in 2s [Retry 2/5].
------------------------------ Captured log call -------------------------------
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 1s [Retry 1/5].
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 2s [Retry 2/5].
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 4s [Retry 3/5].
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 8s [Retry 4/5].
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 8s [Retry 5/5].
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/api/resolve-cache/models/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/86741b4e3f5cb7765a600d3a3d55a0f6a6cb443d/README.md
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 1s [Retry 1/5].
WARNING  huggingface_hub.utils._http:_http.py:315 HTTP Error 429 thrown while requesting HEAD https://huggingface.co/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/./modules.json
WARNING  huggingface_hub.utils._http:_http.py:332 Retrying in 2s [Retry 2/5].
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(3 texts): 29679.51ms > 100ms
_________ TestEmbeddingsCanaryNames.test_empty_and_whitespace_handling _________
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(4 texts): 3589.81ms > 100ms
________ TestEmbeddingsCanaryNames.test_preprocessing_removes_dates_ids ________
----------------------------- Captured stdout call -----------------------------
Preprocessing similarity 0: 1.000
Preprocessing similarity 1: 1.000
Preprocessing similarity 2: 1.000
------------------------------ Captured log call -------------------------------
WARNING  ai_service.layers.embeddings.embedding_service:embedding_service.py:184 Slow encode_batch(3 texts): 3144.03ms > 100ms
___ TestLanguageDetectionCanaryRandomNoise.test_random_noise_low_confidence ____
----------------------------- Captured stdout call -----------------------------

Random noise analysis:
  Total strings: 100
  Unknown language: 0 (0.0%)
  Mixed language: 45 (45.0%)
  Low confidence (≤0.8): 91 (91.0%)
  High confidence (>0.8): 9 (9.0%)
  Perfect confidence (1.0): 0

High confidence examples (may indicate overfitting):
  1. 'Вр8ФкЮ8ґCZ_5ъ fw{"yД<Tь1&D5ЛБ1...' -> ru (0.900)
  2. 'Lo Эё)6yDJ!185Ха { 8;-уX!FМ;э^...' -> ru (0.811)
  3. 'РЄ$\|35ч20CМ1:2ґ<r{' Й" ы? <Рє...' -> uk (0.967)
  4. 'Ь4НЦ & Pzо"ъ9 Ип3Іъ[j9с ZгЛ3bё...' -> ru (0.955)
  5. '9P9UЫОюнЦjnX7$8З ylIw43 ЕЕ37wY...' -> uk (0.894)
_____ TestUnifiedOrchestrator.test_process_with_language_detection_failure _____
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object Mock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object Mock can't be used in 'await' expression
_______ TestUnifiedOrchestrator.test_process_with_normalization_failure ________
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object Mock can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object Mock can't be used in 'await' expression
_____ TestUnifiedOrchestrator.test_process_with_language_detection_failure _____
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.core.unified_orchestrator:unified_orchestrator.py:401 Decision engine failed: max() iterable argument is empty
_______ TestUnifiedOrchestrator.test_process_with_normalization_failure ________
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: Normalization failed
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 270, in process
    norm_result = await self.normalization_service.normalize_async(
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py", line 2321, in _execute_mock_call
    raise effect
Exception: Normalization failed
________ TestOrchestratorService.test_process_language_service_failure _________
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 237, in process
    unicode_result = await self.unicode_service.normalize_unicode(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        context.sanitized_text
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
TypeError: object str can't be used in 'await' expression
____________ TestRunServiceScript.test_check_python_version_invalid ____________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:29 Python 3.12 or higher required
ERROR    run_service:run_service.py:30 Current version: 3.13.7 (main, Aug 14 2025, 11:12:11) [Clang 17.0.0 (clang-1700.0.13.3)]
_____________ TestRunServiceScript.test_check_poetry_not_available _____________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:47 Poetry not found
_____________ TestRunServiceScript.test_check_dependencies_failure _____________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:60 Error installing dependencies: Dependency installation failed
____________ TestRunServiceScript.test_check_dependencies_exception ____________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:63 Error: Unexpected error
____________ TestRunServiceScript.test_run_service_no_service_file _____________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:118 Service file not found: <Mock id='23967188704'>
_______________ TestRunServiceScript.test_run_service_exception ________________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:135 Error starting service: Unexpected error
______________ TestRunServiceScript.test_main_python_check_fails _______________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:162 Some checks failed
______________ TestRunServiceScript.test_main_poetry_check_fails _______________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:162 Some checks failed
___________ TestRunServiceScript.test_main_dependencies_check_fails ____________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:162 Some checks failed
______________ TestRunServiceScript.test_main_models_check_fails _______________
------------------------------ Captured log call -------------------------------
ERROR    run_service:run_service.py:162 Some checks failed
________ TestTemplateBuilder.test_build_templates_batch_error_handling _________
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.layers.variants.template_builder:template_builder.py:244 Failed to create template for entity 0: Error
___________ TestTemplateBuilder.test_template_builder_error_handling ___________
------------------------------ Captured log call -------------------------------
ERROR    src.ai_service.layers.variants.template_builder:template_builder.py:180 Failed to create template for entity : Pattern generation failed
___ TestUkrainianMorphologyAnalyzer.test_pymorphy_analysis_failure_handling ____
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.layers.normalization.morphology.ukrainian_morphology:ukrainian_morphology.py:145 Error analyzing word 'Тест': Pymorphy analysis failed
__________ TestUnicodeService.test_aggressive_normalization_sao_paulo __________
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.layers.unicode.unicode_service:unicode_service.py:448 unidecode not available, skipping ASCII folding
_________________ TestUnicodeService.test_cyrillic_processing __________________
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.layers.unicode.unicode_service:unicode_service.py:448 unidecode not available, skipping ASCII folding
_____ TestVariantGenerationService.test_transliteration_variants_grigoriy ______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_compound_surname_processing _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
____ TestVariantGenerationService.test_basic_transliteration_functionality _____
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____ TestVariantGenerationService.test_multiple_transliteration_standards _____
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_phonetic_variants_generation ________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_______ TestVariantGenerationService.test_visual_similarities_generation _______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
__________ TestVariantGenerationService.test_typo_variants_generation __________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____ TestVariantGenerationService.test_comprehensive_variants_generation ______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
____________ TestVariantGenerationService.test_empty_text_handling _____________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____________ TestVariantGenerationService.test_none_text_handling _____________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____________ TestVariantGenerationService.test_max_variants_limit _____________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_language_specific_processing ________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
______ TestVariantGenerationService.test_find_best_matches_functionality _______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
___________ TestVariantGenerationService.test_similarity_calculation ___________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
__________ TestVariantGenerationService.test_keyboard_layout_variants __________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____ TestVariantGenerationService.test_morphological_variants_integration _____
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_______ TestVariantGenerationService.test_morphological_variants_mocked ________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
___________ TestVariantGenerationService.test_processing_statistics ____________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____________ TestVariantGenerationService.test_duplicate_removal ______________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
____ TestVariantGenerationService.test_case_preservation_and_normalization _____
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_special_characters_handling _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_performance_with_long_names _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____ TestVariantGenerationService.test_error_handling_in_transliteration ______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_variant_scores_match_config _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_ test_russian_full_normalization[\u041e\u043f\u043b\u0430\u0442\u0430 \u0434\u043b\u044f \u0412\u043e\u043b\u043e\u0434\u0438 \u0412\u044b\u0441\u043e\u0446\u043a\u043e\u0433\u043e-\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u0412\u044b\u0441\u043e\u0446\u043a\u0438\u0439] _
----------------------------- Captured stdout call -----------------------------

DEBUG - Input: 'Оплата для Володи Высоцкого'
DEBUG - Expected: 'Владимир Высоцкий'
DEBUG - Actual: 'Владимир Высоцкий'
DEBUG - Fresh service result: 'Владимир Высоцкий'
DEBUG - Fresh _morph_nominal('Высоцкого', 'ru') = 'Высоцкий'
DEBUG - Fresh ru_morph available: True
DEBUG - Fresh ru_morph type: <class 'pymorphy3.analyzer.MorphAnalyzer'>
__________ TestUnicodeService.test_aggressive_normalization_sao_paulo __________
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.layers.unicode.unicode_service:unicode_service.py:448 unidecode not available, skipping ASCII folding
_________________ TestUnicodeService.test_cyrillic_processing __________________
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.layers.unicode.unicode_service:unicode_service.py:448 unidecode not available, skipping ASCII folding
________ TestUnicodeService.test_unicode_normalization_failure_handling ________
------------------------------ Captured log call -------------------------------
WARNING  src.ai_service.layers.unicode.unicode_service:unicode_service.py:372 Unicode normalization failed: Unicode normalization failed
_____ TestVariantGenerationService.test_transliteration_variants_grigoriy ______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_compound_surname_processing _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
____ TestVariantGenerationService.test_basic_transliteration_functionality _____
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____ TestVariantGenerationService.test_multiple_transliteration_standards _____
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_phonetic_variants_generation ________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_______ TestVariantGenerationService.test_visual_similarities_generation _______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
__________ TestVariantGenerationService.test_typo_variants_generation __________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____ TestVariantGenerationService.test_comprehensive_variants_generation ______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
____________ TestVariantGenerationService.test_empty_text_handling _____________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____________ TestVariantGenerationService.test_none_text_handling _____________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____________ TestVariantGenerationService.test_max_variants_limit _____________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_language_specific_processing ________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
______ TestVariantGenerationService.test_find_best_matches_functionality _______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
___________ TestVariantGenerationService.test_similarity_calculation ___________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
__________ TestVariantGenerationService.test_keyboard_layout_variants __________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____ TestVariantGenerationService.test_morphological_variants_integration _____
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_______ TestVariantGenerationService.test_morphological_variants_mocked ________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
___________ TestVariantGenerationService.test_processing_statistics ____________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____________ TestVariantGenerationService.test_duplicate_removal ______________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
____ TestVariantGenerationService.test_case_preservation_and_normalization _____
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_special_characters_handling _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_performance_with_long_names _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
_____ TestVariantGenerationService.test_error_handling_in_transliteration ______
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________ TestVariantGenerationService.test_variant_scores_match_config _________
------------------------------ Captured log setup ------------------------------
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
WARNING  src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:403 transliterate not installed. Install with: pip install transliterate
________________ TestValidationService.test_initialize_failure _________________
------------------------------ Captured log call -------------------------------
ERROR    ai_service.layers.validation.validation_service:validation_service.py:37 Failed to initialize ValidationService: Init failed
_____ TestValidationService.test_validate_and_sanitize_exception_handling ______
------------------------------ Captured log call -------------------------------
ERROR    ai_service.layers.validation.validation_service:validation_service.py:72 Validation failed for text: test text... Error: Validation error
__________ TestValidationService.test_validate_and_sanitize_long_text __________
------------------------------ Captured log call -------------------------------
ERROR    ai_service.layers.validation.validation_service:validation_service.py:72 Validation failed for text: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa... Error: Text too long
_________ TestValidationService.test_validate_and_sanitize_none_input __________
------------------------------ Captured log call -------------------------------
ERROR    ai_service.layers.validation.validation_service:validation_service.py:72 Validation failed for text: None... Error: None input
============================= slowest 25 durations =============================
29.71s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_organization_vs_personal_names_distinction
12.96s call     tests/unit/test_embedding_config.py::TestEmbeddingService::test_single_text_encoding
6.93s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServicePerformance::test_model_cache_efficiency
5.93s setup    tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_basic_functionality
5.67s call     tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_model_switch_preserves_functionality
5.13s call     tests/unit/test_embedding_config.py::TestEmbeddingService::test_multiple_texts_encoding
4.96s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_multilingual_name_triangle_similarity
4.78s call     tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_encode_batch_mixed_valid_empty
4.76s call     tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_default_model_works
4.40s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_consistency_across_calls
4.23s call     tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_name_variants_similarity
4.19s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_encode_with_normalization
4.16s call     tests/unit/test_embedding_config.py::TestEmbeddingService::test_model_info
4.08s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_embedding_result_format
4.06s call     tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_large_batch_performance
3.94s call     tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_batch_performance_p95
3.93s call     tests/unit/test_embedding_config.py::TestEmbeddingService::test_lazy_initialization
3.90s call     tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_unrelated_strings_low_similarity
3.77s call     tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_single_vs_batch_performance
3.76s call     tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_organization_variants
3.62s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceIntegration::test_real_world_embedding_scenarios
3.59s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_empty_and_whitespace_handling
3.59s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_name_vs_noise_low_similarity
3.57s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceIntegration::test_multilingual_support
3.52s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_embedding_dimensions_consistency
=========================== short test summary info ============================
PASSED tmp/tests/e2e/test_full_pipeline_risk.py::TestFullPipelineRiskE2E::test_full_pipeline_high_risk_scenario
PASSED tmp/tests/e2e/test_full_pipeline_risk.py::TestFullPipelineRiskE2E::test_decision_engine_integration_with_mock_data
PASSED tmp/tests/e2e/test_full_pipeline_risk.py::TestFullPipelineRiskE2E::test_api_response_format_with_risk_fields
PASSED tmp/tests/e2e/test_full_pipeline_risk.py::TestFullPipelineRiskE2E::test_pipeline_with_different_risk_levels
PASSED tmp/tests/e2e/test_full_pipeline_risk.py::TestFullPipelineRiskE2E::test_pipeline_error_handling
PASSED tmp/tests/integration/test_api_risk_response.py::TestAPIRiskResponse::test_process_endpoint_response_format
PASSED tmp/tests/integration/test_api_risk_response.py::TestAPIRiskResponse::test_process_endpoint_response_without_decision_engine
PASSED tmp/tests/integration/test_api_risk_response.py::TestAPIRiskResponse::test_decision_output_serialization
PASSED tmp/tests/integration/test_api_risk_response.py::TestAPIRiskResponse::test_risk_level_values
PASSED tmp/tests/integration/test_diminutive_forms.py::test_diminutive_forms
PASSED tmp/tests/integration/test_e2e_sanctions_screening.py::TestE2ESanctionsScreening::test_english_mixed_script_name
PASSED tmp/tests/integration/test_e2e_sanctions_screening.py::TestE2ESanctionsScreening::test_complex_payment_description
PASSED tmp/tests/integration/test_e2e_sanctions_screening.py::TestE2ESanctionsScreening::test_edge_case_compound_names
PASSED tmp/tests/integration/test_e2e_sanctions_screening.py::TestE2ESanctionsScreening::test_decision_engine_thresholds
PASSED tmp/tests/integration/test_e2e_sanctions_screening.py::TestE2ESanctionsScreening::test_metrics_collection
PASSED tmp/tests/integration/test_e2e_sanctions_screening.py::TestE2ESanctionsScreening::test_performance_benchmarks
PASSED tmp/tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_name_variants_similarity
PASSED tmp/tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_organization_names_similarity
PASSED tmp/tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_unrelated_strings_low_similarity
PASSED tmp/tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_mixed_script_names
PASSED tmp/tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_common_names_different_languages
PASSED tmp/tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_organization_variants
PASSED tmp/tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_embedding_dimensions_consistency
PASSED tmp/tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_preprocessing_effectiveness
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u041e\u043f\u043b\u0430\u0442\u0430 \u0437\u0430 \u043f\u043e\u0441\u043b\u0443\u0433\u0438, \u043f\u043b\u0430\u0442\u043d\u0438\u043a \u041f\u0435\u0442\u0440\u0438\u043a \u041f.-\u041f\u0435\u0442\u0440\u043e \u041f.]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u0414\u043b\u044f \u041f\u0435\u0442\u0440\u0443\u0441\u044f \u0406\u0432\u0430\u043d\u043e\u0432\u0430, \u0437\u0430 \u0440\u0435\u043c\u043e\u043d\u0442-\u041f\u0435\u0442\u0440\u043e \u0406\u0432\u0430\u043d\u043e\u0432]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u041f\u0435\u0440\u0435\u043a\u0430\u0437 \u0432\u0456\u0434 \u0412\u043e\u0432\u0447\u0438\u043a\u0430 \u0417\u0435\u043b\u0435\u043d\u0441\u044c\u043a\u043e\u0433\u043e \u0412. \u041e.-\u0412\u043e\u043b\u043e\u0434\u0438\u043c\u0438\u0440 \u0417\u0435\u043b\u0435\u043d\u0441\u044c\u043a\u0438\u0439 \u0412. \u041e.]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u041f\u043e\u0434\u0430\u0440\u0443\u043d\u043e\u043a \u0434\u043b\u044f \u0414\u0430\u0448\u0435\u043d\u044c\u043a\u0438 \u041a\u0432\u0456\u0442\u043a\u043e\u0432\u043e\u0457-\u0414\u0430\u0440\u0456\u044f \u041a\u0432\u0456\u0442\u043a\u043e\u0432\u0430]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u0412\u0456\u0434 \u0421\u0430\u0448\u043a\u0430 \u041f\u043e\u043b\u043e\u0436\u0438\u043d\u0441\u044c\u043a\u043e\u0433\u043e \u0437\u0430 \u043a\u0432\u0438\u0442\u043a\u0438-\u041e\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041f\u043e\u043b\u043e\u0436\u0438\u043d\u0441\u044c\u043a\u0438\u0439]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u0414\u044f\u043a\u0443\u0454\u043c\u043e \u0421\u0435\u0440\u0433\u0456\u0454\u0432\u0456 \u0416\u0430\u0434\u0430\u043d\u0443 \u0437\u0430 \u0442\u0432\u043e\u0440\u0447\u0456\u0441\u0442\u044c-\u0421\u0435\u0440\u0433\u0456\u0439 \u0416\u0430\u0434\u0430\u043d]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u041f\u043e\u0434\u0430\u0440\u0443\u043d\u043e\u043a \u0434\u043b\u044f \u041e\u043a\u0441\u0430\u043d\u0438 \u0417\u0430\u0431\u0443\u0436\u043a\u043e-\u041e\u043a\u0441\u0430\u043d\u0430 \u0417\u0430\u0431\u0443\u0436\u043a\u043e]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u041f\u043b\u0442\u0456\u0436 \u0432\u0456\u0434 \u0412'\u044f\u0447\u0435\u0441\u043b\u0430\u0432\u0430 \u0432\u0430\u043a\u0430\u0440\u0447\u0443\u043a\u0430 (\u043e\u043a\u0435\u0430\u043d \u0435\u043b\u044c\u0437\u0438)-\u0412'\u044f\u0447\u0435\u0441\u043b\u0430\u0432 \u0412\u0430\u043a\u0430\u0440\u0447\u0443\u043a]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u041f\u0435\u0440\u0435\u043a\u0430\u0437 \u041e\u041b\u0415\u0413\u0423 \u0421\u041a\u0420\u0418\u041f\u0426\u0406-\u041e\u043b\u0435\u0433 \u0421\u043a\u0440\u0438\u043f\u043a\u0430]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u0414\u043b\u044f \u0406\u0432\u0430\u043d\u043e\u0432\u0430-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u0430 \u0421.\u0412.-\u0406\u0432\u0430\u043d\u043e\u0432-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u043e \u0421. \u0412.]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_russian_full_normalization[\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043e\u0442 \u0421\u0430\u0448\u0438 \u041f\u0443\u0448\u043a\u0438\u043d\u0430 \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u043e\u0432\u0438\u0447\u0430-\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041f\u0443\u0448\u043a\u0438\u043d \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u043e\u0432\u0438\u0447]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_russian_full_normalization[\u041e\u043f\u043b\u0430\u0442\u0430 \u0434\u043b\u044f \u0412\u043e\u043b\u043e\u0434\u0438 \u0412\u044b\u0441\u043e\u0446\u043a\u043e\u0433\u043e-\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u0412\u044b\u0441\u043e\u0446\u043a\u0438\u0439]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_russian_full_normalization[\u041f\u043b\u0430\u0442\u0451\u0436 \u043e\u0442 \u0414\u0438\u043c\u044b \u041c\u0435\u0434\u0432\u0435\u0434\u0435\u0432\u0430-\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u041c\u0435\u0434\u0432\u0435\u0434\u0435\u0432]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_russian_full_normalization[\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0418\u0432\u0430\u043d\u0443 \u0411\u0443\u043d\u0438\u043d\u0443-\u0418\u0432\u0430\u043d \u0411\u0443\u043d\u0438\u043d]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_russian_full_normalization[\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0434\u043b\u044f \u0415\u0441\u0435\u043d\u0438\u043d\u0430 \u0421. \u0410.-\u0415\u0441\u0435\u043d\u0438\u043d \u0421. \u0410.]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_russian_full_normalization[\u0417\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u043e\u0442 \u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432\u0430 \u041c.\u042e.-\u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432 \u041c. \u042e.]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_english_full_normalization[Payment from John Fitzgerald Kennedy-John Fitzgerald Kennedy]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_english_full_normalization[Transfer to Stephen E. King for services-Stephen E. King]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_english_full_normalization[For Mr. Sherlock Holmes, Baker st. 221b-Sherlock Holmes]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_english_full_normalization[Refund to Ms. Joanna Rowling-Joanna Rowling]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_english_full_normalization[From Bill Gates for charity-William Gates]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_english_full_normalization[For Liz Truss, former PM-Elizabeth Truss]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_english_full_normalization[Payment from Mike Johnson-Michael Johnson]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_english_full_normalization[For BARACK H. OBAMA, invoice 123-Barack H. Obama]
PASSED tmp/tests/integration/test_full_normalization_suite.py::test_critical_ukrainian_normalization
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_russian_male_name_with_patronymic
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_russian_female_name_only
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_russian_male_dative_case
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_ukrainian_invariant_surname_kovalenko
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_ukrainian_invariant_surname_sushko
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_ukrainian_invariant_surname_lemish
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_surname_only_without_name
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_multiple_persons_with_different_genders
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_confidence_gap_boundary_cases
PASSED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_trace_information_completeness
PASSED tmp/tests/integration/test_lang_in_results.py::TestLanguageInResults::test_russian_language_in_results
PASSED tmp/tests/integration/test_lang_in_results.py::TestLanguageInResults::test_ukrainian_language_in_results
PASSED tmp/tests/integration/test_lang_in_results.py::TestLanguageInResults::test_english_language_in_results
PASSED tmp/tests/integration/test_lang_in_results.py::TestLanguageInResults::test_mixed_language_in_results
PASSED tmp/tests/integration/test_lang_in_results.py::TestLanguageInResults::test_unknown_language_in_results
PASSED tmp/tests/integration/test_lang_in_results.py::TestLanguageInResults::test_confidence_range_validation
PASSED tmp/tests/integration/test_lang_in_results.py::TestLanguageInResults::test_normalization_result_language_fields
PASSED tmp/tests/integration/test_lang_in_results.py::TestLanguageInResults::test_processing_result_language_fields
PASSED tmp/tests/integration/test_lang_order_unicode_first.py::TestUnicodeFirstLanguageDetectionOrder::test_unicode_normalization_before_language_detection
PASSED tmp/tests/integration/test_lang_order_unicode_first.py::TestUnicodeFirstLanguageDetectionOrder::test_mixed_unicode_forms_detection
PASSED tmp/tests/integration/test_lang_order_unicode_first.py::TestUnicodeFirstLanguageDetectionOrder::test_unicode_idempotency_protection
PASSED tmp/tests/integration/test_lang_order_unicode_first.py::TestUnicodeFirstLanguageDetectionOrder::test_diacritics_normalization_stability
PASSED tmp/tests/integration/test_lang_order_unicode_first.py::TestUnicodeFirstLanguageDetectionOrder::test_orchestrator_call_order_verification
PASSED tmp/tests/integration/test_lang_order_unicode_first.py::TestUnicodeFirstLanguageDetectionOrder::test_edge_cases_unicode_normalization
PASSED tmp/tests/integration/test_lang_order_unicode_first.py::TestUnicodeFirstLanguageDetectionOrder::test_unicode_normalization_preserves_meaning
PASSED tmp/tests/integration/test_mixed_language_flow.py::TestMixedLanguageFlow::test_mixed_language_detection
PASSED tmp/tests/integration/test_mixed_language_flow.py::TestMixedLanguageFlow::test_mixed_language_normalization
PASSED tmp/tests/integration/test_mixed_language_flow.py::TestMixedLanguageFlow::test_mixed_language_smart_filter
PASSED tmp/tests/integration/test_mixed_language_flow.py::TestMixedLanguageFlow::test_mixed_language_signals
PASSED tmp/tests/integration/test_mixed_language_flow.py::TestMixedLanguageFlow::test_mixed_language_birthdate_proximity
PASSED tmp/tests/integration/test_mixed_language_flow.py::TestMixedLanguageFlow::test_mixed_language_full_flow
PASSED tmp/tests/integration/test_mixed_language_flow.py::TestMixedLanguageFlow::test_mixed_language_edge_cases
PASSED tmp/tests/integration/test_mixed_language_flow.py::TestMixedLanguageFlow::test_mixed_language_confidence_scoring
PASSED tmp/tests/integration/test_mixed_language_flow.py::TestMixedLanguageFlow::test_mixed_language_token_traces
PASSED tmp/tests/integration/test_mixed_script_names.py::TestMixedScriptNames::test_ascii_names_in_ukrainian_context
PASSED tmp/tests/integration/test_mixed_script_names.py::TestMixedScriptNames::test_ascii_names_in_russian_context
PASSED tmp/tests/integration/test_mixed_script_names.py::TestMixedScriptNames::test_ascii_names_positional_inference
PASSED tmp/tests/integration/test_mixed_script_names.py::TestMixedScriptNames::test_mixed_script_multiple_persons
PASSED tmp/tests/integration/test_mixed_script_names.py::TestMixedScriptNames::test_ascii_names_with_apostrophes
PASSED tmp/tests/integration/test_mixed_script_names.py::TestMixedScriptNames::test_ascii_names_not_demoted_to_unknown
PASSED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_error_resilience_pipeline
PASSED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_language_detection_consistency
PASSED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_variant_generation_integration
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_single_person_normalization
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_multiple_persons_with_conjunction
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_persons_with_patronymics
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_persons_with_initials
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_persons_with_comma_separator
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_persons_with_mixed_separators
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_persons_with_non_person_tokens
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_persons_data_structure
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_empty_text
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_text_without_persons
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_ukrainian_persons
PASSED tmp/tests/integration/test_persons_grouping.py::TestPersonsGroupingIntegration::test_english_persons
PASSED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_performance_requirements
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u0421\u0435\u0440\u0433\u0456\u0454\u0432\u0456 \u0416\u0430\u0434\u0430\u043d\u0443-\u0421\u0435\u0440\u0433\u0456\u0439 \u0416\u0430\u0434\u0430\u043d-uk]
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u041e\u043a\u0441\u0430\u043d\u0456 \u0417\u0430\u0431\u0443\u0436\u043a\u043e-\u041e\u043a\u0441\u0430\u043d\u0430 \u0417\u0430\u0431\u0443\u0436\u043a\u043e-uk]
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u041f\u0435\u0442\u0440\u0430 \u0418\u0432\u0430\u043d\u043e\u0432\u0430-\u041f\u0435\u0442\u0440\u043e \u0418\u0432\u0430\u043d\u043e\u0432-uk]
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u043e\u0442 \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u0430 \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u043e\u0432\u0438\u0447\u0430-\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u043e\u0432\u0438\u0447-ru]
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u0434\u043b\u044f \u0406\u0432\u0430\u043d\u0456\u0432\u043d\u0438-\u0406\u0432\u0430\u043d\u0456\u0432\u043d\u0430-uk]
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u0414\u043b\u044f \u0406\u0432\u0430\u043d\u043e\u0432\u0430-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u0430 \u0421.\u0412.-\u0406\u0432\u0430\u043d\u043e\u0432-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u043e \u0421. \u0412.-uk]
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[Payment from JOHN DOE-John Doe-en]
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u041e\u043f\u043b\u0430\u0442\u0430 \u0432\u0456\u0434 \u041f\u0435\u0442\u0440\u0430 \u041f\u043e\u0440\u043e\u0448\u0435\u043d\u043a\u0430-\u041f\u0435\u0442\u0440\u043e \u041f\u043e\u0440\u043e\u0448\u0435\u043d\u043a\u043e-uk]
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u0415\u0441\u0435\u043d\u0438\u043d \u0441. \u0430.-\u0415\u0441\u0435\u043d\u0438\u043d \u0421. \u0410.-ru]
PASSED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u043f\u0443\u0448\u043a\u0438\u043d \u0430 \u0441-\u041f\u0443\u0448\u043a\u0438\u043d \u0410. \u0421.-ru]
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_russian_complex_sentence
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_ukrainian_complex_sentence
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_mixed_case_names
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_compound_surnames
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_quoted_names
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_organizations_with_personal_names
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_diminutives_in_context
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_ukrainian_diminutives_in_context
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_english_names_in_ukrainian_context
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_initial_handling_in_sentences
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_patronymic_variations
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_ukrainian_surname_variations
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_error_handling_malformed_input
PASSED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_confidence_scoring
PASSED tmp/tests/integration/test_simple_normalization.py::test_normalization_directly
PASSED tmp/tests/integration/test_strict_name_extraction.py::test_strict_name_extraction
PASSED tmp/tests/integration/test_ukrainian_morphology_simple.py::test_ukrainian_morphology_simple
PASSED tmp/tests/integration/test_ukrainian_normalization.py::TestUkrainianNormalization::test_ukrainian_text_normalization
PASSED tmp/tests/integration/test_ukrainian_normalization.py::TestUkrainianNormalization::test_ukrainian_stemming_in_normalization
PASSED tmp/tests/integration/test_ukrainian_normalization.py::TestUkrainianNormalization::test_ukrainian_language_detection
PASSED tmp/tests/integration/test_ukrainian_normalization.py::TestUkrainianNormalization::test_ukrainian_stop_words_removal
PASSED tmp/tests/integration/test_ukrainian_normalization.py::TestUkrainianNormalization::test_ukrainian_unicode_handling
PASSED tmp/tests/integration/test_ukrainian_normalization.py::TestUkrainianNormalization::test_ukrainian_mixed_language_text
PASSED tmp/tests/integration/test_ukrainian_normalization.py::TestUkrainianNormalization::test_ukrainian_empty_and_short_text
PASSED tmp/tests/integration/test_ukrainian_normalization.py::TestUkrainianNormalization::test_ukrainian_special_characters
PASSED tmp/tests/integration/test_ukrainian_normalization.py::TestUkrainianNormalization::test_ukrainian_performance
PASSED tmp/tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_warmup_performance
PASSED tmp/tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_batch_performance_p95
PASSED tmp/tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_repeated_batch_performance
PASSED tmp/tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_single_vs_batch_performance
PASSED tmp/tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_large_batch_performance
PASSED tmp/tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_empty_and_single_text_performance
PASSED tmp/tests/performance/test_lang_perf.py::TestLanguageDetectionPerformance::test_single_pass_performance
PASSED tmp/tests/performance/test_lang_perf.py::TestLanguageDetectionPerformance::test_debug_details_completeness
PASSED tmp/tests/performance/test_lang_perf.py::TestLanguageDetectionPerformance::test_memory_efficiency
PASSED tmp/tests/performance/test_lang_perf.py::TestLanguageDetectionPerformance::test_edge_case_performance
PASSED tmp/tests/performance/test_lang_perf.py::TestLanguageDetectionPerformance::test_character_counting_accuracy
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_high_confidence_match_decision
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_weak_match_decision
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_needs_review_decision
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_no_match_decision
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_insufficient_data_decision
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_evidence_extraction
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_risk_factor_identification
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_context_sensitive_decisions
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_reasoning_generation
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_recommendations_generation
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_batch_decisions
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngine::test_threshold_updates
PASSED tmp/tests/unit/core/test_decision_engine.py::TestDecisionEngineIntegration::test_real_processing_result_decision
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_factory_initialization
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_create_testing_orchestrator_minimal
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_create_testing_orchestrator_full
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_create_production_orchestrator
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_create_orchestrator_custom_config
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_service_initialization_mocking
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_service_initialization_error_handling
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_optional_services_configuration
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_factory_singleton_pattern
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactory::test_service_dependency_injection
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactoryIntegration::test_real_service_creation
PASSED tmp/tests/unit/core/test_orchestrator_factory.py::TestOrchestratorFactoryIntegration::test_factory_performance
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_initialization
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_default_model_configuration
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_load_model_success
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_load_model_error
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_model_caching
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_encode_single_text
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_encode_multiple_texts
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_encode_with_normalization
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_encode_batch_processing
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_encode_empty_input
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_encode_none_input
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_embedding_result_format
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceErrorHandling::test_model_encode_error
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceErrorHandling::test_memory_error_handling
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServicePerformance::test_batch_size_optimization
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServicePerformance::test_processing_time_tracking
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServicePerformance::test_model_cache_efficiency
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceIntegration::test_multilingual_support
PASSED tmp/tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceIntegration::test_real_world_embedding_scenarios
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_service_initialization
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_cache_key_generation
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_embedding_caching
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_cache_lru_eviction
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_optimized_embeddings_with_cache
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_optimized_embeddings_without_cache
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_performance_metrics_tracking
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_batch_optimization
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_gpu_availability_check
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_optimized_similarity_search
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_faiss_acceleration
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_numpy_similarity_search
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_cache_clearing
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_cache_warmup
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_error_handling
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_async_optimized_methods
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_performance_under_load
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_metrics_accumulation
PASSED tmp/tests/unit/embeddings/test_optimized_embedding_service.py::TestOptimizedEmbeddingService::test_thread_safety
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_invariant_surnames_unchanged
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_russian_feminine_adjustment
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_russian_masculine_adjustment
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_ukrainian_feminine_adjustment
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_ukrainian_masculine_adjustment
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_insufficient_confidence_gap
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_preserve_original_gendered_form
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_no_matching_endings
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_case_insensitive_matching
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_compound_surnames
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_edge_cases
PASSED tmp/tests/unit/layers/test_adjust_surname_gender.py::TestAdjustSurnameGender::test_confidence_gap_boundary
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_single_person
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_multiple_persons_with_conjunction
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_multiple_persons_with_comma
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_person_with_patronymic
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_person_with_initial
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_skip_non_person_tokens
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_empty_tokens
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_no_person_tokens
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_multiple_separators
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_ukrainian_separators
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_english_separators
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_person_data_structure
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_surname_adjustment_integration
PASSED tmp/tests/unit/layers/test_group_persons.py::TestGroupPersons::test_surname_adjustment_with_high_confidence
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_patronymic_male_clear
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_patronymic_female_clear
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_given_name_male_clear
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_given_name_female_clear
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_surname_male_ending
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_surname_female_ending
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_context_markers_female
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_context_markers_male
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_combined_indicators_strong_female
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_combined_indicators_strong_male
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_uncertain_gender
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_empty_input
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_mixed_indicators_female_wins
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_mixed_indicators_male_wins
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_initial_tokens_ignored
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_ukrainian_surname_endings
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_case_insensitive_matching
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_multiple_patronymics
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_multiple_given_names
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_edge_case_exactly_3_difference
PASSED tmp/tests/unit/layers/test_infer_gender.py::TestInferGender::test_unknown_role_tokens
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_normalization_result_structure
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_token_trace_completeness
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_organizations_core_separation
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_persons_core_structure
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_flag_behavior_real_impact
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_org_acronyms_always_unknown
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_ascii_no_morph_in_cyrillic
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_womens_surnames_preserved
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_serialization_compatibility
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_performance_requirements
PASSED tmp/tests/unit/layers/test_normalization_contracts.py::TestNormalizationContracts::test_error_handling
PASSED tmp/tests/unit/monitoring/test_metrics_basic.py::test_metrics_service_basic_operations
PASSED tmp/tests/unit/monitoring/test_metrics_basic.py::test_metrics_service_initialization
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_service_initialization
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_counter_metric
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_set_gauge_metric
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_record_histogram_metric
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_timer_metric
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_metric_definitions
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_alert_system
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_alert_cooldown
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_metric_cleanup
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_performance_report
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_system_health_check
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_metric_export
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_thread_safety
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_async_operations
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_memory_usage_tracking
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_metric_labels
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_bulk_operations
PASSED tmp/tests/unit/monitoring/test_metrics_service.py::TestMetricsService::test_error_handling
PASSED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_validation_failure_metrics
PASSED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_smart_filter_skip_metrics
PASSED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_exception_handling_metrics
PASSED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_active_requests_gauge
PASSED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_histogram_metrics_accuracy
PASSED tmp/tests/unit/morphology/test_integration_morphology.py::TestMorphologyIntegration::test_language_detection_priority
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_morph_nominal_caching
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_morph_nominal_name_surn_priority
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_ukrainian_surname_enko_indeclinable
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_ukrainian_surname_sky_forms
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_ukrainian_surname_tsky_forms
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_ukrainian_surname_ov_forms
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_russian_diminutives_expansion
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_ukrainian_diminutives_expansion
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_english_nicknames_expansion
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_surname_gender_adjustment_male
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_surname_gender_adjustment_ukrainian
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_compound_surname_gender_adjustment
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_morphology_preserves_case
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_morphology_handles_compound_words
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_diminutives_with_morphology
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_advanced_features_flag_affects_diminutives
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_advanced_features_flag_affects_morphology
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_unknown_diminutive_fallback
PASSED tmp/tests/unit/morphology/test_morph_and_diminutives.py::TestMorphologyAndDiminutives::test_mixed_language_diminutives
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_initialization
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_basic_name
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_feminine_name
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_surname
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_patronymic
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_compound_name
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_empty_input
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_whitespace_input
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_non_russian_text
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_numbers
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_mixed_text
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_all_forms_with_exception
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test__generate_diminutives_masculine
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test__generate_diminutives_feminine
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test__generate_diminutives_unknown_name
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test__generate_diminutives_empty_input
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_word_forms_all_cases
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_word_forms_multiple_parses
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_word_forms_inflection_failure
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_get_word_forms_non_noun
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_is_russian_name_valid_names
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_is_russian_name_invalid_names
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_is_russian_name_edge_cases
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_analyze_name_capitalization
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_analyze_name_whitespace_handling
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_analyze_name_empty_input
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test__generate_variants_comprehensive
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test__generate_variants_deduplication
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test__generate_variants_max_variants_limit
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_batch_process_names
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_batch_process_names_empty_list
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphology::test_batch_process_names_with_errors
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphologyIntegration::test_real_name_processing_integration
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphologyIntegration::test_performance_with_long_name_lists
PASSED tmp/tests/unit/morphology/test_russian_morphology_service.py::TestRussianMorphologyIntegration::test_memory_usage_with_many_variants
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_word_basic
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_gender_detection_male
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_gender_detection_female
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_declensions_generation
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_diminutives_generation
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_variants_generation
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_transliterations_generation
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_language_detection
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_is_russian_name
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_name_complexity
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_phonetic_variants
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_regional_transliterations
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_basic
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_with_language
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_empty_input
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_none_input
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_whitespace_input
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_special_characters
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_numbers
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_mixed_case
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_very_long
PASSED tmp/tests/unit/morphology/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_unicode_characters
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u0421\u0435\u0440\u0433\u0456\u0439-masc-uk]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u041e\u043b\u0435\u043d\u0430-femn-uk]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u0412\u043e\u043b\u043e\u0434\u0438\u043c\u0438\u0440-masc-uk]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u0414\u0430\u0440\u0456\u044f-femn-uk]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u041f\u0435\u0442\u0440\u043e-masc-uk]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u0410\u043d\u043d\u0430-femn-uk]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u041c\u0438\u0445\u0430\u0439\u043b\u043e-masc-uk]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u041a\u0430\u0442\u0435\u0440\u0438\u043d\u0430-femn-uk]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_diminutives_generation
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_transliteration_generation
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_surname_endings[\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u043e-expected_endings0]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_surname_endings[\u0406\u0432\u0430\u043d\u0435\u043d\u043a\u043e-expected_endings1]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_surname_endings[\u041c\u0435\u043b\u044c\u043d\u0438\u043a-expected_endings2]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_surname_endings[\u0428\u0435\u0432\u0447\u0435\u043d\u043a\u043e-expected_endings3]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_edge_cases_handling[-expected_result0]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_edge_cases_handling[\u0410-expected_result1]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_edge_cases_handling[\u0421\u0435\u0440\u0433\u0456\u0439-expected_result2]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u0421\u0435\u0440\u0433\u0456\u0439-expected_ukrainian_chars0]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u041e\u043b\u0435\u043a\u0441\u0456\u0439-expected_ukrainian_chars1]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u0412\u043e\u043b\u043e\u0434\u0438\u043c\u0438\u0440-expected_ukrainian_chars2]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u0414\u0430\u0440\u0456\u044f-expected_ukrainian_chars3]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u041f\u0435\u0442\u0440\u043e-expected_ukrainian_chars4]
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_name_complexity_analysis
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_correction_logic
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_basic_functionality
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_empty_name_handling
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_short_name_handling
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_auto_language_detection
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_pymorphy3_initialization_success
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_exceptions_dictionary
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_phonetic_variants_generation
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_regional_transliterations
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_get_all_forms_method
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_is_ukrainian_name_detection
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_complexity_level_calculation
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_basic_transliteration
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_language_detection_internal
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_pymorphy_analysis_failure_handling
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_generate_pymorphy_declensions
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_extract_gender_with_name_tags
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_extract_gender_by_endings
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_apply_regional_transliteration
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_whitespace_name_handling
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_none_name_handling
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_word_gender_detection_petro
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_word_gender_detection_daria
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_word_unknown_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_word_short_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_lemma_special_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_lemma_unknown_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_word_special_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_gender_special_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_gender_unknown_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_variants_special_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_variants_unknown_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_diminutives_special_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_diminutives_unknown_name
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_basic_functionality
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_with_language_detection
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_empty_string
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_whitespace_only
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_none_input
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_special_characters
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_numbers
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_mixed_case
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_very_long
PASSED tmp/tests/unit/morphology/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_unicode_characters
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_unified_pattern_creation
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_generate_patterns_basic
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_generate_patterns_empty_text
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_document_pattern_extraction
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_contextual_pattern_extraction
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_structured_name_extraction
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_company_pattern_extraction
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_dob_pattern_extraction
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_dictionary_pattern_extraction
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_language_detection
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_pattern_optimization
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_stop_words_filtering
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_multilingual_support
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_export_for_aho_corasick
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_pattern_statistics
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_high_quality_name_validation
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_structured_name_validation
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_company_name_validation
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_performance_with_complex_text
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_legacy_compatibility
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_case_sensitivity_handling
PASSED tmp/tests/unit/patterns/test_unified_pattern_service.py::TestUnifiedPatternService::test_special_characters_handling
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_create_empty_result
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_addresses
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_banking_terms
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_business_types
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_capitalized_names
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_company_signals_empty
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_company_signals_with_keywords
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_financial_services
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_keywords
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_legal_entities
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_detect_registration_numbers
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_extract_detected_keywords
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_get_enhanced_company_analysis
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetector::test_initialization
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetectorIntegration::test_financial_institution_detection
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetectorIntegration::test_multilingual_support
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetectorIntegration::test_requirement_banking_terms
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetectorIntegration::test_requirement_legal_forms
PASSED tmp/tests/unit/screening/test_company_detector.py::TestCompanyDetectorIntegration::test_requirement_organization_patterns
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_analyze_regular_signals_high_confidence
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_analyze_regular_signals_low_confidence
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_collect_all_signals
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_determine_risk_level
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_get_decision_statistics
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_get_decision_statistics_empty
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_get_detailed_analysis
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_initialization
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_initialization_with_terrorism_detection
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_is_excluded_text
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_make_decision_empty_text
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_make_decision_excluded_text
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_make_regular_decision_thresholds
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_update_thresholds
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionLogic::test_update_thresholds_invalid_key
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionResult::test_decision_result_creation
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionTypes::test_decision_type_values
PASSED tmp/tests/unit/screening/test_decision_logic.py::TestDecisionTypes::test_risk_level_values
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_create_empty_result
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_detect_addresses
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_detect_bank_details
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_detect_contact_info
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_detect_dates
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_detect_document_numbers
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_detect_document_signals_empty
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_detect_document_signals_with_inn
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_detect_inn
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_extract_detected_documents
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_initialization
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetector::test_is_valid_date
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetectorIntegration::test_comprehensive_document_analysis
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetectorIntegration::test_multilingual_document_support
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetectorIntegration::test_requirement_address_detection
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetectorIntegration::test_requirement_date_detection
PASSED tmp/tests/unit/screening/test_document_detector.py::TestDocumentDetectorIntegration::test_requirement_inn_detection
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_analyze_payment_description
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_date_only_text
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_exclusion_patterns
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_initialization
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_initialization_with_terrorism_detection
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_language_composition_analysis
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_language_detection
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_make_smart_decision
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_service_words_cleaning
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_should_process_text_empty
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_should_process_text_excluded
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_should_process_text_with_signals
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterService::test_text_normalization
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterIntegration::test_company_detection
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterIntegration::test_person_name_detection
PASSED tmp/tests/unit/screening/test_smart_filter_service.py::TestSmartFilterIntegration::test_safe_content_handling
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_create_empty_result
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_detect_activity_patterns
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_detect_financing_patterns
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_detect_organization_patterns
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_detect_terrorism_signals_empty
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_detect_terrorism_signals_excluded_content
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_detect_weapons_patterns
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_determine_risk_level
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_extract_detected_indicators
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_get_risk_assessment
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_initialization
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetector::test_is_excluded_content
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetectorSafety::test_defensive_purpose_only
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetectorSafety::test_false_positive_prevention
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetectorSafety::test_pattern_weights_balance
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetectorSafety::test_risk_escalation_thresholds
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetectorIntegration::test_comprehensive_threat_assessment
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetectorIntegration::test_defensive_system_requirements
PASSED tmp/tests/unit/screening/test_terrorism_detector.py::TestTerrorismDetectorIntegration::test_risk_assessment_workflow
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_proximity_matching_single_person_single_id
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_proximity_matching_multiple_persons_multiple_ids
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_proximity_matching_distance_limits
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_fallback_for_ids_without_position
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_fallback_logic_single_person_single_id
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_no_duplicate_id_assignment
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_assign_id_to_person_method
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_assign_invalid_id_evidence
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_persons_without_names_in_text
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityMatching::test_distance_calculation_accuracy
PASSED tmp/tests/unit/signals/test_id_person_proximity_matching.py::TestIDPersonProximityIntegration::test_full_signals_extraction_with_proximity
PASSED tmp/tests/unit/signals/test_signals_service_async.py::TestSignalsServiceAsync::test_extract_async_success
PASSED tmp/tests/unit/signals/test_signals_service_async.py::TestSignalsServiceAsync::test_extract_async_without_normalization
PASSED tmp/tests/unit/signals/test_signals_service_async.py::TestSignalsServiceAsync::test_extract_async_empty_text
PASSED tmp/tests/unit/signals/test_signals_service_async.py::TestSignalsServiceAsync::test_extract_async_error_handling
PASSED tmp/tests/unit/signals/test_signals_service_async.py::TestSignalsServiceAsync::test_async_method_uses_thread_pool
PASSED tmp/tests/unit/signals/test_signals_service_async.py::TestSignalsServiceAsync::test_concurrent_async_calls
PASSED tmp/tests/unit/signals/test_signals_service_async.py::TestSignalsServiceAsync::test_extract_async_with_different_languages
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_initialization
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_signals_basic
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_signals_with_organization
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_signals_with_birthdate
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_signals_with_ids
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_persons_from_normalization_result
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_organizations_from_normalization_result
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_person_ids
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_organization_ids
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_birthdates
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_enrich_persons_with_ids
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_enrich_organizations_with_ids
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_enrich_with_birthdates_proximity_matching
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_calculate_person_confidence
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_calculate_organization_confidence
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_extract_legal_forms
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_person_to_dict_serialization
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_organization_to_dict_serialization
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceCore::test_calculate_overall_confidence
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceEdgeCases::test_extract_signals_empty_text
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceEdgeCases::test_extract_signals_none_normalization
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceEdgeCases::test_extract_persons_malformed_core
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceEdgeCases::test_confidence_calculation_edge_cases
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceIntegration::test_complex_payment_scenario
PASSED tmp/tests/unit/signals/test_signals_service_comprehensive.py::TestSignalsServiceIntegration::test_multilingual_entity_extraction
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_ac_integration_enabled
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_ac_integration_disabled
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_enhanced_ac_search_enabled
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_enhanced_ac_search_disabled
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_enhanced_ac_search_with_matches
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_enhanced_pattern_analysis
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_pattern_confidence_scoring
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_tier_priority_scoring
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_pattern_type_inference
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_processing_recommendations
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_enhanced_analysis_with_ukrainian_text
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_enhanced_analysis_with_english_text
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_max_matches_limit
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_error_handling_invalid_text
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_integration_with_existing_smart_filter
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_performance_with_long_text
PASSED tmp/tests/unit/smart_filter/test_enhanced_smart_filter.py::TestEnhancedSmartFilter::test_async_compatibility
PASSED tmp/tests/unit/smart_filter/test_smart_filter_service_async.py::TestSmartFilterServiceAsync::test_should_process_text_async_success
PASSED tmp/tests/unit/smart_filter/test_smart_filter_service_async.py::TestSmartFilterServiceAsync::test_should_process_text_async_excluded
PASSED tmp/tests/unit/smart_filter/test_smart_filter_service_async.py::TestSmartFilterServiceAsync::test_should_process_text_async_empty_text
PASSED tmp/tests/unit/smart_filter/test_smart_filter_service_async.py::TestSmartFilterServiceAsync::test_should_process_text_async_whitespace_only
PASSED tmp/tests/unit/smart_filter/test_smart_filter_service_async.py::TestSmartFilterServiceAsync::test_async_method_uses_thread_pool
PASSED tmp/tests/unit/smart_filter/test_smart_filter_service_async.py::TestSmartFilterServiceAsync::test_concurrent_async_calls
PASSED tmp/tests/unit/smart_filter/test_smart_filter_service_async.py::TestSmartFilterServiceAsync::test_async_error_handling
PASSED tmp/tests/unit/smart_filter/test_smart_filter_service_async.py::TestSmartFilterServiceAsync::test_async_with_different_text_types
PASSED tmp/tests/unit/test_build_templates_script.py::TestBuildTemplatesScript::test_template_builder_initialization
PASSED tmp/tests/unit/test_build_templates_script.py::TestBuildTemplatesScript::test_create_entity_template
PASSED tmp/tests/unit/test_build_templates_script.py::TestBuildTemplatesScript::test_create_batch_templates
PASSED tmp/tests/unit/test_build_templates_script.py::TestBuildTemplatesScript::test_generate_search_patterns
PASSED tmp/tests/unit/test_build_templates_script.py::TestBuildTemplatesScript::test_calculate_complexity_score
PASSED tmp/tests/unit/test_build_templates_script.py::TestBuildTemplatesScript::test_template_builder_logging_setup
PASSED tmp/tests/unit/test_build_templates_script.py::TestBuildTemplatesScript::test_build_templates_with_different_entity_types
PASSED tmp/tests/unit/test_build_templates_script.py::TestBuildTemplatesScript::test_template_builder_error_handling
PASSED tmp/tests/unit/test_build_templates_script.py::TestBuildTemplatesScript::test_template_generation_performance
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_basic_set_get
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_get_nonexistent_key
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_lru_eviction
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_ttl_expiration
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_statistics
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_get_or_set_cache_hit
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_get_or_set_cache_miss
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_clear_cache
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_exists_method
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_exists_with_expired_key
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_touch_method
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_touch_nonexistent_key
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_cleanup_expired
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_set_max_size
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_get_keys
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_memory_usage_estimation
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_generate_key_method
PASSED tmp/tests/unit/test_cache_service.py::TestCacheService::test_lru_logic_with_access
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_create_empty_result
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_addresses
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_banking_terms
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_business_types
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_capitalized_names
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_company_signals_empty
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_company_signals_with_keywords
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_financial_services
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_keywords
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_legal_entities
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_detect_registration_numbers
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_extract_detected_keywords
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_get_enhanced_company_analysis
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetector::test_initialization
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetectorIntegration::test_financial_institution_detection
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetectorIntegration::test_multilingual_support
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetectorIntegration::test_requirement_banking_terms
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetectorIntegration::test_requirement_legal_forms
PASSED tmp/tests/unit/test_company_detector.py::TestCompanyDetectorIntegration::test_requirement_organization_patterns
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_low_risk_canary_scenarios
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_medium_risk_canary_scenarios
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_high_risk_canary_scenarios
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_skip_risk_canary_scenarios
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_edge_case_canary_scenarios
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_score_calculation_stability
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_reasons_stability
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_metrics_recording_stability
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_configuration_stability
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_batch_consistency
PASSED tmp/tests/unit/test_decision_canary.py::TestDecisionCanary::test_canary_regression_detection
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_default_config_values
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_env_override_thr_high
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_env_override_thr_medium
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_env_override_weights
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_env_override_all_values
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_env_override_invalid_values
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_env_override_partial_values
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_unified_config_uses_env_overrides
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_decision_engine_uses_unified_config
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_decision_engine_custom_config_overrides_env
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_decision_engine_functionality_with_env_overrides
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_env_override_edge_cases
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_config_model_dump_with_env_overrides
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_env_override_case_sensitivity
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_env_override_priority
PASSED tmp/tests/unit/test_decision_config_overrides.py::TestDecisionConfigOverrides::test_multiple_instances_consistency
PASSED tmp/tests/unit/test_decision_contracts.py::TestRiskLevel::test_risk_level_values
PASSED tmp/tests/unit/test_decision_contracts.py::TestRiskLevel::test_risk_level_enumeration
PASSED tmp/tests/unit/test_decision_contracts.py::TestSmartFilterInfo::test_smart_filter_info_creation
PASSED tmp/tests/unit/test_decision_contracts.py::TestSmartFilterInfo::test_smart_filter_info_with_optional
PASSED tmp/tests/unit/test_decision_contracts.py::TestSmartFilterInfo::test_smart_filter_info_serialization
PASSED tmp/tests/unit/test_decision_contracts.py::TestSignalsInfo::test_signals_info_creation
PASSED tmp/tests/unit/test_decision_contracts.py::TestSignalsInfo::test_signals_info_with_optional
PASSED tmp/tests/unit/test_decision_contracts.py::TestSignalsInfo::test_signals_info_serialization
PASSED tmp/tests/unit/test_decision_contracts.py::TestSimilarityInfo::test_similarity_info_creation
PASSED tmp/tests/unit/test_decision_contracts.py::TestSimilarityInfo::test_similarity_info_with_values
PASSED tmp/tests/unit/test_decision_contracts.py::TestSimilarityInfo::test_similarity_info_serialization
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionInput::test_decision_input_creation
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionInput::test_decision_input_with_all_fields
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionInput::test_decision_input_serialization
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionOutput::test_decision_output_creation
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionOutput::test_decision_output_with_all_fields
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionOutput::test_decision_output_to_dict
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionConfig::test_decision_config_defaults
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionConfig::test_decision_config_custom_values
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionEngine::test_decision_engine_initialization
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionEngine::test_decision_engine_with_custom_config
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionEngine::test_decision_engine_decide_stub
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionEngine::test_decision_engine_high_risk_scenario
PASSED tmp/tests/unit/test_decision_contracts.py::TestDecisionEngine::test_decision_engine_low_risk_scenario
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_none_smartfilter_defaults_to_process_true
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_none_signals_defaults_to_zero_confidence
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_none_similarity_defaults_to_zero_contribution
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_all_none_evidence_results_in_low_risk
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_none_confidence_values_default_to_zero
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_none_boolean_flags_default_to_false
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_none_evidence_dict_defaults_to_empty
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_smartfilter_should_process_none_defaults_to_true
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_mixed_none_values_handled_gracefully
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_empty_text_handled_gracefully
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_very_high_confidence_with_none_other_values
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_skip_decision_with_none_values
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_details_contain_safe_values
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_evidence_strength_indicators_with_none_values
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_score_breakdown_with_none_values
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_reasons_generation_with_none_values
PASSED tmp/tests/unit/test_decision_edges.py::TestDecisionEngineEdgeCases::test_decision_engine_never_raises_exceptions
PASSED tmp/tests/unit/test_decision_engine_core.py::TestDecisionEngineCore::test_skip_scenario_smartfilter_false
PASSED tmp/tests/unit/test_decision_engine_core.py::TestDecisionEngineCore::test_high_risk_scenario
PASSED tmp/tests/unit/test_decision_engine_core.py::TestDecisionEngineCore::test_medium_risk_scenario
PASSED tmp/tests/unit/test_decision_engine_core.py::TestDecisionEngineCore::test_low_risk_scenario
PASSED tmp/tests/unit/test_decision_engine_core.py::TestDecisionEngineCore::test_score_calculation_deterministic
PASSED tmp/tests/unit/test_decision_engine_core.py::TestDecisionEngineCore::test_custom_config_weights
PASSED tmp/tests/unit/test_decision_engine_core.py::TestDecisionEngineCore::test_similarity_none_handling
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_strong_smartfilter_signal_reason
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_person_evidence_strong_reason
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_org_evidence_strong_reason
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_high_vector_similarity_reason
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_id_exact_match_reason
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_dob_match_reason
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_multiple_strong_evidence_reasons
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_moderate_evidence_fallback_reasons
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_low_evidence_no_strong_reasons
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_score_breakdown_in_details
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_normalized_features_in_details
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_evidence_strength_indicators
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_weights_and_thresholds_in_details
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_skip_scenario_reasons
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_reasons_consistency_with_evidence_strength
PASSED tmp/tests/unit/test_decision_explain.py::TestDecisionExplanation::test_contribution_calculation_accuracy
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_analyze_regular_signals_high_confidence
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_analyze_regular_signals_low_confidence
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_collect_all_signals
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_determine_risk_level
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_get_decision_statistics
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_get_decision_statistics_empty
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_get_detailed_analysis
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_initialization
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_initialization_with_terrorism_detection
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_is_excluded_text
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_make_decision_empty_text
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_make_decision_excluded_text
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_make_regular_decision_thresholds
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_update_thresholds
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionLogic::test_update_thresholds_invalid_key
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionResult::test_decision_result_creation
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionTypes::test_decision_type_values
PASSED tmp/tests/unit/test_decision_logic.py::TestDecisionTypes::test_risk_level_values
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_create_empty_result
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_detect_addresses
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_detect_bank_details
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_detect_contact_info
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_detect_dates
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_detect_document_numbers
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_detect_document_signals_empty
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_detect_document_signals_with_inn
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_detect_inn
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_extract_detected_documents
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_initialization
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetector::test_is_valid_date
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetectorIntegration::test_comprehensive_document_analysis
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetectorIntegration::test_multilingual_document_support
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetectorIntegration::test_requirement_address_detection
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetectorIntegration::test_requirement_date_detection
PASSED tmp/tests/unit/test_document_detector.py::TestDocumentDetectorIntegration::test_requirement_inn_detection
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingConfig::test_default_model_name
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingConfig::test_default_device
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingConfig::test_default_batch_size
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingConfig::test_default_enable_index
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingConfig::test_custom_config
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingService::test_single_text_encoding
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingService::test_multiple_texts_encoding
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingService::test_empty_input
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingService::test_device_from_config
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingService::test_embedding_dimension
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingService::test_model_info
PASSED tmp/tests/unit/test_embedding_config.py::TestEmbeddingService::test_lazy_initialization
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_encode_one_returns_384_floats
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_encode_batch_returns_2x384
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_encode_one_empty_text
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_encode_batch_empty_list
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_encode_batch_mixed_valid_empty
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_legacy_encode_method_still_works
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_no_similarity_methods_exist
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_no_indexing_imports
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_enable_index_ignored
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_pure_vector_generation_contract
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_batch_size_from_config
PASSED tmp/tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_device_from_config
PASSED tmp/tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_default_model_works
PASSED tmp/tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_model_switch_to_all_minilm_l6_v2
PASSED tmp/tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_invalid_model_raises_error
PASSED tmp/tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_extra_models_allowlist
PASSED tmp/tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_config_validation_error_messages
PASSED tmp/tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_model_switch_preserves_functionality
PASSED tmp/tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_model_switch_with_batch_processing
PASSED tmp/tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_model_switch_with_preprocessing
PASSED tmp/tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_embedding_dimensions_consistency
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_remove_dates_and_ids_by_default
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_remove_various_date_formats
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_remove_various_id_formats
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_fold_spaces
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_preserve_spaces_when_fold_spaces_false
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_empty_text_handling
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_only_dates_and_ids
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_extract_name_only_method
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_include_attrs_future_flag
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_complex_text_processing
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_organization_names
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_mixed_language_text
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_whitespace_normalization
PASSED tmp/tests/unit/test_embedding_preprocessor.py::TestEmbeddingPreprocessor::test_case_insensitive_removal
PASSED tmp/tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_multilingual_name_triangle_similarity
PASSED tmp/tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_name_vs_noise_low_similarity
PASSED tmp/tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_organization_vs_personal_names_distinction
PASSED tmp/tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_empty_and_whitespace_handling
PASSED tmp/tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_consistency_across_calls
PASSED tmp/tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_embedding_dimensions_consistency
PASSED tmp/tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_preprocessing_removes_dates_ids
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_service_initialization
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_ukrainian_name_analysis
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_russian_name_analysis
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_language_detection_priority
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_mixed_language_handling
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_fallback_behavior
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_advanced_normalization_pipeline
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_language_auto_detection
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_morphology_consistency
PASSED tmp/tests/unit/test_integration_morphology.py::TestMorphologyIntegration::test_error_recovery
PASSED tmp/tests/unit/test_lang_canary_random_noise.py::TestLanguageDetectionCanaryRandomNoise::test_random_noise_low_confidence
PASSED tmp/tests/unit/test_lang_canary_random_noise.py::TestLanguageDetectionCanaryRandomNoise::test_noise_patterns_detection
PASSED tmp/tests/unit/test_lang_canary_random_noise.py::TestLanguageDetectionCanaryRandomNoise::test_edge_case_noise_robustness
PASSED tmp/tests/unit/test_lang_canary_random_noise.py::TestLanguageDetectionCanaryRandomNoise::test_reproducible_randomness
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_russian_text_detection
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_ukrainian_text_detection
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_english_text_detection
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_mixed_language_detection
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_unknown_text_detection
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_empty_text_detection
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_whitespace_text_detection
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_ukrainian_specific_characters
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_russian_specific_characters
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_mixed_language_close_ratios
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_config_thresholds_behavior
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_confidence_calculation
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_result_methods
PASSED tmp/tests/unit/test_lang_config_contract.py::TestLanguageConfigContract::test_detailed_analysis_structure
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_short_text_edge_cases
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_acronym_detection_with_confidence_penalty
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_uppercase_text_confidence_penalty
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_numeric_punctuation_dominance
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_normal_text_not_affected
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_mixed_case_acronyms
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_long_words_not_affected
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_edge_case_confidence_ranges
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_empty_and_whitespace_text
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_special_characters_and_unicode
PASSED tmp/tests/unit/test_lang_edge_cases.py::TestLanguageDetectionEdgeCases::test_threshold_boundary_cases
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_ukrainian_priority_detection
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_logic_ambiguous_text
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_empty_text_handling
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_whitespace_only_text
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_quick_patterns_english
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_quick_patterns_russian
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_quick_patterns_ukrainian
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_langdetect_fallback
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_langdetect_exception_handling
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_cyrillic_ukrainian_specific
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_cyrillic_russian_specific
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_cyrillic_patterns
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_latin_only
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_batch_detection
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_detection_statistics
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_reset_statistics
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_supported_languages
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_is_language_supported
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_add_language_mapping
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_add_invalid_language_mapping
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_confidence_scores_limit
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_language_mapping_coverage
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_no_fallback_option
PASSED tmp/tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_original_detected_language_preservation
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetector::test_create_empty_result
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetector::test_detect_name_signals_empty
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetector::test_detect_name_signals_full_name
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetector::test_detect_name_signals_structure
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetector::test_detect_names_basic
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetector::test_detect_names_empty
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetector::test_detect_names_none
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetector::test_initialization
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetectorIntegration::test_requirement_full_names
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetectorIntegration::test_requirement_names_and_surnames
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetectorIntegration::test_requirement_patronymic_patterns
PASSED tmp/tests/unit/test_name_detector.py::TestNameDetectorIntegration::test_requirement_surname_patterns
PASSED tmp/tests/unit/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_russian_names_no_internal_duplicates
PASSED tmp/tests/unit/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_ukrainian_names_no_internal_duplicates
PASSED tmp/tests/unit/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_english_names_no_internal_duplicates
PASSED tmp/tests/unit/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_no_cross_dictionary_duplicates
PASSED tmp/tests/unit/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_additional_english_names_consistency
PASSED tmp/tests/unit/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_dictionaries_statistics
PASSED tmp/tests/unit/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_name_data_structure
PASSED tmp/tests/unit/test_orchestrator_service.py::TestUnifiedOrchestrator::test_process_with_smart_filter_skip
PASSED tmp/tests/unit/test_orchestrator_service.py::TestUnifiedOrchestrator::test_process_with_validation_error
PASSED tmp/tests/unit/test_orchestrator_service.py::TestUnifiedOrchestrator::test_process_with_language_detection_failure
PASSED tmp/tests/unit/test_orchestrator_service.py::TestUnifiedOrchestrator::test_process_with_normalization_failure
PASSED tmp/tests/unit/test_orchestrator_service.py::TestUnifiedOrchestrator::test_orchestrator_initialization
PASSED tmp/tests/unit/test_orchestrator_service.py::TestUnifiedOrchestrator::test_orchestrator_without_optional_services
PASSED tmp/tests/unit/test_orchestrator_service_fixed.py::TestUnifiedOrchestrator::test_process_basic_functionality
PASSED tmp/tests/unit/test_orchestrator_service_fixed.py::TestUnifiedOrchestrator::test_process_with_smart_filter_skip
PASSED tmp/tests/unit/test_orchestrator_service_fixed.py::TestUnifiedOrchestrator::test_process_with_validation_error
PASSED tmp/tests/unit/test_orchestrator_service_fixed.py::TestUnifiedOrchestrator::test_process_with_language_detection_failure
PASSED tmp/tests/unit/test_orchestrator_service_fixed.py::TestUnifiedOrchestrator::test_process_with_normalization_failure
PASSED tmp/tests/unit/test_orchestrator_service_fixed.py::TestUnifiedOrchestrator::test_orchestrator_initialization
PASSED tmp/tests/unit/test_orchestrator_service_fixed.py::TestUnifiedOrchestrator::test_orchestrator_without_optional_services
PASSED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_process_language_service_failure
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_name_pattern_creation
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_generate_patterns_basic
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_generate_patterns_empty_text
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_generate_patterns_ukrainian
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_generate_patterns_compound_name
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_pattern_confidence_scoring
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_pattern_types_variety
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_pattern_metadata_inclusion
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_special_characters_handling
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_multilingual_pattern_generation
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_performance_with_long_names
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_error_handling_invalid_language
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_pattern_uniqueness
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_confidence_ordering
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_empty_and_whitespace_handling
PASSED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_numeric_and_special_content
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_format_processing_result_with_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_format_processing_result_without_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_format_error_response
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_extract_token_variants
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_extract_token_variants_empty_trace
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_get_risk_level_with_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_get_risk_level_without_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_get_risk_score_with_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_get_risk_score_without_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_get_decision_reasons_with_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_get_decision_reasons_without_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_get_decision_details_with_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_get_decision_details_without_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_extract_smart_filter_info_with_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_extract_smart_filter_info_without_decision
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_extract_signals_summary_with_data
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_extract_signals_summary_without_data
PASSED tmp/tests/unit/test_response_formatter.py::TestResponseFormatter::test_response_structure_completeness
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_python_version_valid
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_python_version_invalid
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_poetry_available
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_poetry_not_available
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_dependencies_success
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_dependencies_failure
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_dependencies_exception
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_run_service_success
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_run_service_no_service_file
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_run_service_exception
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_main_all_checks_pass
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_main_python_check_fails
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_main_poetry_check_fails
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_main_dependencies_check_fails
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_main_models_check_fails
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScriptIntegration::test_script_imports_successfully
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScriptIntegration::test_script_has_main_guard
PASSED tmp/tests/unit/test_run_service_script.py::TestRunServiceScriptIntegration::test_checks_list_structure
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_word_basic
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_gender_detection_male
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_gender_detection_female
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_declensions_generation
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_diminutives_generation
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_variants_generation
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_transliterations_generation
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_language_detection
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_is_russian_name
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_name_complexity
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_phonetic_variants
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_regional_transliterations
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_basic
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_with_language
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_empty_input
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_none_input
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_whitespace_input
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_special_characters
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_numbers
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_mixed_case
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_very_long
PASSED tmp/tests/unit/test_russian_morphology_unit.py::TestRussianMorphologyAnalyzer::test_analyze_name_unicode_characters
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_analyze_payment_description
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_date_only_text
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_exclusion_patterns
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_initialization
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_initialization_with_terrorism_detection
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_language_composition_analysis
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_language_detection
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_make_smart_decision
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_should_process_text_empty
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_should_process_text_with_signals
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_text_normalization
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterIntegration::test_company_detection
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterIntegration::test_person_name_detection
PASSED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterIntegration::test_safe_content_handling
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_1_ac_disabled_petrov_no_context
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_2_ac_enabled_with_document_pattern
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_3_ac_enabled_nasa_no_trigger
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_4_ac_enabled_petrov_with_context
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_5_ac_verification_in_name_detector
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_6_confidence_comparison_with_without_ac
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_7_adapter_integration_ac_disabled
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_8_adapter_integration_ac_enabled
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_9_config_flag_behavior
PASSED tmp/tests/unit/test_smartfilter_aho.py::TestSmartFilterAhoCorasickIntegration::test_scenario_10_edge_cases
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_template_creation
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_entity_template_initialization
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_entity_template_to_dict
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_entity_template_to_dict_with_numpy_embeddings
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_get_search_keywords
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_get_high_confidence_patterns
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_build_templates_batch
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_build_templates_batch_with_embeddings
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_build_templates_batch_error_handling
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_calculate_complexity_score
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_get_templates_statistics
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_get_templates_statistics_empty
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_export_templates_for_aho_corasick
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_template_builder_error_handling
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_complexity_score_edge_cases
PASSED tmp/tests/unit/test_template_builder.py::TestTemplateBuilder::test_template_post_init
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_create_empty_result
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_detect_activity_patterns
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_detect_financing_patterns
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_detect_organization_patterns
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_detect_terrorism_signals_empty
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_detect_terrorism_signals_excluded_content
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_detect_weapons_patterns
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_determine_risk_level
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_extract_detected_indicators
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_get_risk_assessment
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_initialization
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetector::test_is_excluded_content
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetectorSafety::test_defensive_purpose_only
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetectorSafety::test_false_positive_prevention
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetectorSafety::test_pattern_weights_balance
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetectorSafety::test_risk_escalation_thresholds
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetectorIntegration::test_comprehensive_threat_assessment
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetectorIntegration::test_defensive_system_requirements
PASSED tmp/tests/unit/test_terrorism_detector.py::TestTerrorismDetectorIntegration::test_risk_assessment_workflow
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u0421\u0435\u0440\u0433\u0456\u0439-masc-uk]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u041e\u043b\u0435\u043d\u0430-femn-uk]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u0412\u043e\u043b\u043e\u0434\u0438\u043c\u0438\u0440-masc-uk]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u0414\u0430\u0440\u0456\u044f-femn-uk]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u041f\u0435\u0442\u0440\u043e-masc-uk]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u0410\u043d\u043d\u0430-femn-uk]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u041c\u0438\u0445\u0430\u0439\u043b\u043e-masc-uk]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_detection_for_ukrainian_names[\u041a\u0430\u0442\u0435\u0440\u0438\u043d\u0430-femn-uk]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_diminutives_generation
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_transliteration_generation
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_surname_endings[\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u043e-expected_endings0]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_surname_endings[\u0406\u0432\u0430\u043d\u0435\u043d\u043a\u043e-expected_endings1]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_surname_endings[\u041c\u0435\u043b\u044c\u043d\u0438\u043a-expected_endings2]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_surname_endings[\u0428\u0435\u0432\u0447\u0435\u043d\u043a\u043e-expected_endings3]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_edge_cases_handling[-expected_result0]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_edge_cases_handling[\u0410-expected_result1]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_edge_cases_handling[\u0421\u0435\u0440\u0433\u0456\u0439-expected_result2]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u0421\u0435\u0440\u0433\u0456\u0439-expected_ukrainian_chars0]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u041e\u043b\u0435\u043a\u0441\u0456\u0439-expected_ukrainian_chars1]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u0412\u043e\u043b\u043e\u0434\u0438\u043c\u0438\u0440-expected_ukrainian_chars2]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u0414\u0430\u0440\u0456\u044f-expected_ukrainian_chars3]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_ukrainian_character_detection[\u041f\u0435\u0442\u0440\u043e-expected_ukrainian_chars4]
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_name_complexity_analysis
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_correction_logic
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_basic_functionality
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_empty_name_handling
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_short_name_handling
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_auto_language_detection
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_pymorphy3_initialization_success
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_gender_exceptions_dictionary
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_phonetic_variants_generation
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_regional_transliterations
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_get_all_forms_method
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_is_ukrainian_name_detection
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_complexity_level_calculation
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_basic_transliteration
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_language_detection_internal
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_pymorphy_analysis_failure_handling
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_generate_pymorphy_declensions
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_extract_gender_with_name_tags
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_extract_gender_by_endings
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_apply_regional_transliteration
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_whitespace_name_handling
PASSED tmp/tests/unit/test_ukrainian_morphology.py::TestUkrainianMorphologyAnalyzer::test_none_name_handling
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_word_gender_detection_petro
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_word_gender_detection_daria
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_word_unknown_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_word_short_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_lemma_special_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_lemma_unknown_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_is_known_word_special_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_is_known_word_unknown_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_gender_special_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_gender_unknown_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_variants_special_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_variants_unknown_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_diminutives_special_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_get_diminutives_unknown_name
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_basic_functionality
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_with_language_detection
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_empty_string
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_whitespace_only
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_none_input
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_special_characters
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_numbers
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_mixed_case
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_very_long
PASSED tmp/tests/unit/test_ukrainian_morphology_unit.py::TestUkrainianMorphologyAnalyzer::test_analyze_name_unicode_characters
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_aggressive_normalization_sao_paulo
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_cyrillic_processing
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_empty_text_handling
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_none_text_handling
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_complex_mappings_applied
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_confidence_calculation
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_batch_normalization
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_similarity_score
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_encoding_issues_detection
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_preserve_chars_functionality
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_unicode_normalization_nfd_nfkc
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_ascii_folding_failure_handling
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_length_metadata
PASSED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_german_umlauts_handling
PASSED tmp/tests/unit/test_unified_contracts.py::TestTokenTrace::test_token_trace_creation
PASSED tmp/tests/unit/test_unified_contracts.py::TestTokenTrace::test_token_trace_with_morphology
PASSED tmp/tests/unit/test_unified_contracts.py::TestTokenTrace::test_token_trace_serialization
PASSED tmp/tests/unit/test_unified_contracts.py::TestNormalizationResult::test_normalization_result_basic
PASSED tmp/tests/unit/test_unified_contracts.py::TestNormalizationResult::test_normalization_result_with_metadata
PASSED tmp/tests/unit/test_unified_contracts.py::TestNormalizationResult::test_normalization_result_serialization
PASSED tmp/tests/unit/test_unified_contracts.py::TestSignalsContracts::test_signals_person
PASSED tmp/tests/unit/test_unified_contracts.py::TestSignalsContracts::test_signals_organization
PASSED tmp/tests/unit/test_unified_contracts.py::TestSignalsContracts::test_signals_result
PASSED tmp/tests/unit/test_unified_contracts.py::TestSmartFilterResult::test_smart_filter_result_basic
PASSED tmp/tests/unit/test_unified_contracts.py::TestSmartFilterResult::test_smart_filter_classifications
PASSED tmp/tests/unit/test_unified_contracts.py::TestUnifiedProcessingResult::test_unified_result_complete
PASSED tmp/tests/unit/test_unified_contracts.py::TestUnifiedProcessingResult::test_unified_result_serialization
PASSED tmp/tests/unit/test_unified_contracts.py::TestUnifiedProcessingResult::test_unified_result_backward_compatibility
PASSED tmp/tests/unit/test_unified_contracts.py::TestProcessingContext::test_processing_context_basic
PASSED tmp/tests/unit/test_unified_contracts.py::TestContractCompatibility::test_contract_chain_compatibility
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_transliteration_variants_grigoriy
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_compound_surname_processing
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_basic_transliteration_functionality
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_multiple_transliteration_standards
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_phonetic_variants_generation
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_visual_similarities_generation
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_typo_variants_generation
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_comprehensive_variants_generation
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_empty_text_handling
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_none_text_handling
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_max_variants_limit
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_language_specific_processing
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_find_best_matches_functionality
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_similarity_calculation
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_keyboard_layout_variants
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_morphological_variants_integration
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_morphological_variants_mocked
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_processing_statistics
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_duplicate_removal
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_case_preservation_and_normalization
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_special_characters_handling
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_performance_with_long_names
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_error_handling_in_transliteration
PASSED tmp/tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_variant_scores_match_config
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_remove_stop_words_false
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_remove_stop_words_true
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_preserve_names_false
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_preserve_names_true
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_enable_advanced_features_false_slavic
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_enable_advanced_features_true_slavic
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_enable_advanced_features_false_english
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_enable_advanced_features_true_english
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_initial_cleanup_still_works_with_flags
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_all_flags_false
PASSED tmp/tests/unit/text_processing/test_flags_behavior.py::TestFlagsBehavior::test_all_flags_true
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_ukrainian_priority_detection
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_logic_ambiguous_text
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_empty_text_handling
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_whitespace_only_text
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_quick_patterns_english
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_quick_patterns_russian
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_quick_patterns_ukrainian
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_langdetect_fallback
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_langdetect_exception_handling
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_cyrillic_ukrainian_specific
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_cyrillic_russian_specific
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_cyrillic_patterns
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_fallback_latin_only
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_batch_detection
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_detection_statistics
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_reset_statistics
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_supported_languages
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_is_language_supported
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_add_language_mapping
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_add_invalid_language_mapping
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_confidence_scores_limit
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_language_mapping_coverage
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_no_fallback_option
PASSED tmp/tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_original_detected_language_preservation
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u041e\u043f\u043b\u0430\u0442\u0430 \u0437\u0430 \u043f\u043e\u0441\u043b\u0443\u0433\u0438, \u043f\u043b\u0430\u0442\u043d\u0438\u043a \u041f\u0435\u0442\u0440\u0438\u043a \u041f.-\u041f\u0435\u0442\u0440\u043e \u041f.]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u0414\u043b\u044f \u041f\u0435\u0442\u0440\u0443\u0441\u044f \u0406\u0432\u0430\u043d\u043e\u0432\u0430, \u0437\u0430 \u0440\u0435\u043c\u043e\u043d\u0442-\u041f\u0435\u0442\u0440\u043e \u0406\u0432\u0430\u043d\u043e\u0432]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u041f\u0435\u0440\u0435\u043a\u0430\u0437 \u0432\u0456\u0434 \u0412\u043e\u0432\u0447\u0438\u043a\u0430 \u0417\u0435\u043b\u0435\u043d\u0441\u044c\u043a\u043e\u0433\u043e \u0412. \u041e.-\u0412\u043e\u043b\u043e\u0434\u0438\u043c\u0438\u0440 \u0417\u0435\u043b\u0435\u043d\u0441\u044c\u043a\u0438\u0439 \u0412. \u041e.]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u041f\u043e\u0434\u0430\u0440\u0443\u043d\u043e\u043a \u0434\u043b\u044f \u0414\u0430\u0448\u0435\u043d\u044c\u043a\u0438 \u041a\u0432\u0456\u0442\u043a\u043e\u0432\u043e\u0457-\u0414\u0430\u0440\u0456\u044f \u041a\u0432\u0456\u0442\u043a\u043e\u0432\u0430]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u0412\u0456\u0434 \u0421\u0430\u0448\u043a\u0430 \u041f\u043e\u043b\u043e\u0436\u0438\u043d\u0441\u044c\u043a\u043e\u0433\u043e \u0437\u0430 \u043a\u0432\u0438\u0442\u043a\u0438-\u041e\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041f\u043e\u043b\u043e\u0436\u0438\u043d\u0441\u044c\u043a\u0438\u0439]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u0414\u044f\u043a\u0443\u0454\u043c\u043e \u0421\u0435\u0440\u0433\u0456\u0454\u0432\u0456 \u0416\u0430\u0434\u0430\u043d\u0443 \u0437\u0430 \u0442\u0432\u043e\u0440\u0447\u0456\u0441\u0442\u044c-\u0421\u0435\u0440\u0433\u0456\u0439 \u0416\u0430\u0434\u0430\u043d]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u041f\u043e\u0434\u0430\u0440\u0443\u043d\u043e\u043a \u0434\u043b\u044f \u041e\u043a\u0441\u0430\u043d\u0438 \u0417\u0430\u0431\u0443\u0436\u043a\u043e-\u041e\u043a\u0441\u0430\u043d\u0430 \u0417\u0430\u0431\u0443\u0436\u043a\u043e]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u041f\u043b\u0442\u0456\u0436 \u0432\u0456\u0434 \u0412'\u044f\u0447\u0435\u0441\u043b\u0430\u0432\u0430 \u0432\u0430\u043a\u0430\u0440\u0447\u0443\u043a\u0430 (\u043e\u043a\u0435\u0430\u043d \u0435\u043b\u044c\u0437\u0438)-\u0412'\u044f\u0447\u0435\u0441\u043b\u0430\u0432 \u0412\u0430\u043a\u0430\u0440\u0447\u0443\u043a]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u041f\u0435\u0440\u0435\u043a\u0430\u0437 \u041e\u041b\u0415\u0413\u0423 \u0421\u041a\u0420\u0418\u041f\u0426\u0406-\u041e\u043b\u0435\u0433 \u0421\u043a\u0440\u0438\u043f\u043a\u0430]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_russian_full_normalization[\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043e\u0442 \u0421\u0430\u0448\u0438 \u041f\u0443\u0448\u043a\u0438\u043d\u0430 \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u043e\u0432\u0438\u0447\u0430-\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041f\u0443\u0448\u043a\u0438\u043d \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u043e\u0432\u0438\u0447]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_russian_full_normalization[\u041e\u043f\u043b\u0430\u0442\u0430 \u0434\u043b\u044f \u0412\u043e\u043b\u043e\u0434\u0438 \u0412\u044b\u0441\u043e\u0446\u043a\u043e\u0433\u043e-\u0412\u043b\u0430\u0434\u0438\u043c\u0438\u0440 \u0412\u044b\u0441\u043e\u0446\u043a\u0438\u0439]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_russian_full_normalization[\u041f\u043b\u0430\u0442\u0451\u0436 \u043e\u0442 \u0414\u0438\u043c\u044b \u041c\u0435\u0434\u0432\u0435\u0434\u0435\u0432\u0430-\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u041c\u0435\u0434\u0432\u0435\u0434\u0435\u0432]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_russian_full_normalization[\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u0441\u0440\u0435\u0434\u0441\u0442\u0432 \u0418\u0432\u0430\u043d\u0443 \u0411\u0443\u043d\u0438\u043d\u0443-\u0418\u0432\u0430\u043d \u0411\u0443\u043d\u0438\u043d]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_russian_full_normalization[\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0434\u043b\u044f \u0415\u0441\u0435\u043d\u0438\u043d\u0430 \u0421. \u0410.-\u0415\u0441\u0435\u043d\u0438\u043d \u0421. \u0410.]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_english_full_normalization[Payment from John Fitzgerald Kennedy-John Fitzgerald Kennedy]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_english_full_normalization[Transfer to Stephen E. King for services-Stephen E. King]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_english_full_normalization[For Mr. Sherlock Holmes, Baker st. 221b-Sherlock Holmes]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_english_full_normalization[Refund to Ms. Joanna Rowling-Joanna Rowling]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_english_full_normalization[From Bill Gates for charity-William Gates]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_english_full_normalization[For Liz Truss, former PM-Elizabeth Truss]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_english_full_normalization[Payment from Mike Johnson-Michael Johnson]
PASSED tmp/tests/unit/text_processing/test_normalization_logic.py::test_english_full_normalization[For BARACK H. OBAMA, invoice 123-Barack H. Obama]
PASSED tmp/tests/unit/text_processing/test_normalization_result_fields.py::TestNormalizationResultFields::test_normalization_result_metadata_fields
PASSED tmp/tests/unit/text_processing/test_normalization_result_fields.py::TestNormalizationResultFields::test_normalization_result_tokens
PASSED tmp/tests/unit/text_processing/test_normalization_result_fields.py::TestNormalizationResultFields::test_normalization_result_extra_fields_allowed
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_initialization
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_english_text
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_russian_text
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_ukrainian_text
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_with_fallback
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_with_auto_language_detection
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_person_names
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_russian_names
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_ukrainian_names
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_with_initials
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_empty_text
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_whitespace_only
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_with_special_characters
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_with_numbers
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_sync_method
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_async_method
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_with_flags
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_error_handling
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_result_structure
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_with_complex_text
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationServiceConfiguration::test_service_has_required_attributes
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationServiceConfiguration::test_service_has_required_methods
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationServiceConfiguration::test_morph_analyzers_initialization
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationServiceConfiguration::test_name_dictionaries_initialization
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationServiceConfiguration::test_diminutive_maps_initialization
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationResult::test_normalization_result_creation
PASSED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationResult::test_normalization_result_error_case
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_initialization
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_ukrainian_text
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_person_names
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_russian_names
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_ukrainian_names
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_with_initials
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_empty_text
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_whitespace_only
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_with_numbers
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_error_handling
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_result_structure
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_with_complex_text
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationServiceConfiguration::test_service_has_required_attributes
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationServiceConfiguration::test_service_has_required_methods
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationServiceConfiguration::test_morph_analyzers_initialization
PASSED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationServiceConfiguration::test_name_dictionaries_initialization
PASSED tmp/tests/unit/text_processing/test_org_acronyms_filter.py::TestOrgAcronymsFilter::test_org_acronyms_are_tagged_as_unknown
PASSED tmp/tests/unit/text_processing/test_org_acronyms_filter.py::TestOrgAcronymsFilter::test_org_acronyms_not_in_normalized_output
PASSED tmp/tests/unit/text_processing/test_org_acronyms_filter.py::TestOrgAcronymsFilter::test_person_tokens_survive
PASSED tmp/tests/unit/text_processing/test_org_acronyms_filter.py::TestOrgAcronymsFilter::test_various_org_acronyms_are_filtered
PASSED tmp/tests/unit/text_processing/test_org_acronyms_filter.py::TestOrgAcronymsFilter::test_org_acronyms_case_insensitive
PASSED tmp/tests/unit/text_processing/test_org_acronyms_filter.py::TestOrgAcronymsFilter::test_org_acronyms_excluded_from_positional_fallbacks
PASSED tmp/tests/unit/text_processing/test_org_acronyms_filter.py::TestOrgAcronymsFilter::test_mixed_content_with_org_acronyms
PASSED tmp/tests/unit/text_processing/test_org_acronyms_filter.py::TestOrgAcronymsFilter::test_org_acronyms_constant_contains_expected_values
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_multi_initial_splitting
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_triple_initial_splitting
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_enhanced_patronymic_patterns_male
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_enhanced_patronymic_patterns_female
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_enhanced_surname_patterns_enko
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_enhanced_surname_patterns_ov_ova
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_enhanced_surname_patterns_sky_ska
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_new_surname_patterns_yan
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_new_surname_patterns_dze
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_conservative_unknown_tagging
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_positional_heuristics_still_work
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_integration_with_organization_roles
PASSED tmp/tests/unit/text_processing/test_role_tagging_extended.py::TestExtendedRoleTagging::test_sentence_with_org_and_people
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_aggressive_normalization_sao_paulo
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_cyrillic_processing
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_empty_text_handling
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_none_text_handling
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_complex_mappings_applied
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_confidence_calculation
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_batch_normalization
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_similarity_score
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_encoding_issues_detection
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_preserve_chars_functionality
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_unicode_normalization_nfd_nfkc
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_ascii_folding_failure_handling
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_unicode_normalization_failure_handling
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_length_metadata
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_case_normalization
PASSED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_german_umlauts_handling
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_transliteration_variants_grigoriy
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_compound_surname_processing
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_basic_transliteration_functionality
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_multiple_transliteration_standards
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_phonetic_variants_generation
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_visual_similarities_generation
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_typo_variants_generation
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_comprehensive_variants_generation
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_empty_text_handling
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_none_text_handling
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_max_variants_limit
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_language_specific_processing
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_find_best_matches_functionality
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_similarity_calculation
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_keyboard_layout_variants
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_morphological_variants_integration
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_morphological_variants_mocked
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_processing_statistics
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_duplicate_removal
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_case_preservation_and_normalization
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_special_characters_handling
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_performance_with_long_names
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_error_handling_in_transliteration
PASSED tmp/tests/unit/text_processing/test_variant_generation_service.py::TestVariantGenerationService::test_variant_scores_match_config
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_ukrainian_apostrophes_unification
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_compound_names_normalization
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_irish_names_apostrophes
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_company_quotes_unification
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_mixed_apostrophes_in_text
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_preserve_meaningful_punctuation
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_confidence_calculation_with_replacements
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_batch_normalization_consistency
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_similarity_after_normalization
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_encoding_recovery_with_apostrophes
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_performance_with_many_replacements
PASSED tmp/tests/unit/unicode/test_apostrophe_normalization.py::TestApostropheNormalization::test_edge_cases_empty_and_none
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_initialization
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_normalize_text_basic
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_normalize_text_cyrillic_mapping
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_normalize_text_latin_diacritics
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_normalize_text_aggressive_mode
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_normalize_text_mixed_scripts
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_unicode_nfc_normalization
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_encoding_recovery
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_whitespace_normalization
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_invisible_characters_removal
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_homoglyph_handling
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_preserve_cyrillic_characters
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_edge_cases
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_long_text_handling
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_character_mapping_completeness
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_normalization_consistency
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_normalization_with_numbers_and_punctuation
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_different_normalization_forms
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeService::test_rtl_and_bidi_text
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeServiceIntegration::test_real_world_name_normalization
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeServiceIntegration::test_payment_text_normalization
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeServiceIntegration::test_normalization_preserves_structure
PASSED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeServiceIntegration::test_aggressive_vs_conservative_mode[False]
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_basic_set_get
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_get_nonexistent_key
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_lru_eviction
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_ttl_expiration
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_statistics
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_get_or_set_cache_hit
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_get_or_set_cache_miss
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_clear_cache
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_exists_method
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_exists_with_expired_key
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_touch_method
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_touch_nonexistent_key
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_cleanup_expired
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_set_max_size
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_get_keys
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_memory_usage_estimation
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_generate_key_method
PASSED tmp/tests/unit/utilities/test_cache_service.py::TestCacheService::test_lru_logic_with_access
PASSED tmp/tests/unit/utilities/test_canary_overfit.py::TestCanaryOverfit::test_english_context_words
PASSED tmp/tests/unit/utilities/test_canary_overfit.py::TestCanaryOverfit::test_positional_heuristics_blocked_for_context_words
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestUnicodeServiceEdgeCases::test_normalize_text_with_homoglyphs
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestUnicodeServiceEdgeCases::test_normalize_text_with_zero_width_characters
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestUnicodeServiceEdgeCases::test_normalize_text_with_surrogate_pairs
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestUnicodeServiceEdgeCases::test_normalize_text_with_combining_characters
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestUnicodeServiceEdgeCases::test_normalize_text_with_malformed_utf8
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestUnicodeServiceEdgeCases::test_normalize_text_with_rtl_text
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestLanguageDetectionEdgeCases::test_detect_language_very_short_text
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestLanguageDetectionEdgeCases::test_detect_language_numbers_only
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestLanguageDetectionEdgeCases::test_detect_language_symbols_only
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestLanguageDetectionEdgeCases::test_detect_language_mixed_scripts
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestLanguageDetectionEdgeCases::test_detect_language_code_snippets
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestLanguageDetectionEdgeCases::test_detect_language_with_html_tags
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCacheServiceEdgeCases::test_cache_with_complex_objects
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCacheServiceEdgeCases::test_cache_key_collision_with_similar_keys
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCacheServiceEdgeCases::test_cache_overflow_handling
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCacheServiceEdgeCases::test_cache_with_zero_ttl
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCacheServiceEdgeCases::test_cache_with_negative_ttl
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCustomExceptionHandling::test_validation_api_error_creation
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCustomExceptionHandling::test_validation_api_error_with_details
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCustomExceptionHandling::test_internal_server_error_creation
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCustomExceptionHandling::test_service_unavailable_error_creation
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestCustomExceptionHandling::test_exception_chaining
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestResourceCleanupAndMemoryManagement::test_service_cleanup_on_deletion
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestResourceCleanupAndMemoryManagement::test_large_object_caching_memory_usage
PASSED tmp/tests/unit/utilities/test_edge_cases_comprehensive.py::TestResourceCleanupAndMemoryManagement::test_concurrent_access_resource_safety
PASSED tmp/tests/unit/utilities/test_flags_ab_strict.py::test_enable_advanced_features_false_no_morph
PASSED tmp/tests/unit/utilities/test_flags_ab_strict.py::test_preserve_names_false_splits_apostrophe
PASSED tmp/tests/unit/utilities/test_flags_ab_strict.py::test_remove_stop_words_false_keeps_stopwords
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_valid_text_processing
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_zero_width_character_removal
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_control_character_removal
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_suspicious_pattern_detection
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_strict_mode_blocking
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_text_length_limiting
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_empty_text_handling
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_unicode_normalization
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_sanctions_input_validation
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_sanctions_input_missing_required_field
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_sanctions_input_with_malicious_content
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_suspicion_analysis_high_zero_width
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_non_string_input_raises_error
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_whitespace_normalization
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_url_encoding_detection
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_html_entity_detection
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_unicode_normalization_failure
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_input_validator_global_instance
PASSED tmp/tests/unit/utilities/test_input_validation.py::TestValidationResult::test_validation_result_creation
PASSED tmp/tests/unit/utilities/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_russian_names_no_internal_duplicates
PASSED tmp/tests/unit/utilities/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_ukrainian_names_no_internal_duplicates
PASSED tmp/tests/unit/utilities/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_english_names_no_internal_duplicates
PASSED tmp/tests/unit/utilities/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_no_cross_dictionary_duplicates
PASSED tmp/tests/unit/utilities/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_additional_english_names_consistency
PASSED tmp/tests/unit/utilities/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_dictionaries_statistics
PASSED tmp/tests/unit/utilities/test_name_dictionaries_validation.py::TestNameDictionariesValidation::test_name_data_structure
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_unified_pattern_creation
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_generate_patterns_basic
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_generate_patterns_empty_text
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_generate_patterns_ukrainian
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_generate_patterns_compound_name
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_pattern_confidence_scoring
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_pattern_types_variety
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_pattern_metadata_inclusion
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_special_characters_handling
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_case_sensitivity_handling
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_multilingual_pattern_generation
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_performance_with_long_names
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_error_handling_invalid_language
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_pattern_uniqueness
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_confidence_ordering
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_empty_and_whitespace_handling
PASSED tmp/tests/unit/utilities/test_pattern_service.py::TestUnifiedPatternService::test_numeric_and_special_content
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_initialization
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_initialize_success
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_initialize_failure
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_and_sanitize_not_initialized
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_and_sanitize_success
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_and_sanitize_invalid_input
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_and_sanitize_exception_handling
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_and_sanitize_empty_text
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_and_sanitize_long_text
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_and_sanitize_none_input
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_with_risk_levels
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_with_blocked_patterns
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_validate_with_warnings
PASSED tmp/tests/unit/validation/test_validation_service.py::TestValidationService::test_interface_compliance
SKIPPED [1] tests/performance/test_embeddings_perf.py:170: psutil not available for memory monitoring
SKIPPED [1] tests/unit/core/test_decision_engine.py:204: Feature not implemented
SKIPPED [1] tests/unit/core/test_decision_engine.py:222: Feature not implemented
SKIPPED [1] tests/unit/core/test_decision_engine.py:238: Feature not implemented
SKIPPED [1] tests/unit/core/test_decision_engine.py:260: Feature not implemented
SKIPPED [1] tests/unit/core/test_decision_engine.py:281: Feature not implemented
SKIPPED [1] tests/unit/morphology/test_integration_morphology.py:19: Test expects AdvancedNormalizationService which no longer exists
SKIPPED [1] tests/unit/morphology/test_integration_morphology.py:36: Test expects AdvancedNormalizationService which no longer exists
SKIPPED [1] tests/unit/morphology/test_integration_morphology.py:54: Test expects AdvancedNormalizationService which no longer exists
SKIPPED [1] tests/unit/morphology/test_integration_morphology.py:93: Test expects AdvancedNormalizationService which no longer exists
SKIPPED [1] tests/unit/morphology/test_integration_morphology.py:119: Test expects AdvancedNormalizationService which no longer exists
SKIPPED [1] tests/unit/morphology/test_integration_morphology.py:136: Test expects AdvancedNormalizationService which no longer exists
SKIPPED [1] tests/unit/morphology/test_integration_morphology.py:151: Test expects AdvancedNormalizationService which no longer exists
SKIPPED [1] tests/unit/morphology/test_integration_morphology.py:166: Test expects AdvancedNormalizationService which no longer exists
SKIPPED [1] tests/unit/morphology/test_integration_morphology.py:182: Test expects AdvancedNormalizationService which no longer exists
FAILED tmp/tests/integration/test_e2e_sanctions_screening.py::TestE2ESanctionsScreening::test_russian_person_with_documents
FAILED tmp/tests/integration/test_e2e_sanctions_screening.py::TestE2ESanctionsScreening::test_ukrainian_organization_with_legal_form
FAILED tmp/tests/integration/test_e2e_sanctions_screening.py::TestE2ESanctionsScreening::test_golden_dataset_stability
FAILED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u0414\u043b\u044f \u0416\u0435\u043d\u0456 \u0413\u0430\u043b\u0438\u0447\u0430 \u0437 \u0433\u0440\u0443\u043f\u0438 O.Torvald-\u0404\u0432\u0433\u0435\u043d \u0413\u0430\u043b\u0438\u0447]
FAILED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u0417\u0443\u0441\u0442\u0440\u0456\u0447 \u0437 \u041b\u0456\u043d\u043e\u044e \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e-\u041b\u0456\u043d\u0430 \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e]
FAILED tmp/tests/integration/test_full_normalization_suite.py::test_ukrainian_full_normalization[\u0420\u043e\u0437\u043c\u043e\u0432\u043b\u044f\u0432 \u0437 \u0412\u0430\u043b\u0435\u0440\u0456\u0454\u043c \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u043c-\u0412\u0430\u043b\u0435\u0440\u0456\u0439 \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u0439]
FAILED tmp/tests/integration/test_full_normalization_suite.py::test_russian_full_normalization[\u0414\u043b\u044f \u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430]
FAILED tmp/tests/integration/test_full_normalization_suite.py::test_russian_full_normalization[\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439]
FAILED tmp/tests/integration/test_full_normalization_suite.py::test_russian_full_normalization[\u0412\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0410\u043d\u043d\u043e\u0439 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u043e\u0439-\u0410\u043d\u043d\u0430 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u0430]
FAILED tmp/tests/integration/test_full_normalization_suite.py::test_english_full_normalization[Sent to ELON MUSK for X corp-Elon Musk]
FAILED tmp/tests/integration/test_full_normalization_suite.py::test_critical_russian_normalization
FAILED tmp/tests/integration/test_gender_adjustment.py::TestGenderAdjustmentIntegration::test_ukrainian_female_name_with_patronymic
FAILED tmp/tests/integration/test_mixed_script_names.py::TestMixedScriptNames::test_ascii_names_with_cyrillic_surnames
FAILED tmp/tests/integration/test_mixed_script_names.py::TestMixedScriptNames::test_ascii_names_no_morphology
FAILED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_ukrainian_name_pipeline
FAILED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_russian_name_pipeline
FAILED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_mixed_language_text_pipeline
FAILED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_compound_name_pipeline
FAILED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_empty_text_pipeline
FAILED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_performance_pipeline
FAILED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_morphology_integration
FAILED tmp/tests/integration/test_normalization_pipeline.py::TestNormalizationPipeline::test_transliteration_integration
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[ukrainian_simple_name]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[ukrainian_full_name_with_patronymic]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[ukrainian_company_with_legal_form]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[mixed_person_and_company]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[person_with_birth_date]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[person_with_inn]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[mixed_script_names]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[noise_context_should_filter]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[quoted_company_with_person]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[hyphenated_surname]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[overfit_canary]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_pipeline_integration[full_pipeline_stress_test]
FAILED tmp/tests/integration/test_pipeline_end2end.py::TestPipelineEnd2End::test_normalization_flags_behavior
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_initials_only
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_english_initials_with_surname
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_mixed_initials_and_full_name
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_russian_organization_ooo
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_ukrainian_organization_tov
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_english_organization_llc
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_organization_with_person_name
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_multiple_organizations
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_person_and_organization_mixed
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_organization_with_quotes
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_initials_with_organization
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_multiple_legal_forms
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_organization_with_numbers
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_foreign_organization
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_initials_without_periods
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_organization_in_sentence
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_mixed_case_organization
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_organization_with_address
FAILED tmp/tests/integration/test_pipeline_initials_orgs.py::TestPipelineInitialsOrgsCase::test_no_unknown_in_normalized_output
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_english_full_name
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_english_name_with_apostrophe
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_english_hyphenated_name
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_mixed_english_ukrainian
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_mixed_english_russian
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_english_initials
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_english_name_with_title
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_transliterated_name
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_multiple_english_names
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_english_name_with_middle_initial
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_english_compound_surname
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_english_name_case_insensitive
FAILED tmp/tests/integration/test_pipeline_mixed_en.py::TestPipelineMixedEnglishCases::test_three_language_mix
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_empty_text
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_whitespace_only
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_numbers_only
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_punctuation_only
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_stop_words_only
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_random_gibberish
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_special_characters
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_emoji_only
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_very_long_text
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_mixed_scripts_nonsense
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_common_words_not_names
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_dates_and_addresses
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_currencies_and_amounts
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_technical_terms
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_medical_terms
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_country_and_city_names
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_brand_names
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_malformed_input
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_sql_injection_attempt
FAILED tmp/tests/integration/test_pipeline_negative_canaries.py::TestPipelineNegativeCanaries::test_no_unknown_tokens_in_output
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_full_name_with_patronymic
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_full_name_with_patronymic
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_female_name_with_patronymic
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_female_name_with_patronymic
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_double_surname
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_double_surname
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_name_with_initials
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_name_with_initials
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_compound_name
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_compound_name
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_name_with_apostrophe
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_name_with_apostrophe
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_multiple_ukrainian_names
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_multiple_russian_names
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_name_with_typos
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_name_with_typos
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_name_with_numbers
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_name_with_numbers
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_name_with_punctuation
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_name_with_punctuation
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_name_with_extra_spaces
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_name_with_extra_spaces
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_ukrainian_name_case_insensitive
FAILED tmp/tests/integration/test_pipeline_ru_uk_cases.py::TestPipelineRuUkCases::test_russian_name_case_insensitive
FAILED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430-ru]
FAILED tmp/tests/integration/test_role_based_normalization.py::test_role_based_slavic_normalization[\u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439-ru]
FAILED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_multiple_persons_same_surname
FAILED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_surname_variations
FAILED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_organization_legal_forms_filtering
FAILED tmp/tests/integration/test_ru_uk_sentences.py::TestRussianUkrainianSentences::test_performance_with_long_text
FAILED tmp/tests/unit/monitoring/test_metrics_basic.py::test_orchestrator_with_metrics_service
FAILED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_successful_processing_metrics
FAILED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_normalization_failure_metrics
FAILED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_variants_failure_metrics
FAILED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_embeddings_failure_metrics
FAILED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_decision_failure_metrics
FAILED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_slow_processing_metrics
FAILED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_language_detection_distribution
FAILED tmp/tests/unit/monitoring/test_orchestrator_metrics.py::TestOrchestratorMetrics::test_metrics_without_optional_services
FAILED tmp/tests/unit/test_orchestrator_service.py::TestUnifiedOrchestrator::test_process_basic_functionality
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_process_basic_functionality
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_process_with_cache_hit
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_process_with_cache_miss
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_process_with_embeddings
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_process_error_handling
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_process_batch
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_process_batch_with_exceptions
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_search_similar_names_with_embeddings
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_search_similar_names_fallback
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_analyze_text_complexity
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_get_processing_stats
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_clear_cache
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_reset_stats
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_generate_cache_key
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_update_stats
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_calculate_complexity_score
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_generate_complexity_recommendations
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_force_reprocess_ignores_cache
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_orchestrator_initialization
FAILED tmp/tests/unit/test_orchestrator_service_old.py::TestOrchestratorService::test_process_normalization_service_exception
FAILED tmp/tests/unit/test_pattern_service.py::TestPatternService::test_case_sensitivity_handling
FAILED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_spacy_models_all_available
FAILED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_spacy_models_some_missing_auto_install_success
FAILED tmp/tests/unit/test_run_service_script.py::TestRunServiceScript::test_check_spacy_models_all_missing_no_auto_install
FAILED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_service_words_cleaning
FAILED tmp/tests/unit/test_smart_filter_service.py::TestSmartFilterService::test_should_process_text_excluded
FAILED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_final_cleanup
FAILED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_unicode_normalization_failure_handling
FAILED tmp/tests/unit/test_unicode_service.py::TestUnicodeService::test_case_normalization
FAILED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u0414\u043b\u044f \u0416\u0435\u043d\u0456 \u0413\u0430\u043b\u0438\u0447\u0430 \u0437 \u0433\u0440\u0443\u043f\u0438 O.Torvald-\u0404\u0432\u0433\u0435\u043d \u0413\u0430\u043b\u0438\u0447]
FAILED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u0417\u0443\u0441\u0442\u0440\u0456\u0447 \u0437 \u041b\u0456\u043d\u043e\u044e \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e-\u041b\u0456\u043d\u0430 \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e]
FAILED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u0420\u043e\u0437\u043c\u043e\u0432\u043b\u044f\u0432 \u0437 \u0412\u0430\u043b\u0435\u0440\u0456\u0454\u043c \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u043c-\u0412\u0430\u043b\u0435\u0440\u0456\u0439 \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u0439]
FAILED tmp/tests/unit/text_processing/test_normalization_logic.py::test_ukrainian_full_normalization[\u0414\u043b\u044f \u0406\u0432\u0430\u043d\u043e\u0432\u0430-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u0430 \u0421.\u0412.-\u0406\u0432\u0430\u043d\u043e\u0432-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u043e \u0421.\u0412.]
FAILED tmp/tests/unit/text_processing/test_normalization_logic.py::test_russian_full_normalization[\u0414\u043b\u044f \u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430]
FAILED tmp/tests/unit/text_processing/test_normalization_logic.py::test_russian_full_normalization[\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439]
FAILED tmp/tests/unit/text_processing/test_normalization_logic.py::test_russian_full_normalization[\u0412\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0410\u043d\u043d\u043e\u0439 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u043e\u0439-\u0410\u043d\u043d\u0430 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u0430]
FAILED tmp/tests/unit/text_processing/test_normalization_logic.py::test_russian_full_normalization[\u0417\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u043e\u0442 \u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432\u0430 \u041c.\u042e.-\u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432 \u041c.\u042e.]
FAILED tmp/tests/unit/text_processing/test_normalization_logic.py::test_english_full_normalization[Sent to ELON MUSK for X corp-Elon Musk]
FAILED tmp/tests/unit/text_processing/test_normalization_result_fields.py::TestNormalizationResultFields::test_normalization_result_basic_serialization
FAILED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_russian_complex_text
FAILED tmp/tests/unit/text_processing/test_normalization_service.py::TestNormalizationService::test_normalize_ukrainian_complex_text
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_english_text
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_russian_text
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_with_fallback
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_with_auto_language_detection
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_with_special_characters
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_sync_method
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_async_method
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_with_flags
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_russian_complex_text
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationService::test_normalize_ukrainian_complex_text
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationServiceConfiguration::test_diminutive_maps_initialization
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationResult::test_normalization_result_creation
FAILED tmp/tests/unit/text_processing/test_normalization_service_fixed.py::TestNormalizationResult::test_normalization_result_error_case
FAILED tmp/tests/unit/text_processing/test_unicode_service.py::TestUnicodeService::test_final_cleanup
FAILED tmp/tests/unit/unicode/test_unicode_service_comprehensive.py::TestUnicodeServiceIntegration::test_aggressive_vs_conservative_mode[True]
FAILED tmp/tests/unit/utilities/test_canary_overfit.py::TestCanaryOverfit::test_context_words_never_become_names
FAILED tmp/tests/unit/utilities/test_canary_overfit.py::TestCanaryOverfit::test_ukrainian_context_words
FAILED tmp/tests/unit/utilities/test_canary_overfit.py::TestCanaryOverfit::test_russian_context_words
FAILED tmp/tests/unit/utilities/test_canary_overfit.py::TestCanaryOverfit::test_mixed_language_context_words
FAILED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_homoglyph_replacement
FAILED tmp/tests/unit/utilities/test_input_validation.py::TestInputValidator::test_suspicion_analysis_high_homoglyph_ratio
189 failed, 1502 passed, 15 skipped, 10 warnings in 285.53s (0:04:45)
