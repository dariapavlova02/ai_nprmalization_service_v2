[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [  3%]
[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[31m [  7%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31m [ 11%]
[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 15%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[33ms[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[33ms[0m[33ms[0m[33ms[0m[33ms[0m[32m.[0m[33ms[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 19%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 23%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[33ms[0m[33ms[0m[33ms[0m[32m.[0m[33ms[0m[33ms[0m[33ms[0m[33ms[0m[31m [ 27%]
[0m[33ms[0m[33ms[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 31%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 35%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 39%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 43%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 47%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 51%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 54%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 58%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 62%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 66%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 70%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 74%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 78%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[31m [ 82%]
[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[31m [ 86%]
[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31m [ 90%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 94%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[31mF[0m[31mF[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31mF[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m [ 98%]
[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m                                       [100%][0m
=================================== FAILURES ===================================
[31m[1m_______ TestNightmareScenario.test_nightmare_scenario_gnatyuk_abdullaev ________[0m
[1m[31mtests/e2e/test_nightmare_scenario.py[0m:53: in test_nightmare_scenario_gnatyuk_abdullaev
    [0m[94massert[39;49;00m result.success [95mis[39;49;00m [94mTrue[39;49;00m, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text="Przelew dla Gnatuk Abdulaeva Zhorzha, syna Rashida. O'rganizacja 'Freedom'.", l...ne, decision=None, processing_time=6.29425048828125e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestNightmareScenario.test_multilingual_nightmare _______________[0m
[1m[31mtests/e2e/test_nightmare_scenario.py[0m:126: in test_multilingual_nightmare
    [0m[94massert[39;49;00m result.success [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text="Jean-Baptiste Müller встретил Олександра Петренко-Сміт в кафе 'Zürcher Straße'"..., decision=None, processing_time=5.1021575927734375e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestNightmareScenario.test_corrupted_encoding_nightmare ____________[0m
[1m[31mtests/e2e/test_nightmare_scenario.py[0m:177: in test_corrupted_encoding_nightmare
    [0m[94massert[39;49;00m ([90m[39;49;00m
[1m[31mE   AssertionError: Failed to process corrupted text 0: Ð¡ÐµÑ€Ð³Ð¸Ð¹ Ð˜Ð²Ð°Ð½Ð¾Ð²[0m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Ð¡ÐµÑ€Ð³Ð¸Ð¹ Ð˜Ð²Ð°Ð½Ð¾Ð²', language='unknown', language_confidence=0.0, normal...e, decision=None, processing_time=5.602836608886719e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______________ TestNightmareScenario.test_performance_nightmare _______________[0m
[1m[31mtests/e2e/test_nightmare_scenario.py[0m:220: in test_performance_nightmare
    [0m[94massert[39;49;00m result.success [95mis[39;49;00m [94mTrue[39;49;00m, [33m"[39;49;00m[33mComplex text processing should succeed[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Complex text processing should succeed[0m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='\n        В конференции участвовали: Jean-Baptiste Müller (Zürich), Олександр П...e, decision=None, processing_time=5.698204040527344e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______________ TestNightmareScenario.test_edge_cases_nightmare ________________[0m
[1m[31mtests/e2e/test_nightmare_scenario.py[0m:296: in test_edge_cases_nightmare
    [0m[94massert[39;49;00m [96mlen[39;49;00m(result.variants) >= [94m0[39;49;00m  [90m# Allow empty or non-empty variants[39;49;00m[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: object of type 'NoneType' has no len()[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestNightmareScenario.test_cache_effectiveness_nightmare ___________[0m
[1m[31mtests/e2e/test_nightmare_scenario.py[0m:313: in test_cache_effectiveness_nightmare
    [0mresult1 = [94mawait[39;49;00m orchestrator_service.process([90m[39;49;00m
[1m[31mE   TypeError: UnifiedOrchestrator.process() got an unexpected keyword argument 'cache_result'[0m
[31m[1m__________________ TestNightmareScenario.test_batch_nightmare __________________[0m
[1m[31mtests/e2e/test_nightmare_scenario.py[0m:375: in test_batch_nightmare
    [0mresults = [94mawait[39;49;00m orchestrator_service.process_batch([90m[39;49;00m
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'process_batch'[0m
[31m[1m__ TestSanctionsScreeningPipelineE2E.test_ukrainian_surname_pattern_detection __[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:95: in test_ukrainian_surname_pattern_detection
    [0m[94massert[39;49;00m result.input_text == ukrainian_name[90m[39;49;00m
[1m[31mE   AssertionError: assert <Mock name='mock.screen_entity().input_text' id='5665760192'> == 'Petro Poroshenko'[0m
[1m[31mE    +  where <Mock name='mock.screen_entity().input_text' id='5665760192'> = <Mock name='mock.screen_entity()' id='5665766240'>.input_text[0m
[31m[1m_____ TestSanctionsScreeningPipelineE2E.test_malicious_input_sanitization ______[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:132: in test_malicious_input_sanitization
    [0m[94massert[39;49;00m result.input_text == malicious_input  [90m# Original preserved for audit[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   assert <Mock name='mock.screen_entity().input_text' id='5667723920'> == "<script>alert('xss')</script>Petro Poroshenko"[0m
[1m[31mE    +  where <Mock name='mock.screen_entity().input_text' id='5667723920'> = <Mock name='mock.screen_entity()' id='5667722912'>.input_text[0m
[31m[1m____ TestSanctionsScreeningPipelineE2E.test_early_stopping_high_confidence _____[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:202: in test_early_stopping_high_confidence
    [0m[94massert[39;49;00m result.early_stopped [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: assert <Mock name='mock.screen_entity().early_stopped' id='5667726944'> is True[0m
[1m[31mE    +  where <Mock name='mock.screen_entity().early_stopped' id='5667726944'> = <Mock name='mock.screen_entity()' id='5667728960'>.early_stopped[0m
[31m[1m________ TestSanctionsScreeningPipelineE2E.test_performance_under_load _________[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:251: in test_performance_under_load
    [0m[94massert[39;49;00m result.input_text == test_entities[i][90m[39;49;00m
[1m[31mE   AssertionError: assert <Mock name='mock.screen_entity().input_text' id='5668559840'> == 'Petro Poroshenko'[0m
[1m[31mE    +  where <Mock name='mock.screen_entity().input_text' id='5668559840'> = <Mock name='mock.screen_entity()' id='5668558832'>.input_text[0m
[31m[1m_______ TestSanctionsScreeningPipelineE2E.test_audit_trail_completeness ________[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:289: in test_audit_trail_completeness
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mstart_time[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.audit_trail[90m[39;49;00m
[1m[31mE   AssertionError: assert 'start_time' in {'tiers': ['tier1', 'tier2']}[0m
[1m[31mE    +  where {'tiers': ['tier1', 'tier2']} = <Mock name='mock.screen_entity()' id='5668565888'>.audit_trail[0m
[31m[1m_____ TestSanctionsScreeningPipelineE2E.test_screening_metrics_collection ______[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:333: in test_screening_metrics_collection
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mtotal_screenings[39;49;00m[33m"[39;49;00m [95min[39;49;00m metrics[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: argument of type 'coroutine' is not iterable[0m
[31m[1m__ TestSanctionsScreeningPipelineE2E.test_sanctions_data_format_compatibility __[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:385: in test_sanctions_data_format_compatibility
    [0m[94massert[39;49;00m result.input_text == sanctions_entity[[33m"[39;49;00m[33mname[39;49;00m[33m"[39;49;00m][90m[39;49;00m
[1m[31mE   AssertionError: assert <Mock name='mock.screen_entity().input_text' id='5667871712'> == 'Test Entity'[0m
[1m[31mE    +  where <Mock name='mock.screen_entity().input_text' id='5667871712'> = <Mock name='mock.screen_entity()' id='5667865664'>.input_text[0m
[31m[1m_____ TestSanctionsScreeningRobustness.test_extremely_long_input_handling ______[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:428: in test_extremely_long_input_handling
    [0mresult = [94mawait[39;49;00m robust_screening_pipeline.screen_entity(very_long_text)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: object Mock can't be used in 'await' expression[0m
[31m[1m___________ TestSanctionsScreeningRobustness.test_unicode_edge_cases ___________[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:448: in test_unicode_edge_cases
    [0mresult = [94mawait[39;49;00m robust_screening_pipeline.screen_entity(test_case)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: object Mock can't be used in 'await' expression[0m
[31m[1m______ TestSanctionsScreeningRobustness.test_concurrent_screening_stress _______[0m
[1m[31mtests/e2e/test_sanctions_screening_pipeline.py[0m:464: in test_concurrent_screening_stress
    [0mresults = [94mawait[39;49;00m asyncio.gather(*tasks, return_exceptions=[94mTrue[39;49;00m)[90m[39;49;00m
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py[0m:884: in gather
    [0mfut = ensure_future(arg, loop=loop)[90m[39;49;00m
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/tasks.py[0m:742: in ensure_future
    [0m[94mraise[39;49;00m [96mTypeError[39;49;00m([33m'[39;49;00m[33mAn asyncio.Future, a coroutine or an awaitable [39;49;00m[33m'[39;49;00m[90m[39;49;00m
[1m[31mE   TypeError: An asyncio.Future, a coroutine or an awaitable is required[0m
[31m[1m_________ TestE2ESanctionsScreening.test_russian_person_with_documents _________[0m
[1m[31mtests/integration/test_e2e_sanctions_screening.py[0m:54: in test_russian_person_with_documents
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mСергей[39;49;00m[33m"[39;49;00m [95min[39;49;00m normalized_words[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Сергей' in ['Иванов', 'Петрович', 'No'][0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'ai_service.layers.variants.ukrainian_morphology'
[33mWARNING [0m ai_service.core.orchestrator_factory:orchestrator_factory.py:150 Failed to initialize variants service: 'VariantGenerationService' object has no attribute 'initialize'
[33mWARNING [0m ai_service.core.orchestrator_factory:orchestrator_factory.py:161 Failed to initialize embeddings service: EmbeddingService.__init__() missing 1 required positional argument: 'config'
[31m[1m____ TestE2ESanctionsScreening.test_ukrainian_organization_with_legal_form _____[0m
[1m[31mtests/integration/test_e2e_sanctions_screening.py[0m:105: in test_ukrainian_organization_with_legal_form
    [0m[94massert[39;49;00m result.language == [33m"[39;49;00m[33muk[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
[31m[1m___________ TestE2ESanctionsScreening.test_golden_dataset_stability ____________[0m
[1m[31mtests/integration/test_e2e_sanctions_screening.py[0m:398: in test_golden_dataset_stability
    [0m[94massert[39;49;00m case[[33m"[39;49;00m[33mexpected_normalized[39;49;00m[33m"[39;49;00m] [95min[39;49;00m result.normalized_text[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Иванов Сергей Петрович' in 'Иванов Петрович Д. Р.'[0m
[1m[31mE    +  where 'Иванов Петрович Д. Р.' = UnifiedProcessingResult(original_text='Иванов Сергей Петрович д.р. 15.03.1985', language='ru', language_confidence=0.6..._skip'], details={'smartfilter_should_process': False}), processing_time=0.002466917037963867, success=True, errors=[]).normalized_text[0m
[31m[1m_ test_ukrainian_full_normalization[\u0414\u043b\u044f \u0416\u0435\u043d\u0456 \u0413\u0430\u043b\u0438\u0447\u0430 \u0437 \u0433\u0440\u0443\u043f\u0438 O.Torvald-\u0404\u0432\u0433\u0435\u043d \u0413\u0430\u043b\u0438\u0447] _[0m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:70: in test_ukrainian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:38: in assert_normalized_name
    [0m[94massert[39;49;00m expected_parts == actual_tokens, \
[1m[31mE   AssertionError: Ожидалось: {'євген', 'галич'}, получено: {'євген', 'галич', 'з.'}[0m
[1m[31mE   assert {'галич', 'євген'} == {'галич', 'з.', 'євген'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the right set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mз.[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Use -v to get more diff[0m
[31m[1m_ test_ukrainian_full_normalization[\u0417\u0443\u0441\u0442\u0440\u0456\u0447 \u0437 \u041b\u0456\u043d\u043e\u044e \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e-\u041b\u0456\u043d\u0430 \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e] _[0m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:70: in test_ukrainian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:38: in assert_normalized_name
    [0m[94massert[39;49;00m expected_parts == actual_tokens, \
[1m[31mE   AssertionError: Ожидалось: {'ліна', 'костенко'}, получено: {'ліна', 'з.', 'костенко'}[0m
[1m[31mE   assert {'костенко', 'ліна'} == {'з.', 'костенко', 'ліна'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the right set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mз.[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Use -v to get more diff[0m
[31m[1m_ test_ukrainian_full_normalization[\u0420\u043e\u0437\u043c\u043e\u0432\u043b\u044f\u0432 \u0437 \u0412\u0430\u043b\u0435\u0440\u0456\u0454\u043c \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u043c-\u0412\u0430\u043b\u0435\u0440\u0456\u0439 \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u0439] _[0m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:70: in test_ukrainian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:38: in assert_normalized_name
    [0m[94massert[39;49;00m expected_parts == actual_tokens, \
[1m[31mE   AssertionError: Ожидалось: {'залужний', 'валерій'}, получено: {'залужний', 'з.', 'валерій'}[0m
[1m[31mE   assert {'валерій', 'залужний'} == {'валерій', 'з.', 'залужний'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the right set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mз.[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Use -v to get more diff[0m
[31m[1m_ test_russian_full_normalization[\u0414\u043b\u044f \u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430] _[0m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:97: in test_russian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:38: in assert_normalized_name
    [0m[94massert[39;49;00m expected_parts == actual_tokens, \
[1m[31mE   AssertionError: Ожидалось: {'пугачева', 'алла', 'борисовна'}, получено: {'аллы', 'борисовн', 'пугачев'}[0m
[1m[31mE   assert {'алла', 'бор...', 'пугачева'} == {'аллы', 'бор...н', 'пугачев'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the left set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mпугачева[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [0m[33m'[39;49;00m[33mалла[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [0m[33m'[39;49;00m[33mборисовна[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Extra items in the right set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mаллы[39;49;00m[33m'[39;49;00m[90m[39;49;00m...[0m
[1m[31mE     [0m
[1m[31mE     ...Full output truncated (3 lines hidden), use '-vv' to show[0m
[31m[1m_ test_russian_full_normalization[\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439] _[0m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:97: in test_russian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:38: in assert_normalized_name
    [0m[94massert[39;49;00m expected_parts == actual_tokens, \
[1m[31mE   AssertionError: Ожидалось: {'чайковский', 'петр'}, получено: {'петр', 'чайковском'}[0m
[1m[31mE   assert {'петр', 'чайковский'} == {'петр', 'чайковском'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the left set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mчайковский[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Extra items in the right set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mчайковском[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Use -v to get more diff[0m
[31m[1m_ test_russian_full_normalization[\u0412\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0410\u043d\u043d\u043e\u0439 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u043e\u0439-\u0410\u043d\u043d\u0430 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u0430] _[0m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:97: in test_russian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:38: in assert_normalized_name
    [0m[94massert[39;49;00m expected_parts == actual_tokens, \
[1m[31mE   AssertionError: Ожидалось: {'ахматова', 'анна'}, получено: {'ахматова', 'с.', 'анна'}[0m
[1m[31mE   assert {'анна', 'ахматова'} == {'анна', 'ахматова', 'с.'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the right set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mс.[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Use -v to get more diff[0m
[31m[1m___ test_english_full_normalization[Sent to ELON MUSK for X corp-Elon Musk] ____[0m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:124: in test_english_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:38: in assert_normalized_name
    [0m[94massert[39;49;00m expected_parts == actual_tokens, \
[1m[31mE   AssertionError: Ожидалось: {'elon', 'musk'}, получено: {'x', 'elon', 'musk'}[0m
[1m[31mE   assert {'elon', 'musk'} == {'elon', 'musk', 'x'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the right set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mx[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Use -v to get more diff[0m
[31m[1m_____________________ test_critical_russian_normalization ______________________[0m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:160: in test_critical_russian_normalization
    [0m[94massert[39;49;00m tokens_lower == expected_tokens, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m{[39;49;00mexpected_tokens[33m}[39;49;00m[33m, but got [39;49;00m[33m{[39;49;00mtokens_lower[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected {'петров', 'владимирович', 'сергей'}, but got {'владимирович', 'в.', 'петров', 'сергей'}[0m
[1m[31mE   assert {'в.', 'влади...ов', 'сергей'} == {'владимирови...ов', 'сергей'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the left set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mв.[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Use -v to get more diff[0m
[31m[1m__ TestGenderAdjustmentIntegration.test_ukrainian_female_name_with_patronymic __[0m
[1m[31mtests/integration/test_gender_adjustment.py[0m:32: in test_ukrainian_female_name_with_patronymic
    [0m[94massert[39;49;00m person[[33m"[39;49;00m[33mtokens[39;49;00m[33m"[39;49;00m] == [[33m"[39;49;00m[33mПавлов[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mДарʼя[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mЮріївна[39;49;00m[33m"[39;49;00m][90m[39;49;00m
[1m[31mE   AssertionError: assert ['Павлов', 'Дарʼї', 'Юріївна'] == ['Павлов', 'Дарʼя', 'Юріївна'][0m
[1m[31mE     [0m
[1m[31mE     At index 1 diff: [0m[33m'[39;49;00m[33mДарʼї[39;49;00m[33m'[39;49;00m[90m[39;49;00m != [0m[33m'[39;49;00m[33mДарʼя[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Use -v to get more diff[0m
[31m[1m_________ TestMixedScriptNames.test_ascii_names_with_cyrillic_surnames _________[0m
[1m[31mtests/integration/test_mixed_script_names.py[0m:66: in test_ascii_names_with_cyrillic_surnames
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mПетрова[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Петрова' in 'John Коваленко Mary Петров'[0m
[1m[31mE    +  where 'John Коваленко Mary Петров' = NormalizationResult(normalized='John Коваленко Mary Петров', tokens=['John', 'Коваленко', 'Mary', 'Петров'], trace=[To...re_female': 0, 'score_male': 2, 'gap': 2}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m_____________ TestMixedScriptNames.test_ascii_names_no_morphology ______________[0m
[1m[31mtests/integration/test_mixed_script_names.py[0m:106: in test_ascii_names_no_morphology
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mmorph[39;49;00m[33m"[39;49;00m [95mnot[39;49;00m [95min[39;49;00m smith_trace.rule.lower()[90m[39;49;00m
[1m[31mE   AssertionError: assert 'morph' not in 'morph'[0m
[1m[31mE     [0m
[1m[31mE     'morph' is contained here:[0m
[1m[31mE       morph[0m
[31m[1m____________ TestNormalizationPipeline.test_ukrainian_name_pipeline ____________[0m
[1m[31mtests/integration/test_normalization_pipeline.py[0m:53: in test_ukrainian_name_pipeline
    [0m[94massert[39;49;00m normalization_result[[33m'[39;49;00m[33moriginal_text[39;49;00m[33m'[39;49;00m] == input_text[90m[39;49;00m
[1m[31mE   AssertionError: assert None == 'Олена Петрівна'[0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
[31m[1m_____________ TestNormalizationPipeline.test_russian_name_pipeline _____________[0m
[1m[31mtests/integration/test_normalization_pipeline.py[0m:104: in test_russian_name_pipeline
    [0m[94massert[39;49;00m [33m'[39;49;00m[33mtoken_variants[39;49;00m[33m'[39;49;00m [95min[39;49;00m normalization_result[90m[39;49;00m
[1m[31mE   AssertionError: assert 'token_variants' in NormalizationResult(normalized='Сергей Иванов', tokens=['Сергей', 'Иванов'], trace=[TokenTrace(token='Сергей', role='g...re_female': 0, 'score_male': 5, 'gap': 5}}], person_gender=None, gender_confidence=None, organizations=[], org_core='')[0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
[31m[1m_________ TestNormalizationPipeline.test_mixed_language_text_pipeline __________[0m
[1m[31mtests/integration/test_normalization_pipeline.py[0m:127: in test_mixed_language_text_pipeline
    [0m[94massert[39;49;00m [33m'[39;49;00m[33mtoken_variants[39;49;00m[33m'[39;49;00m [95min[39;49;00m normalization_result[90m[39;49;00m
[1m[31mE   AssertionError: assert 'token_variants' in NormalizationResult(normalized='John Smith And Іван Петренко', tokens=['John', 'Smith', 'And', 'Іван', 'Петренко'], tr...re_female': 0, 'score_male': 3, 'gap': 3}}], person_gender=None, gender_confidence=None, organizations=[], org_core='')[0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
[31m[1m____________ TestNormalizationPipeline.test_compound_name_pipeline _____________[0m
[1m[31mtests/integration/test_normalization_pipeline.py[0m:160: in test_compound_name_pipeline
    [0m[94massert[39;49;00m [33m'[39;49;00m[33mtoken_variants[39;49;00m[33m'[39;49;00m [95min[39;49;00m normalization_result[90m[39;49;00m
[1m[31mE   AssertionError: assert 'token_variants' in NormalizationResult(normalized='', tokens=[], trace=[], errors=[], language='ru', confidence=1.0, original_length=14, ..._core=[], organizations_core=[], persons=[], person_gender=None, gender_confidence=None, organizations=[], org_core='')[0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
[31m[1m______________ TestNormalizationPipeline.test_empty_text_pipeline ______________[0m
[1m[31mtests/integration/test_normalization_pipeline.py[0m:225: in test_empty_text_pipeline
    [0m[94massert[39;49;00m normalization_result[[33m'[39;49;00m[33mtotal_variants[39;49;00m[33m'[39;49;00m] == [94m0[39;49;00m[90m[39;49;00m
[1m[31mE   assert None == 0[0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
[31m[1m_____________ TestNormalizationPipeline.test_performance_pipeline ______________[0m
[1m[31mtests/integration/test_normalization_pipeline.py[0m:263: in test_performance_pipeline
    [0m[94massert[39;49;00m [33m'[39;49;00m[33mtoken_variants[39;49;00m[33m'[39;49;00m [95min[39;49;00m result[90m[39;49;00m
[1m[31mE   AssertionError: assert 'token_variants' in NormalizationResult(normalized='Олександр Петренко', tokens=['Олександр', 'Петренко'], trace=[TokenTrace(token='Олекса...re_female': 0, 'score_male': 3, 'gap': 3}}], person_gender=None, gender_confidence=None, organizations=[], org_core='')[0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
[31m[1m____________ TestNormalizationPipeline.test_morphology_integration _____________[0m
[1m[31mtests/integration/test_normalization_pipeline.py[0m:310: in test_morphology_integration
    [0m[94mfor[39;49;00m variants [95min[39;49;00m token_variants.values():[90m[39;49;00m
                    ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NoneType' object has no attribute 'values'[0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
[31m[1m__________ TestNormalizationPipeline.test_transliteration_integration __________[0m
[1m[31mtests/integration/test_normalization_pipeline.py[0m:331: in test_transliteration_integration
    [0m[94mfor[39;49;00m variants [95min[39;49;00m token_variants.values():[90m[39;49;00m
                    ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NoneType' object has no attribute 'values'[0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m src.ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'src.ai_service.layers.variants.ukrainian_morphology'
[31m[1m_____ TestPipelineEnd2End.test_pipeline_integration[ukrainian_simple_name] _____[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:336: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language == test_case.expected_language, \
[1m[31mE   AssertionError: Expected language uk, got ru[0m
[1m[31mE   assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
------------------------------ Captured log setup ------------------------------
[33mWARNING [0m ai_service.layers.variants.variant_generation_service:variant_generation_service.py:392 Ukrainian morphology analyzer not available: No module named 'ai_service.layers.variants.ukrainian_morphology'
[33mWARNING [0m ai_service.core.orchestrator_factory:orchestrator_factory.py:150 Failed to initialize variants service: 'VariantGenerationService' object has no attribute 'initialize'
[33mWARNING [0m ai_service.core.orchestrator_factory:orchestrator_factory.py:161 Failed to initialize embeddings service: EmbeddingService.__init__() missing 1 required positional argument: 'config'
[31m[1m_ TestPipelineEnd2End.test_pipeline_integration[ukrainian_full_name_with_patronymic] _[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:336: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language == test_case.expected_language, \
[1m[31mE   AssertionError: Expected language uk, got ru[0m
[1m[31mE   assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
[31m[1m_ TestPipelineEnd2End.test_pipeline_integration[ukrainian_company_with_legal_form] _[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:375: in test_pipeline_integration
    [0m[94massert[39;49;00m [96mlen[39;49;00m(result.signals.organizations) == [96mlen[39;49;00m(test_case.expected_organizations), \
[1m[31mE   AssertionError: Expected 1 orgs, got 0[0m
[1m[31mE   assert 0 == 1[0m
[1m[31mE    +  where 0 = len([])[0m
[1m[31mE    +    where [] = <ai_service.layers.signals.signals_service.SignalsService.extract_signals.<locals>.ResultWrapper object at 0x30d1427b0>.organizations[0m
[1m[31mE    +      where <ai_service.layers.signals.signals_service.SignalsService.extract_signals.<locals>.ResultWrapper object at 0x30d1427b0> = UnifiedProcessingResult(original_text="ТОВ 'ПриватБанк'", language='ru', language_confidence=0.6, normalized_text='', ...1427b0>, variants=None, embeddings=None, decision=None, processing_time=0.0015230178833007812, success=True, errors=[]).signals[0m
[1m[31mE    +  and   1 = len([{'core': 'ПриватБанк', 'full_name': 'ТОВ ПриватБанк', 'legal_form': 'ТОВ'}])[0m
[1m[31mE    +    where [{'core': 'ПриватБанк', 'full_name': 'ТОВ ПриватБанк', 'legal_form': 'ТОВ'}] = IntegrationTestCase(name='ukrainian_company_with_legal_form', input_text="ТОВ 'ПриватБанк'", expected_language='ru', e...cess=True, expected_trace_roles=[], notes='Company with legal form - legal form handled by Signals, not Normalization').expected_organizations[0m
[31m[1m___ TestPipelineEnd2End.test_pipeline_integration[mixed_person_and_company] ____[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:336: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language == test_case.expected_language, \
[1m[31mE   AssertionError: Expected language uk, got ru[0m
[1m[31mE   assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
[31m[1m____ TestPipelineEnd2End.test_pipeline_integration[person_with_birth_date] _____[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:336: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language == test_case.expected_language, \
[1m[31mE   AssertionError: Expected language uk, got ru[0m
[1m[31mE   assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
[31m[1m________ TestPipelineEnd2End.test_pipeline_integration[person_with_inn] ________[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:336: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language == test_case.expected_language, \
[1m[31mE   AssertionError: Expected language uk, got ru[0m
[1m[31mE   assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
[31m[1m______ TestPipelineEnd2End.test_pipeline_integration[mixed_script_names] _______[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:351: in test_pipeline_integration
    [0m[94massert[39;49;00m result.normalized_text == test_case.expected_normalized, \
[1m[31mE   AssertionError: Expected normalized 'John Smith Олена Петренко', got 'John Smith'[0m
[1m[31mE   assert 'John Smith' == 'John Smith Олена Петренко'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- John Smith Олена Петренко[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ John Smith[39;49;00m[90m[39;49;00m[0m
[31m[1m__ TestPipelineEnd2End.test_pipeline_integration[noise_context_should_filter] __[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:336: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language == test_case.expected_language, \
[1m[31mE   AssertionError: Expected language uk, got ru[0m
[1m[31mE   assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
[31m[1m__ TestPipelineEnd2End.test_pipeline_integration[quoted_company_with_person] ___[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:339: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language_confidence >= test_case.expected_language_confidence_min, \
[1m[31mE   AssertionError: Language confidence 0.75 below minimum 0.8[0m
[1m[31mE   assert 0.75 >= 0.8[0m
[1m[31mE    +  where 0.75 = UnifiedProcessingResult(original_text="ООО 'Тест Системс' перевод средств Ивану Петрову", language='ru', language_conf...d140050>, variants=None, embeddings=None, decision=None, processing_time=0.003690004348754883, success=True, errors=[]).language_confidence[0m
[1m[31mE    +  and   0.8 = IntegrationTestCase(name='quoted_company_with_person', input_text="ООО 'Тест Системс' перевод средств Ивану Петрову", ...ected_should_process=True, expected_trace_roles=['given', 'surname'], notes='Quoted company name with person transfer').expected_language_confidence_min[0m
[31m[1m______ TestPipelineEnd2End.test_pipeline_integration[hyphenated_surname] _______[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:336: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language == test_case.expected_language, \
[1m[31mE   AssertionError: Expected language uk, got ru[0m
[1m[31mE   assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
[31m[1m________ TestPipelineEnd2End.test_pipeline_integration[overfit_canary] _________[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:336: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language == test_case.expected_language, \
[1m[31mE   AssertionError: Expected language uk, got ru[0m
[1m[31mE   assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
[31m[1m___ TestPipelineEnd2End.test_pipeline_integration[full_pipeline_stress_test] ___[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:336: in test_pipeline_integration
    [0m[94massert[39;49;00m result.language == test_case.expected_language, \
[1m[31mE   AssertionError: Expected language uk, got ru[0m
[1m[31mE   assert 'ru' == 'uk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- uk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ ru[39;49;00m[90m[39;49;00m[0m
[31m[1m____________ TestPipelineEnd2End.test_normalization_flags_behavior _____________[0m
[1m[31mtests/integration/test_pipeline_end2end.py[0m:415: in test_normalization_flags_behavior
    [0m[94massert[39;49;00m [96mlen[39;49;00m(unique_results) > [94m1[39;49;00m, \
[1m[31mE   AssertionError: Flags should produce different results but all were identical: ['Иван Петрович Сидоренко', 'Иван Петрович Сидоренко', 'Иван Петрович Сидоренко', 'Иван Петрович Сидоренко'][0m
[1m[31mE   assert 1 > 1[0m
[1m[31mE    +  where 1 = len({'Иван Петрович Сидоренко'})[0m
[31m[1m_______________ TestPipelineInitialsOrgsCase.test_initials_only ________________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:27: in test_initials_only
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='А.Б. Петров', language='unknown', language_confidence=0.0, normalized_text='', ...e, decision=None, processing_time=4.601478576660156e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______ TestPipelineInitialsOrgsCase.test_english_initials_with_surname ________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:47: in test_english_initials_with_surname
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='J.R.R. Tolkien', language='unknown', language_confidence=0.0, normalized_text='...e, decision=None, processing_time=4.410743713378906e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m________ TestPipelineInitialsOrgsCase.test_mixed_initials_and_full_name ________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:67: in test_mixed_initials_and_full_name
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='А.Б. и Сергей Иванович Петров', language='unknown', language_confidence=0.0, no...e, decision=None, processing_time=4.124641418457031e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineInitialsOrgsCase.test_russian_organization_ooo __________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:88: in test_russian_organization_ooo
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='ООО Газпром', language='unknown', language_confidence=0.0, normalized_text='', ...e, decision=None, processing_time=4.291534423828125e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________ TestPipelineInitialsOrgsCase.test_ukrainian_organization_tov _________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:110: in test_ukrainian_organization_tov
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='ТОВ Нафтогаз', language='unknown', language_confidence=0.0, normalized_text='',...e, decision=None, processing_time=4.506111145019531e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineInitialsOrgsCase.test_english_organization_llc __________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:132: in test_english_organization_llc
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Microsoft LLC', language='unknown', language_confidence=0.0, normalized_text=''...e, decision=None, processing_time=5.078315734863281e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______ TestPipelineInitialsOrgsCase.test_organization_with_person_name ________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:154: in test_organization_with_person_name
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='ООО Петров и Ко', language='unknown', language_confidence=0.0, normalized_text=...e, decision=None, processing_time=4.220008850097656e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineInitialsOrgsCase.test_multiple_organizations ___________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:177: in test_multiple_organizations
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='ООО Газпром и ТОВ Нафтогаз', language='unknown', language_confidence=0.0, norma...e, decision=None, processing_time=4.029273986816406e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______ TestPipelineInitialsOrgsCase.test_person_and_organization_mixed ________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:200: in test_person_and_organization_mixed
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Сергей Петров работает в ООО Газпром', language='unknown', language_confidence=...e, decision=None, processing_time=3.910064697265625e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineInitialsOrgsCase.test_organization_with_quotes __________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:226: in test_organization_with_quotes
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='ООО "Рога и Копыта"', language='unknown', language_confidence=0.0, normalized_t...e, decision=None, processing_time=4.696846008300781e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________ TestPipelineInitialsOrgsCase.test_initials_with_organization _________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:247: in test_initials_with_organization
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='А.Б. Петров, директор ООО Газпром', language='unknown', language_confidence=0.0...e, decision=None, processing_time=4.935264587402344e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m____________ TestPipelineInitialsOrgsCase.test_multiple_legal_forms ____________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:273: in test_multiple_legal_forms
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='ООО Газпром, ЗАО Лукойл, ПАО Сбербанк', language='unknown', language_confidence...ne, decision=None, processing_time=4.00543212890625e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________ TestPipelineInitialsOrgsCase.test_organization_with_numbers __________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:294: in test_organization_with_numbers
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='ООО Завод-25', language='unknown', language_confidence=0.0, normalized_text='',...e, decision=None, processing_time=4.506111145019531e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m____________ TestPipelineInitialsOrgsCase.test_foreign_organization ____________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:315: in test_foreign_organization
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Apple Inc.', language='unknown', language_confidence=0.0, normalized_text='', t...e, decision=None, processing_time=5.125999450683594e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineInitialsOrgsCase.test_initials_without_periods __________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:337: in test_initials_without_periods
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='АБ Петров', language='unknown', language_confidence=0.0, normalized_text='', to...e, decision=None, processing_time=4.792213439941406e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineInitialsOrgsCase.test_organization_in_sentence __________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:357: in test_organization_in_sentence
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Компания ООО Газпром объявила о новых инвестициях', language='unknown', languag...e, decision=None, processing_time=4.506111145019531e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineInitialsOrgsCase.test_mixed_case_organization ___________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:379: in test_mixed_case_organization
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='ооо ГАЗПРОМ', language='unknown', language_confidence=0.0, normalized_text='', ...e, decision=None, processing_time=4.506111145019531e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________ TestPipelineInitialsOrgsCase.test_organization_with_address __________[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:401: in test_organization_with_address
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='ООО Газпром, г. Москва, ул. Ленина, д. 1', language='unknown', language_confide...e, decision=None, processing_time=5.602836608886719e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______ TestPipelineInitialsOrgsCase.test_no_unknown_in_normalized_output _______[0m
[1m[31mtests/integration/test_pipeline_initials_orgs.py[0m:423: in test_no_unknown_in_normalized_output
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='А.Б. Петров, ООО Газпром', language='unknown', language_confidence=0.0, normali...e, decision=None, processing_time=4.100799560546875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____________ TestPipelineMixedEnglishCases.test_english_full_name _____________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:27: in test_english_full_name
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='John Michael Smith', language='unknown', language_confidence=0.0, normalized_te...one, decision=None, processing_time=4.1961669921875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______ TestPipelineMixedEnglishCases.test_english_name_with_apostrophe ________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:51: in test_english_name_with_apostrophe
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text="John O'Connor", language='unknown', language_confidence=0.0, normalized_text=''...e, decision=None, processing_time=6.175041198730469e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineMixedEnglishCases.test_english_hyphenated_name __________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:72: in test_english_hyphenated_name
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Mary-Jane Watson', language='unknown', language_confidence=0.0, normalized_text...e, decision=None, processing_time=4.506111145019531e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineMixedEnglishCases.test_mixed_english_ukrainian __________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:94: in test_mixed_english_ukrainian
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='John Smith and Олександр Петренко', language='unknown', language_confidence=0.0...e, decision=None, processing_time=0.0001010894775390625, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineMixedEnglishCases.test_mixed_english_russian ___________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:115: in test_mixed_english_russian
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Michael Johnson и Сергей Петров', language='unknown', language_confidence=0.0, ...e, decision=None, processing_time=4.100799560546875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____________ TestPipelineMixedEnglishCases.test_english_initials ______________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:136: in test_english_initials
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='J.M. Smith', language='unknown', language_confidence=0.0, normalized_text='', t...e, decision=None, processing_time=4.792213439941406e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineMixedEnglishCases.test_english_name_with_title __________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:156: in test_english_name_with_title
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Dr. John Smith', language='unknown', language_confidence=0.0, normalized_text='..., decision=None, processing_time=4.6253204345703125e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m____________ TestPipelineMixedEnglishCases.test_transliterated_name ____________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:177: in test_transliterated_name
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Sergey Ivanov', language='unknown', language_confidence=0.0, normalized_text=''...e, decision=None, processing_time=4.792213439941406e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineMixedEnglishCases.test_multiple_english_names ___________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:198: in test_multiple_english_names
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='John Smith, Mary Johnson, and Robert Brown', language='unknown', language_confi...e, decision=None, processing_time=4.482269287109375e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____ TestPipelineMixedEnglishCases.test_english_name_with_middle_initial ______[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:220: in test_english_name_with_middle_initial
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='John F. Kennedy', language='unknown', language_confidence=0.0, normalized_text=...e, decision=None, processing_time=4.410743713378906e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________ TestPipelineMixedEnglishCases.test_english_compound_surname __________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:241: in test_english_compound_surname
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='John Smith-Brown', language='unknown', language_confidence=0.0, normalized_text..., decision=None, processing_time=5.1975250244140625e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______ TestPipelineMixedEnglishCases.test_english_name_case_insensitive _______[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:263: in test_english_name_case_insensitive
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='jOHN sMITH', language='unknown', language_confidence=0.0, normalized_text='', t...ne, decision=None, processing_time=4.00543212890625e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m____________ TestPipelineMixedEnglishCases.test_three_language_mix _____________[0m
[1m[31mtests/integration/test_pipeline_mixed_en.py[0m:284: in test_three_language_mix
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='John Smith, Олександр Петренко, и Сергей Иванов', language='unknown', language_...e, decision=None, processing_time=4.363059997558594e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________________ TestPipelineNegativeCanaries.test_empty_text _________________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:27: in test_empty_text
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='', language='unknown', language_confidence=0.0, normalized_text='', tokens=[], ..., decision=None, processing_time=5.2928924560546875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineNegativeCanaries.test_whitespace_only _______________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:45: in test_whitespace_only
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='   \t\n   ', language='unknown', language_confidence=0.0, normalized_text='', t...e, decision=None, processing_time=3.981590270996094e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m________________ TestPipelineNegativeCanaries.test_numbers_only ________________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:62: in test_numbers_only
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='123 456 789', language='unknown', language_confidence=0.0, normalized_text='', ...e, decision=None, processing_time=4.482269287109375e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineNegativeCanaries.test_punctuation_only ______________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:80: in test_punctuation_only
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='!@#$%^&*()_+-={}[]|\\:;"\'<>?,./', language='unknown', language_confidence=0.0,...e, decision=None, processing_time=4.696846008300781e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineNegativeCanaries.test_stop_words_only _______________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:98: in test_stop_words_only
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='the and or but with in on at', language='unknown', language_confidence=0.0, nor...one, decision=None, processing_time=4.1961669921875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineNegativeCanaries.test_random_gibberish ______________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:116: in test_random_gibberish
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='asdfghjkl qwertyuiop zxcvbnm', language='unknown', language_confidence=0.0, nor...ne, decision=None, processing_time=5.91278076171875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____________ TestPipelineNegativeCanaries.test_special_characters _____________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:136: in test_special_characters
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='∑∂∆∞π√∫≈≠≤≥', language='unknown', language_confidence=0.0, normalized_text='', ...e, decision=None, processing_time=4.220008850097656e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________________ TestPipelineNegativeCanaries.test_emoji_only _________________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:153: in test_emoji_only
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='😀😃😄😁😆😅😂🤣', language='unknown', language_confidence=0.0, normalized_text='', tok...ne, decision=None, processing_time=4.76837158203125e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______________ TestPipelineNegativeCanaries.test_very_long_text _______________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:170: in test_very_long_text
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='test test test test test test test test test test test test test test test test...e, decision=None, processing_time=5.316734313964844e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineNegativeCanaries.test_mixed_scripts_nonsense ___________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:187: in test_mixed_scripts_nonsense
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='αβγδε абвгд abcde 12345 !@#$%', language='unknown', language_confidence=0.0, no...e, decision=None, processing_time=4.220008850097656e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineNegativeCanaries.test_common_words_not_names ___________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:204: in test_common_words_not_names
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='table chair window door computer phone book', language='unknown', language_conf...e, decision=None, processing_time=4.887580871582031e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m____________ TestPipelineNegativeCanaries.test_dates_and_addresses _____________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:223: in test_dates_and_addresses
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='15.03.1980 г. Москва ул. Ленина д. 10 кв. 5', language='unknown', language_conf...ne, decision=None, processing_time=4.76837158203125e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineNegativeCanaries.test_currencies_and_amounts ___________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:246: in test_currencies_and_amounts
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='1000 USD 500 EUR 2000 RUB 3000 UAH', language='unknown', language_confidence=0....e, decision=None, processing_time=4.410743713378906e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineNegativeCanaries.test_technical_terms _______________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:265: in test_technical_terms
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='HTTP HTTPS API REST JSON XML SQL HTML CSS JavaScript', language='unknown', lang...e, decision=None, processing_time=3.933906555175781e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______________ TestPipelineNegativeCanaries.test_medical_terms ________________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:284: in test_medical_terms
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='COVID-19 influenza pneumonia diabetes hypertension', language='unknown', langua..., decision=None, processing_time=5.5789947509765625e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineNegativeCanaries.test_country_and_city_names ___________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:303: in test_country_and_city_names
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Ukraine Russia Germany France Italy Spain', language='unknown', language_confid...None, decision=None, processing_time=3.814697265625e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m________________ TestPipelineNegativeCanaries.test_brand_names _________________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:324: in test_brand_names
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Apple Google Microsoft Amazon Facebook Tesla', language='unknown', language_con..., decision=None, processing_time=4.8160552978515625e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineNegativeCanaries.test_malformed_input _______________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:347: in test_malformed_input
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Test\x00\x01\x02\x03\x04\x05', language='unknown', language_confidence=0.0, nor...e, decision=None, processing_time=3.981590270996094e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineNegativeCanaries.test_sql_injection_attempt ____________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:364: in test_sql_injection_attempt
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text="'; DROP TABLE users; --", language='unknown', language_confidence=0.0, normaliz...one, decision=None, processing_time=4.1961669921875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m________ TestPipelineNegativeCanaries.test_no_unknown_tokens_in_output _________[0m
[1m[31mtests/integration/test_pipeline_negative_canaries.py[0m:388: in test_no_unknown_tokens_in_output
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed for [39;49;00m[33m'[39;49;00m[33m{[39;49;00mtext[33m}[39;49;00m[33m'[39;49;00m[33m: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed for 'random gibberish text': ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='random gibberish text', language='unknown', language_confidence=0.0, normalized...e, decision=None, processing_time=4.100799560546875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m________ TestPipelineRuUkCases.test_ukrainian_full_name_with_patronymic ________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:28: in test_ukrainian_full_name_with_patronymic
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко', language='unknown', language_confidence=0.0, nor...e, decision=None, processing_time=0.0001919269561767578, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________ TestPipelineRuUkCases.test_russian_full_name_with_patronymic _________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:61: in test_russian_full_name_with_patronymic
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров', language='unknown', language_confidence=0.0, normalize...one, decision=None, processing_time=4.1961669921875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______ TestPipelineRuUkCases.test_ukrainian_female_name_with_patronymic _______[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:86: in test_ukrainian_female_name_with_patronymic
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Олена Петрівна Коваленко', language='unknown', language_confidence=0.0, normali...e, decision=None, processing_time=3.790855407714844e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m________ TestPipelineRuUkCases.test_russian_female_name_with_patronymic ________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:110: in test_russian_female_name_with_patronymic
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Мария Ивановна Смирнова', language='unknown', language_confidence=0.0, normaliz...one, decision=None, processing_time=4.1961669921875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____________ TestPipelineRuUkCases.test_ukrainian_double_surname ______________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:134: in test_ukrainian_double_surname
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Володимир Петрович Коваленко-Сміт', language='unknown', language_confidence=0.0...e, decision=None, processing_time=4.506111145019531e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineRuUkCases.test_russian_double_surname _______________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:158: in test_russian_double_surname
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Александр Сергеевич Петров-Сидоров', language='unknown', language_confidence=0....one, decision=None, processing_time=4.1961669921875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineRuUkCases.test_ukrainian_name_with_initials ____________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:182: in test_ukrainian_name_with_initials
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='О.П. Коваленко', language='unknown', language_confidence=0.0, normalized_text='...e, decision=None, processing_time=4.100799560546875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m____________ TestPipelineRuUkCases.test_russian_name_with_initials _____________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:203: in test_russian_name_with_initials
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='С.И. Петров', language='unknown', language_confidence=0.0, normalized_text='', ...e, decision=None, processing_time=4.887580871582031e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineRuUkCases.test_ukrainian_compound_name ______________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:224: in test_ukrainian_compound_name
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Анна-Марія Петрівна Коваленко', language='unknown', language_confidence=0.0, no...e, decision=None, processing_time=3.910064697265625e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______________ TestPipelineRuUkCases.test_russian_compound_name _______________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:248: in test_russian_compound_name
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Анна-Мария Ивановна Смирнова', language='unknown', language_confidence=0.0, nor...e, decision=None, processing_time=5.316734313964844e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineRuUkCases.test_ukrainian_name_with_apostrophe ___________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:272: in test_ukrainian_name_with_apostrophe
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text="О'Коннор Петрович", language='unknown', language_confidence=0.0, normalized_tex...e, decision=None, processing_time=4.410743713378906e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineRuUkCases.test_russian_name_with_apostrophe ____________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:294: in test_russian_name_with_apostrophe
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text="Д'Артаньян Иванович", language='unknown', language_confidence=0.0, normalized_t...e, decision=None, processing_time=4.696846008300781e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____________ TestPipelineRuUkCases.test_multiple_ukrainian_names ______________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:316: in test_multiple_ukrainian_names
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко та Олена Іванівна Сміт', language='unknown', langu...e, decision=None, processing_time=4.410743713378906e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineRuUkCases.test_multiple_russian_names _______________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:344: in test_multiple_russian_names
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров и Мария Сергеевна Смирнова', language='unknown', languag...gs=None, decision=None, processing_time=6.103515625e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____________ TestPipelineRuUkCases.test_ukrainian_name_with_typos _____________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:373: in test_ukrainian_name_with_typos
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко', language='unknown', language_confidence=0.0, nor...ne, decision=None, processing_time=4.38690185546875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPipelineRuUkCases.test_russian_name_with_typos ______________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:397: in test_russian_name_with_typos
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров', language='unknown', language_confidence=0.0, normalize...e, decision=None, processing_time=4.410743713378906e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m____________ TestPipelineRuUkCases.test_ukrainian_name_with_numbers ____________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:420: in test_ukrainian_name_with_numbers
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко 123 456', language='unknown', language_confidence=...e, decision=None, processing_time=3.981590270996094e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____________ TestPipelineRuUkCases.test_russian_name_with_numbers _____________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:444: in test_russian_name_with_numbers
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров 789 012', language='unknown', language_confidence=0.0, n...e, decision=None, processing_time=3.886222839355469e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineRuUkCases.test_ukrainian_name_with_punctuation __________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:469: in test_ukrainian_name_with_punctuation
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Олександр Петрович Коваленко, д.р. 15.03.1980', language='unknown', language_co...one, decision=None, processing_time=4.1961669921875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineRuUkCases.test_russian_name_with_punctuation ___________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:492: in test_russian_name_with_punctuation
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Сергей Иванович Петров, д.р. 15.03.1980', language='unknown', language_confiden...e, decision=None, processing_time=3.981590270996094e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________ TestPipelineRuUkCases.test_ukrainian_name_with_extra_spaces __________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:515: in test_ukrainian_name_with_extra_spaces
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='  Олександр   Петрович   Коваленко  ', language='unknown', language_confidence=...e, decision=None, processing_time=4.482269287109375e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineRuUkCases.test_russian_name_with_extra_spaces ___________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:538: in test_russian_name_with_extra_spaces
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='  Сергей   Иванович   Петров  ', language='unknown', language_confidence=0.0, n...one, decision=None, processing_time=4.1961669921875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestPipelineRuUkCases.test_ukrainian_name_case_insensitive __________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:561: in test_ukrainian_name_case_insensitive
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='оЛЕКСАНДР пЕТРОВИЧ кОВАЛЕНКО', language='unknown', language_confidence=0.0, nor...e, decision=None, processing_time=4.100799560546875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestPipelineRuUkCases.test_russian_name_case_insensitive ___________[0m
[1m[31mtests/integration/test_pipeline_ru_uk_cases.py[0m:584: in test_russian_name_case_insensitive
    [0m[94massert[39;49;00m result.success, [33mf[39;49;00m[33m"[39;49;00m[33mProcessing failed: [39;49;00m[33m{[39;49;00mresult.errors[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Processing failed: ["'str' object has no attribute 'get'"][0m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='сЕРГЕЙ иВАНОВИЧ пЕТРОВ', language='unknown', language_confidence=0.0, normalize...e, decision=None, processing_time=4.696846008300781e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_ test_role_based_slavic_normalization[\u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430-ru] _[0m
[1m[31mtests/integration/test_role_based_normalization.py[0m:43: in test_role_based_slavic_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:38: in assert_normalized_name
    [0m[94massert[39;49;00m expected_parts == actual_tokens, \
[1m[31mE   AssertionError: Ожидалось: {'пугачева', 'алла', 'борисовна'}, получено: {'аллы', 'борисовн', 'пугачев'}[0m
[1m[31mE   assert {'алла', 'бор...', 'пугачева'} == {'аллы', 'бор...н', 'пугачев'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the left set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mпугачева[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [0m[33m'[39;49;00m[33mалла[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [0m[33m'[39;49;00m[33mборисовна[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Extra items in the right set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mаллы[39;49;00m[33m'[39;49;00m[90m[39;49;00m...[0m
[1m[31mE     [0m
[1m[31mE     ...Full output truncated (3 lines hidden), use '-vv' to show[0m
[31m[1m_ test_role_based_slavic_normalization[\u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439-ru] _[0m
[1m[31mtests/integration/test_role_based_normalization.py[0m:43: in test_role_based_slavic_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/integration/test_full_normalization_suite.py[0m:38: in assert_normalized_name
    [0m[94massert[39;49;00m expected_parts == actual_tokens, \
[1m[31mE   AssertionError: Ожидалось: {'чайковский', 'петр'}, получено: {'петр', 'чайковском'}[0m
[1m[31mE   assert {'петр', 'чайковский'} == {'петр', 'чайковском'}[0m
[1m[31mE     [0m
[1m[31mE     Extra items in the left set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mчайковский[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Extra items in the right set:[0m
[1m[31mE     [0m[33m'[39;49;00m[33mчайковском[39;49;00m[33m'[39;49;00m[90m[39;49;00m[0m
[1m[31mE     Use -v to get more diff[0m
[31m[1m_______ TestRussianUkrainianSentences.test_multiple_persons_same_surname _______[0m
[1m[31mtests/integration/test_ru_uk_sentences.py[0m:97: in test_multiple_persons_same_surname
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mВладимир Петров[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Владимир Петров' in 'Владимир Анна Петров'[0m
[1m[31mE    +  where 'Владимир Анна Петров' = NormalizationResult(normalized='Владимир Анна Петров', tokens=['Владимир', 'Анна', 'Петров'], trace=[TokenTrace(token=...re_female': 3, 'score_male': 2, 'gap': 1}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m____________ TestRussianUkrainianSentences.test_surname_variations _____________[0m
[1m[31mtests/integration/test_ru_uk_sentences.py[0m:161: in test_surname_variations
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mПетрова[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Петрова' in 'Петров Петров Петров Петров'[0m
[1m[31mE    +  where 'Петров Петров Петров Петров' = NormalizationResult(normalized='Петров Петров Петров Петров', tokens=['Петров', 'Петров', 'Петров', 'Петров'], trace=[...re_female': 0, 'score_male': 2, 'gap': 2}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m____ TestRussianUkrainianSentences.test_organization_legal_forms_filtering _____[0m
[1m[31mtests/integration/test_ru_uk_sentences.py[0m:184: in test_organization_legal_forms_filtering
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mEXAMPLE[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.organizations[90m[39;49;00m
[1m[31mE   AssertionError: assert 'EXAMPLE' in ['ПРИВАТБАНК', 'ТЕСТ'][0m
[1m[31mE    +  where ['ПРИВАТБАНК', 'ТЕСТ'] = NormalizationResult(normalized='Example', tokens=['Example'], trace=[TokenTrace(token='ПРИВАТБАНК', role='org', rule='...p': 0}}], person_gender=None, gender_confidence=None, organizations=['ПРИВАТБАНК', 'ТЕСТ'], org_core='ПРИВАТБАНК ТЕСТ').organizations[0m
[31m[1m________ TestRussianUkrainianSentences.test_performance_with_long_text _________[0m
[1m[31mtests/integration/test_ru_uk_sentences.py[0m:198: in test_performance_with_long_text
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mАнна Петровна Сидорова[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Анна Петровна Сидорова' in 'Петр Иванович Коваленко Анна Петровна Сидоров Владимир Сергеевич Петров Елена Александровна Козлов Михаил Николаевич Смирнов Ольга Владимировна Морозов'[0m
[1m[31mE    +  where 'Петр Иванович Коваленко Анна Петровна Сидоров Владимир Сергеевич Петров Елена Александровна Козлов Михаил Николаевич Смирнов Ольга Владимировна Морозов' = NormalizationResult(normalized='Петр Иванович Коваленко Анна Петровна Сидоров Владимир Сергеевич Петров Елена Александ...female': 18, 'score_male': 28, 'gap': 10}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m__ TestSmartFilterAdapterIntegration.test_should_process_basic_functionality ___[0m
[1m[31mtests/unit/layers/test_smart_filter_adapter.py[0m:294: in test_should_process_basic_functionality
    [0mresult = [94mawait[39;49;00m adapter.should_process([33m"[39;49;00m[33mТОВ Тестова Компанія[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
                   ^^^^^^^[90m[39;49;00m
[1m[31mE   NameError: name 'adapter' is not defined[0m
[31m[1m____________________ test_orchestrator_with_metrics_service ____________________[0m
[1m[31mtests/unit/monitoring/test_metrics_basic.py[0m:85: in test_orchestrator_with_metrics_service
    [0m[94massert[39;49;00m result.success [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='John Doe', language='unknown', language_confidence=0.0, normalized_text='', tok..., decision=None, processing_time=0.00011181831359863281, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[33mWARNING [0m ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.requests.total
[33mWARNING [0m ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.requests.active
[33mWARNING [0m ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.layer.validation
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[33mWARNING [0m ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.requests.failed
[33mWARNING [0m ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.exceptions
[33mWARNING [0m ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.requests.active
[33mWARNING [0m ai_service.monitoring.metrics_service:metrics_service.py:192 Recording value for unregistered metric: processing.total_time
[31m[1m__________ TestOrchestratorMetrics.test_successful_processing_metrics __________[0m
[1m[31mtests/unit/monitoring/test_orchestrator_metrics.py[0m:188: in test_successful_processing_metrics
    [0m[94massert[39;49;00m [96mlen[39;49;00m(successful_requests) > [94m0[39;49;00m[90m[39;49;00m
[1m[31mE   assert 0 > 0[0m
[1m[31mE    +  where 0 = len([])[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________ TestOrchestratorMetrics.test_normalization_failure_metrics __________[0m
[1m[31mtests/unit/monitoring/test_orchestrator_metrics.py[0m:301: in test_normalization_failure_metrics
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mprocessing.normalization.failed[39;49;00m[33m"[39;49;00m [95min[39;49;00m metrics_service.metrics[90m[39;49;00m
[1m[31mE   AssertionError: assert 'processing.normalization.failed' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.816937, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757970195.816939, 'type': 'gauge', ...}, ...}[0m
[1m[31mE    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.816937, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757970195.816939, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4ae9d0830>.metrics[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m____________ TestOrchestratorMetrics.test_variants_failure_metrics _____________[0m
[1m[31mtests/unit/monitoring/test_orchestrator_metrics.py[0m:319: in test_variants_failure_metrics
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mprocessing.variants.failed[39;49;00m[33m"[39;49;00m [95min[39;49;00m metrics_service.metrics[90m[39;49;00m
[1m[31mE   AssertionError: assert 'processing.variants.failed' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.8254771, 'type': 'counter', ...}, 'proces...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757970195.825479, 'type': 'gauge', ...}, ...}[0m
[1m[31mE    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.8254771, 'type': 'counter', ...}, 'proces...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757970195.825479, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4aea020b0>.metrics[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestOrchestratorMetrics.test_embeddings_failure_metrics ____________[0m
[1m[31mtests/unit/monitoring/test_orchestrator_metrics.py[0m:337: in test_embeddings_failure_metrics
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mprocessing.embeddings.failed[39;49;00m[33m"[39;49;00m [95min[39;49;00m metrics_service.metrics[90m[39;49;00m
[1m[31mE   AssertionError: assert 'processing.embeddings.failed' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.8334138, 'type': 'counter', ...}, 'proces..., 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757970195.8334148, 'type': 'gauge', ...}, ...}[0m
[1m[31mE    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.8334138, 'type': 'counter', ...}, 'proces..., 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757970195.8334148, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4ae5bc670>.metrics[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m____________ TestOrchestratorMetrics.test_decision_failure_metrics _____________[0m
[1m[31mtests/unit/monitoring/test_orchestrator_metrics.py[0m:351: in test_decision_failure_metrics
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mprocessing.decision.failed[39;49;00m[33m"[39;49;00m [95min[39;49;00m metrics_service.metrics[90m[39;49;00m
[1m[31mE   AssertionError: assert 'processing.decision.failed' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.840945, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757970195.840946, 'type': 'gauge', ...}, ...}[0m
[1m[31mE    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.840945, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1757970195.840946, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4ae574750>.metrics[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____________ TestOrchestratorMetrics.test_slow_processing_metrics _____________[0m
[1m[31mtests/unit/monitoring/test_orchestrator_metrics.py[0m:377: in test_slow_processing_metrics
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mprocessing.slow_requests[39;49;00m[33m"[39;49;00m [95min[39;49;00m metrics_service.metrics[90m[39;49;00m
[1m[31mE   AssertionError: assert 'processing.slow_requests' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1000.5, 'type': 'counter', ...}, 'processing.layer.s...timer', ...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1000.5, 'type': 'gauge', ...}, ...}[0m
[1m[31mE    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1000.5, 'type': 'counter', ...}, 'processing.layer.s...timer', ...}, 'processing.requests.active': {'count': 2, 'labels': {}, 'timestamp': 1000.5, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4ae6e4830>.metrics[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________ TestOrchestratorMetrics.test_language_detection_distribution _________[0m
[1m[31mtests/unit/monitoring/test_orchestrator_metrics.py[0m:437: in test_language_detection_distribution
    [0m[94massert[39;49;00m counter_name [95min[39;49;00m metrics_service.metrics[90m[39;49;00m
[1m[31mE   AssertionError: assert 'language_detection.detected.en' in {'processing.exceptions': {'count': 3, 'labels': {}, 'timestamp': 1757970195.864195, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 6, 'labels': {}, 'timestamp': 1757970195.864196, 'type': 'gauge', ...}, ...}[0m
[1m[31mE    +  where {'processing.exceptions': {'count': 3, 'labels': {}, 'timestamp': 1757970195.864195, 'type': 'counter', ...}, 'process...}, 'processing.requests.active': {'count': 6, 'labels': {}, 'timestamp': 1757970195.864196, 'type': 'gauge', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4ae634750>.metrics[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m________ TestOrchestratorMetrics.test_metrics_without_optional_services ________[0m
[1m[31mtests/unit/monitoring/test_orchestrator_metrics.py[0m:491: in test_metrics_without_optional_services
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mprocessing.requests.successful[39;49;00m[33m"[39;49;00m [95min[39;49;00m metrics_service.metrics[90m[39;49;00m
[1m[31mE   AssertionError: assert 'processing.requests.successful' in {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.877221, 'type': 'counter', ...}, 'process... 'processing.requests.failed': {'count': 1, 'labels': {}, 'timestamp': 1757970195.877219, 'type': 'counter', ...}, ...}[0m
[1m[31mE    +  where {'processing.exceptions': {'count': 1, 'labels': {}, 'timestamp': 1757970195.877221, 'type': 'counter', ...}, 'process... 'processing.requests.failed': {'count': 1, 'labels': {}, 'timestamp': 1757970195.877219, 'type': 'counter', ...}, ...} = <ai_service.monitoring.metrics_service.MetricsService object at 0x4ae9bf770>.metrics[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestOrchestratorService.test_process_basic_functionality ___________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:40: in test_process_basic_functionality
    [0m[94massert[39;49;00m result.success [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Test text', language='unknown', language_confidence=0.0, normalized_text='', to...one, decision=None, processing_time=4.1961669921875e-05, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_____________ TestOrchestratorService.test_process_with_cache_hit ______________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:53: in test_process_with_cache_hit
    [0mcached_result = UnifiedProcessingResult([90m[39;49;00m
[1m[31mE   TypeError: UnifiedProcessingResult.__init__() missing 3 required positional arguments: 'tokens', 'trace', and 'signals'[0m
[31m[1m_____________ TestOrchestratorService.test_process_with_cache_miss _____________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:80: in test_process_with_cache_miss
    [0m[94mwith[39;49;00m patch.object(orchestrator_service.cache_service, [33m'[39;49;00m[33mget[39;49;00m[33m'[39;49;00m) [94mas[39;49;00m mock_get, \
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'cache_service'. Did you mean: 'unicode_service'?[0m
[31m[1m_____________ TestOrchestratorService.test_process_with_embeddings _____________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:108: in test_process_with_embeddings
    [0mpatch.object(orchestrator_service.embedding_service, [33m'[39;49;00m[33mget_embeddings[39;49;00m[33m'[39;49;00m) [94mas[39;49;00m mock_embeddings:[90m[39;49;00m
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'embedding_service'. Did you mean: 'embeddings_service'?[0m
[31m[1m_____________ TestOrchestratorService.test_process_error_handling ______________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:142: in test_process_error_handling
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mUnicode service error[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.errors[[94m0[39;49;00m][90m[39;49;00m
[1m[31mE   assert 'Unicode service error' in "'str' object has no attribute 'get'"[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________________ TestOrchestratorService.test_process_batch __________________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:155: in test_process_batch
    [0mUnifiedProcessingResult([90m[39;49;00m
[1m[31mE   TypeError: UnifiedProcessingResult.__init__() missing 3 required positional arguments: 'tokens', 'trace', and 'signals'[0m
[31m[1m__________ TestOrchestratorService.test_process_batch_with_exceptions __________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:183: in test_process_batch_with_exceptions
    [0mUnifiedProcessingResult([90m[39;49;00m
[1m[31mE   TypeError: UnifiedProcessingResult.__init__() missing 3 required positional arguments: 'tokens', 'trace', and 'signals'[0m
[31m[1m______ TestOrchestratorService.test_search_similar_names_with_embeddings _______[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:209: in test_search_similar_names_with_embeddings
    [0m[94mwith[39;49;00m patch.object(orchestrator_service.embedding_service, [33m'[39;49;00m[33mfind_similar_texts[39;49;00m[33m'[39;49;00m) [94mas[39;49;00m mock_search:[90m[39;49;00m
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'embedding_service'. Did you mean: 'embeddings_service'?[0m
[31m[1m__________ TestOrchestratorService.test_search_similar_names_fallback __________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:239: in test_search_similar_names_fallback
    [0m[94mwith[39;49;00m patch.object(orchestrator_service.embedding_service, [33m'[39;49;00m[33mfind_similar_texts[39;49;00m[33m'[39;49;00m) [94mas[39;49;00m mock_search, \
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'embedding_service'. Did you mean: 'embeddings_service'?[0m
[31m[1m_____________ TestOrchestratorService.test_analyze_text_complexity _____________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:266: in test_analyze_text_complexity
    [0mpatch.object(orchestrator_service.signal_service, [33m'[39;49;00m[33mget_name_signals[39;49;00m[33m'[39;49;00m) [94mas[39;49;00m mock_signals:[90m[39;49;00m
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'signal_service'. Did you mean: 'signals_service'?[0m
[31m[1m______________ TestOrchestratorService.test_get_processing_stats _______________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:305: in test_get_processing_stats
    [0morchestrator_service.processing_stats[[33m'[39;49;00m[33mtotal_processed[39;49;00m[33m'[39;49;00m] = [94m10[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'processing_stats'[0m
[31m[1m___________________ TestOrchestratorService.test_clear_cache ___________________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:325: in test_clear_cache
    [0morchestrator_service.clear_cache()[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'clear_cache'[0m
[31m[1m___________________ TestOrchestratorService.test_reset_stats ___________________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:334: in test_reset_stats
    [0morchestrator_service.processing_stats[[33m'[39;49;00m[33mtotal_processed[39;49;00m[33m'[39;49;00m] = [94m5[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'processing_stats'[0m
[31m[1m_______________ TestOrchestratorService.test_generate_cache_key ________________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:347: in test_generate_cache_key
    [0mkey1 = orchestrator_service._generate_cache_key([33m"[39;49;00m[33mtest[39;49;00m[33m"[39;49;00m, [94mTrue[39;49;00m, [94mFalse[39;49;00m)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute '_generate_cache_key'[0m
[31m[1m__________________ TestOrchestratorService.test_update_stats ___________________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:360: in test_update_stats
    [0minitial_processed = orchestrator_service.processing_stats[[33m'[39;49;00m[33mtotal_processed[39;49;00m[33m'[39;49;00m][90m[39;49;00m
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'processing_stats'[0m
[31m[1m___________ TestOrchestratorService.test_calculate_complexity_score ____________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:382: in test_calculate_complexity_score
    [0mscore = orchestrator_service._calculate_complexity_score([90m[39;49;00m
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute '_calculate_complexity_score'[0m
[31m[1m_______ TestOrchestratorService.test_generate_complexity_recommendations _______[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:395: in test_generate_complexity_recommendations
    [0mlow_recommendations = orchestrator_service._generate_complexity_recommendations([94m0.2[39;49;00m)[90m[39;49;00m
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute '_generate_complexity_recommendations'[0m
[31m[1m__________ TestOrchestratorService.test_force_reprocess_ignores_cache __________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:416: in test_force_reprocess_ignores_cache
    [0mcached_result = UnifiedProcessingResult([90m[39;49;00m
[1m[31mE   TypeError: UnifiedProcessingResult.__init__() missing 3 required positional arguments: 'tokens', 'trace', and 'signals'[0m
[31m[1m___________ TestOrchestratorService.test_orchestrator_initialization ___________[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:450: in test_orchestrator_initialization
    [0m[94massert[39;49;00m orchestrator.cache_service.max_size == [94m100[39;49;00m  [90m# From fixture[39;49;00m[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'UnifiedOrchestrator' object has no attribute 'cache_service'. Did you mean: 'unicode_service'?[0m
[31m[1m_____ TestOrchestratorService.test_process_normalization_service_exception _____[0m
[1m[31mtests/unit/test_orchestrator_service_old.py[0m:531: in test_process_normalization_service_exception
    [0m[94massert[39;49;00m [96many[39;49;00m([33m'[39;49;00m[33mnormalization service error[39;49;00m[33m'[39;49;00m [95min[39;49;00m error.lower() [94mfor[39;49;00m error [95min[39;49;00m result.errors)[90m[39;49;00m
[1m[31mE   assert False[0m
[1m[31mE    +  where False = any(<generator object TestOrchestratorService.test_process_normalization_service_exception.<locals>.<genexpr> at 0x3dde5f780>)[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m src.ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestPatternService.test_case_sensitivity_handling _______________[0m
[1m[31mtests/unit/test_pattern_service.py[0m:192: in test_case_sensitivity_handling
    [0m[94massert[39;49;00m [96mlen[39;49;00m(patterns) > [94m0[39;49;00m[90m[39;49;00m
[1m[31mE   assert 0 > 0[0m
[1m[31mE    +  where 0 = len([])[0m
[31m[1m______________ TestSmartFilterService.test_service_words_cleaning ______________[0m
[1m[31mtests/unit/test_smart_filter_service.py[0m:195: in test_service_words_cleaning
    [0m[96mself[39;49;00m.assertNotEqual(cleaned, text_with_service_words)[90m[39;49;00m
[1m[31mE   AssertionError: 'оплата за консультацію Петров Іван' == 'оплата за консультацію Петров Іван'[0m
------------------------------ Captured log call -------------------------------
[33mWARNING [0m ai_service.layers.smart_filter.smart_filter_service:smart_filter_service.py:479 _clean_service_words is deprecated - use context-aware analysis instead
[31m[1m___________ TestSmartFilterService.test_should_process_text_excluded ___________[0m
[1m[31mtests/unit/test_smart_filter_service.py[0m:59: in test_should_process_text_excluded
    [0m[96mself[39;49;00m.assertIn([33m"[39;49;00m[33mисключен[39;49;00m[33m"[39;49;00m, result.processing_recommendation)[90m[39;49;00m
[1m[31mE   AssertionError: 'исключен' not found in 'Text excluded from processing (service information only)'[0m
[31m[1m____________________ TestUnicodeService.test_final_cleanup _____________________[0m
[1m[31mtests/unit/test_unicode_service.py[0m:181: in test_final_cleanup
    [0m[94massert[39;49;00m normalized == [33m"[39;49;00m[33mmultiple spaces[39;49;00m[33m"[39;49;00m  [90m# Should be cleaned and converted to lowercase[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Multiple spaces' == 'multiple spaces'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- multiple spaces[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ? ^[90m[39;49;00m[0m
[1m[31mE     [92m+ Multiple spaces[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ? ^[90m[39;49;00m[0m
[31m[1m________ TestUnicodeService.test_unicode_normalization_failure_handling ________[0m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1423: in patched
    [0m[94mwith[39;49;00m [96mself[39;49;00m.decoration_helper(patched,[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py[0m:141: in __enter__
    [0m[94mreturn[39;49;00m [96mnext[39;49;00m([96mself[39;49;00m.gen)[90m[39;49;00m
           ^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1405: in decoration_helper
    [0marg = exit_stack.enter_context(patching)[90m[39;49;00m
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py[0m:530: in enter_context
    [0mresult = _enter(cm)[90m[39;49;00m
             ^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1481: in __enter__
    [0m[96mself[39;49;00m.target = [96mself[39;49;00m.getter()[90m[39;49;00m
                  ^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/pkgutil.py[0m:528: in resolve_name
    [0mresult = [96mgetattr[39;49;00m(result, p)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: module 'src.ai_service.services' has no attribute 'unicode_service'[0m
[31m[1m__________________ TestUnicodeService.test_case_normalization __________________[0m
[1m[31mtests/unit/test_unicode_service.py[0m:265: in test_case_normalization
    [0m[94massert[39;49;00m result[[33m'[39;49;00m[33mnormalized[39;49;00m[33m'[39;49;00m].islower()[90m[39;49;00m
[1m[31mE   AssertionError: assert False[0m
[1m[31mE    +  where False = <built-in method islower of str object at 0x4ad5a69b0>()[0m
[1m[31mE    +    where <built-in method islower of str object at 0x4ad5a69b0> = 'MiXeD CaSe TeXt'.islower[0m
[31m[1m________________ TestUnifiedOrchestrator.test_complete_pipeline ________________[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:154: in test_complete_pipeline
    [0m[94massert[39;49;00m [96misinstance[39;49;00m(result, UnifiedUnifiedProcessingResult)[90m[39;49;00m
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   NameError: name 'UnifiedUnifiedProcessingResult' is not defined[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______ TestUnifiedOrchestrator.test_normalization_flags_passed_correctly _______[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:193: in test_normalization_flags_passed_correctly
    [0m[94massert[39;49;00m call_args[[94m1[39;49;00m][[33m"[39;49;00m[33mremove_stop_words[39;49;00m[33m"[39;49;00m] [95mis[39;49;00m [94mFalse[39;49;00m[90m[39;49;00m
           ^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: 'NoneType' object is not subscriptable[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m___________ TestUnifiedOrchestrator.test_optional_services_disabled ____________[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:245: in test_optional_services_disabled
    [0m[94massert[39;49;00m result.success [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Test', language='unknown', language_confidence=0.0, normalized_text='', tokens=...e, decision=None, processing_time=0.0003821849822998047, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________________ TestUnifiedOrchestrator.test_error_handling __________________[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:270: in test_error_handling
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mNormalization failed[39;49;00m[33m"[39;49;00m [95min[39;49;00m [96mstr[39;49;00m(result.errors)[90m[39;49;00m
[1m[31mE   assert 'Normalization failed' in '["\'str\' object has no attribute \'get\'"]'[0m
[1m[31mE    +  where '["\'str\' object has no attribute \'get\'"]' = str(["'str' object has no attribute 'get'"])[0m
[1m[31mE    +    where ["'str' object has no attribute 'get'"] = UnifiedProcessingResult(original_text='Test', language='unknown', language_confidence=0.0, normalized_text='', tokens=..., decision=None, processing_time=0.00017023086547851562, success=False, errors=["'str' object has no attribute 'get'"]).errors[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______________ TestUnifiedOrchestrator.test_performance_warning _______________[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:289: in test_performance_warning
    [0m[94massert[39;49;00m result.success [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
[1m[31mE    +  where False = UnifiedProcessingResult(original_text='Test', language='unknown', language_confidence=0.0, normalized_text='', tokens=..., decision=None, processing_time=0.00016689300537109375, success=False, errors=["'str' object has no attribute 'get'"]).success[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_________ TestUnifiedOrchestrator.test_backward_compatibility_methods __________[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:296: in test_backward_compatibility_methods
    [0mresult = [94mawait[39;49;00m orchestrator.normalize_async([90m[39;49;00m
[1m[31msrc/ai_service/core/unified_orchestrator.py[0m:605: in normalize_async
    [0municode_normalized = unicode_result.get([33m"[39;49;00m[33mnormalized[39;49;00m[33m"[39;49;00m, sanitized)[90m[39;49;00m
                         ^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'str' object has no attribute 'get'[0m
------------------------------ Captured log call -------------------------------
[33mWARNING [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:585 normalize_async is deprecated. Use process() instead.
[31m[1m_______________ TestUnifiedOrchestrator.test_signals_integration _______________[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:320: in test_signals_integration
    [0m[94massert[39;49;00m call_args [95mis[39;49;00m [95mnot[39;49;00m [94mNone[39;49;00m  [90m# Service was called[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   assert None is not None[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_______________ TestUnifiedOrchestrator.test_trace_preservation ________________[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:334: in test_trace_preservation
    [0m[94massert[39;49;00m [96mlen[39;49;00m(result.trace) == [94m2[39;49;00m[90m[39;49;00m
[1m[31mE   assert 0 == 2[0m
[1m[31mE    +  where 0 = len([])[0m
[1m[31mE    +    where [] = UnifiedProcessingResult(original_text='Test', language='unknown', language_confidence=0.0, normalized_text='', tokens=..., decision=None, processing_time=0.00017404556274414062, success=False, errors=["'str' object has no attribute 'get'"]).trace[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m__________________ TestUnifiedOrchestrator.test_language_hint __________________[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:347: in test_language_hint
    [0m[94massert[39;49;00m call_args[[94m1[39;49;00m][[33m"[39;49;00m[33mlanguage[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33men[39;49;00m[33m"[39;49;00m[90m[39;49;00m
           ^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   TypeError: 'NoneType' object is not subscriptable[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m______________ TestUnifiedOrchestrator.test_result_serialization _______________[0m
[1m[31mtests/unit/test_unified_orchestrator.py[0m:358: in test_result_serialization
    [0m[94massert[39;49;00m data[[33m"[39;49;00m[33mnormalized_text[39;49;00m[33m"[39;49;00m] == [33m"[39;49;00m[33mІван Петров[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: assert '' == 'Іван Петров'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Іван Петров[39;49;00m[90m[39;49;00m[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.core.unified_orchestrator:unified_orchestrator.py:444 Processing failed: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/dariapavlova/Desktop/ai-service/src/ai_service/core/unified_orchestrator.py", line 240, in process
    unicode_normalized = unicode_result.get("normalized", context.sanitized_text)
                         ^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'get'
[31m[1m_ test_ukrainian_full_normalization[\u0414\u043b\u044f \u0416\u0435\u043d\u0456 \u0413\u0430\u043b\u0438\u0447\u0430 \u0437 \u0433\u0440\u0443\u043f\u0438 O.Torvald-\u0404\u0432\u0433\u0435\u043d \u0413\u0430\u043b\u0438\u0447] _[0m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:48: in test_ukrainian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:18: in assert_normalized_name
    [0m[94massert[39;49;00m result.normalized == expected_name, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m'[39;49;00m[33m{[39;49;00mexpected_name[33m}[39;49;00m[33m'[39;49;00m[33m, but got [39;49;00m[33m'[39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m'[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected 'Євген Галич', but got 'Євген Галич З.'[0m
[1m[31mE   assert 'Євген Галич З.' == 'Євген Галич'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Євген Галич[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ Євген Галич З.[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ?            +++[90m[39;49;00m[0m
[31m[1m_ test_ukrainian_full_normalization[\u0417\u0443\u0441\u0442\u0440\u0456\u0447 \u0437 \u041b\u0456\u043d\u043e\u044e \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e-\u041b\u0456\u043d\u0430 \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e] _[0m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:48: in test_ukrainian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:18: in assert_normalized_name
    [0m[94massert[39;49;00m result.normalized == expected_name, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m'[39;49;00m[33m{[39;49;00mexpected_name[33m}[39;49;00m[33m'[39;49;00m[33m, but got [39;49;00m[33m'[39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m'[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected 'Ліна Костенко', but got 'З. Ліна Костенко'[0m
[1m[31mE   assert 'З. Ліна Костенко' == 'Ліна Костенко'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Ліна Костенко[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ З. Ліна Костенко[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ? +++[90m[39;49;00m[0m
[31m[1m_ test_ukrainian_full_normalization[\u0420\u043e\u0437\u043c\u043e\u0432\u043b\u044f\u0432 \u0437 \u0412\u0430\u043b\u0435\u0440\u0456\u0454\u043c \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u043c-\u0412\u0430\u043b\u0435\u0440\u0456\u0439 \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u0439] _[0m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:48: in test_ukrainian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:18: in assert_normalized_name
    [0m[94massert[39;49;00m result.normalized == expected_name, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m'[39;49;00m[33m{[39;49;00mexpected_name[33m}[39;49;00m[33m'[39;49;00m[33m, but got [39;49;00m[33m'[39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m'[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected 'Валерій Залужний', but got 'З. Валерій Залужний'[0m
[1m[31mE   assert 'З. Валерій Залужний' == 'Валерій Залужний'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Валерій Залужний[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ З. Валерій Залужний[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ? +++[90m[39;49;00m[0m
[31m[1m_ test_ukrainian_full_normalization[\u0414\u043b\u044f \u0406\u0432\u0430\u043d\u043e\u0432\u0430-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u0430 \u0421.\u0412.-\u0406\u0432\u0430\u043d\u043e\u0432-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u043e \u0421.\u0412.] _[0m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:48: in test_ukrainian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:18: in assert_normalized_name
    [0m[94massert[39;49;00m result.normalized == expected_name, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m'[39;49;00m[33m{[39;49;00mexpected_name[33m}[39;49;00m[33m'[39;49;00m[33m, but got [39;49;00m[33m'[39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m'[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected 'Іванов-Петренко С.В.', but got 'Іванов-Петренко С. В.'[0m
[1m[31mE   assert 'Іванов-Петренко С. В.' == 'Іванов-Петренко С.В.'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Іванов-Петренко С.В.[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ Іванов-Петренко С. В.[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ?                   +[90m[39;49;00m[0m
[31m[1m_ test_russian_full_normalization[\u0414\u043b\u044f \u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430] _[0m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:111: in test_russian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:18: in assert_normalized_name
    [0m[94massert[39;49;00m result.normalized == expected_name, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m'[39;49;00m[33m{[39;49;00mexpected_name[33m}[39;49;00m[33m'[39;49;00m[33m, but got [39;49;00m[33m'[39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m'[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected 'Алла Борисовна Пугачева', but got 'Аллы Борисовн Пугачев'[0m
[1m[31mE   assert 'Аллы Борисовн Пугачев' == 'Алла Борисовна Пугачева'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Алла Борисовна Пугачева[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ?    ^         -        -[90m[39;49;00m[0m
[1m[31mE     [92m+ Аллы Борисовн Пугачев[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ?    ^[90m[39;49;00m[0m
[31m[1m_ test_russian_full_normalization[\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439] _[0m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:111: in test_russian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:18: in assert_normalized_name
    [0m[94massert[39;49;00m result.normalized == expected_name, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m'[39;49;00m[33m{[39;49;00mexpected_name[33m}[39;49;00m[33m'[39;49;00m[33m, but got [39;49;00m[33m'[39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m'[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected 'Петр Чайковский', but got 'Петр Чайковском'[0m
[1m[31mE   assert 'Петр Чайковском' == 'Петр Чайковский'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Петр Чайковский[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ?              ^^[90m[39;49;00m[0m
[1m[31mE     [92m+ Петр Чайковском[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ?              ^^[90m[39;49;00m[0m
[31m[1m_ test_russian_full_normalization[\u0412\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0410\u043d\u043d\u043e\u0439 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u043e\u0439-\u0410\u043d\u043d\u0430 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u0430] _[0m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:111: in test_russian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:18: in assert_normalized_name
    [0m[94massert[39;49;00m result.normalized == expected_name, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m'[39;49;00m[33m{[39;49;00mexpected_name[33m}[39;49;00m[33m'[39;49;00m[33m, but got [39;49;00m[33m'[39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m'[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected 'Анна Ахматова', but got 'С. Анна Ахматова'[0m
[1m[31mE   assert 'С. Анна Ахматова' == 'Анна Ахматова'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Анна Ахматова[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ С. Анна Ахматова[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ? +++[90m[39;49;00m[0m
[31m[1m_ test_russian_full_normalization[\u0417\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u043e\u0442 \u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432\u0430 \u041c.\u042e.-\u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432 \u041c.\u042e.] _[0m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:111: in test_russian_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:18: in assert_normalized_name
    [0m[94massert[39;49;00m result.normalized == expected_name, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m'[39;49;00m[33m{[39;49;00mexpected_name[33m}[39;49;00m[33m'[39;49;00m[33m, but got [39;49;00m[33m'[39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m'[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected 'Лермонтов М.Ю.', but got 'Лермонтов М. Ю.'[0m
[1m[31mE   assert 'Лермонтов М. Ю.' == 'Лермонтов М.Ю.'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Лермонтов М.Ю.[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ Лермонтов М. Ю.[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ?             +[90m[39;49;00m[0m
[31m[1m___ test_english_full_normalization[Sent to ELON MUSK for X corp-Elon Musk] ____[0m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:130: in test_english_full_normalization
    [0massert_normalized_name(result, expected_name)[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_logic.py[0m:18: in assert_normalized_name
    [0m[94massert[39;49;00m result.normalized == expected_name, [33mf[39;49;00m[33m"[39;49;00m[33mExpected [39;49;00m[33m'[39;49;00m[33m{[39;49;00mexpected_name[33m}[39;49;00m[33m'[39;49;00m[33m, but got [39;49;00m[33m'[39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m'[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected 'Elon Musk', but got 'Elon Musk X'[0m
[1m[31mE   assert 'Elon Musk X' == 'Elon Musk'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Elon Musk[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ Elon Musk X[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ?          ++[90m[39;49;00m[0m
[31m[1m_ TestNormalizationResultFields.test_normalization_result_basic_serialization __[0m
[1m[31mtests/unit/text_processing/test_normalization_result_fields.py[0m:110: in test_normalization_result_basic_serialization
    [0mresult_dict = dataclasses.asdict(result)[90m[39;49;00m
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/dataclasses.py[0m:1358: in asdict
    [0m[94mraise[39;49;00m [96mTypeError[39;49;00m([33m"[39;49;00m[33masdict() should be called on dataclass instances[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
[1m[31mE   TypeError: asdict() should be called on dataclass instances[0m
[31m[1m_________ TestNormalizationService.test_normalize_russian_complex_text _________[0m
[1m[31mtests/unit/text_processing/test_normalization_service.py[0m:226: in test_normalize_russian_complex_text
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mАнна[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Анна' in 'Иван Петров Анны Смирнов'[0m
[1m[31mE    +  where 'Иван Петров Анны Смирнов' = NormalizationResult(normalized='Иван Петров Анны Смирнов', tokens=['Иван', 'Петров', 'Анны', 'Смирнов'], trace=[TokenT...re_female': 0, 'score_male': 7, 'gap': 7}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m________ TestNormalizationService.test_normalize_ukrainian_complex_text ________[0m
[1m[31mtests/unit/text_processing/test_normalization_service.py[0m:237: in test_normalize_ukrainian_complex_text
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mАнна[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Анна' in 'Іван Петров Анни Смірнов'[0m
[1m[31mE    +  where 'Іван Петров Анни Смірнов' = NormalizationResult(normalized='Іван Петров Анни Смірнов', tokens=['Іван', 'Петров', 'Анни', 'Смірнов'], trace=[TokenT...re_female': 0, 'score_male': 7, 'gap': 7}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m_____________ TestNormalizationService.test_normalize_english_text _____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:48: in test_normalize_english_text
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mHello world[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Hello world' in 'Hello World'[0m
[1m[31mE    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m_____________ TestNormalizationService.test_normalize_russian_text _____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:56: in test_normalize_russian_text
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mПривет[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Привет' in ''[0m
[1m[31mE    +  where '' = NormalizationResult(normalized='', tokens=[], trace=[], errors=[], language='ru', confidence=1.0, original_length=10, ..._core=[], organizations_core=[], persons=[], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m____________ TestNormalizationService.test_normalize_with_fallback _____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:72: in test_normalize_with_fallback
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mHello world[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Hello world' in 'Hello World'[0m
[1m[31mE    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m_____ TestNormalizationService.test_normalize_with_auto_language_detection _____[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:76: in test_normalize_with_auto_language_detection
    [0mresult = service.normalize([33m"[39;49;00m[33mHello world[39;49;00m[33m"[39;49;00m, language=[33m"[39;49;00m[33mauto[39;49;00m[33m"[39;49;00m)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31msrc/ai_service/utils/performance.py[0m:21: in wrapper
    [0mresult = func(*args, **kwargs)[90m[39;49;00m
             ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31msrc/ai_service/utils/performance.py[0m:54: in wrapper
    [0m[94mreturn[39;49;00m func(*args, **kwargs)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31msrc/ai_service/layers/normalization/normalization_service.py[0m:390: in normalize
    [0m[94mreturn[39;49;00m [96mself[39;49;00m._normalize_sync([90m[39;49;00m
[1m[31msrc/ai_service/layers/normalization/normalization_service.py[0m:568: in _normalize_sync
    [0m[94mreturn[39;49;00m NormalizationResult([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 1 validation error for NormalizationResult[0m
[1m[31mE   language[0m
[1m[31mE     Input should be a valid string [type=string_type, input_value=<Mock name='LanguageDetec...guage' id='14199411376'>, input_type=Mock][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.11/v/string_type[0m
------------------------------ Captured log call -------------------------------
[1m[31mERROR   [0m ai_service.layers.normalization.normalization_service:normalization_service.py:561 Normalization failed: 2 validation errors for NormalizationResult
language
  Input should be a valid string [type=string_type, input_value=<Mock name='LanguageDetec...guage' id='14199411376'>, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
confidence
  Input should be a valid number [type=float_type, input_value=<Mock name='LanguageDetec...dence' id='14199411712'>, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.11/v/float_type
[1m[31mERROR   [0m ai_service.utils.performance:performance.py:34 Error in normalize after 0.004s: 1 validation error for NormalizationResult
language
  Input should be a valid string [type=string_type, input_value=<Mock name='LanguageDetec...guage' id='14199411376'>, input_type=Mock]
    For further information visit https://errors.pydantic.dev/2.11/v/string_type
[31m[1m_______ TestNormalizationService.test_normalize_with_special_characters ________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:132: in test_normalize_with_special_characters
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mO[39;49;00m[33m'[39;49;00m[33mConnor[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   assert "O'Connor" in "O'connor"[0m
[1m[31mE    +  where "O'connor" = NormalizationResult(normalized="O'connor", tokens=["O'connor"], trace=[TokenTrace(token="O'Connor", role='given', rule...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m_____________ TestNormalizationService.test_normalize_sync_method ______________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:147: in test_normalize_sync_method
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mHello world[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Hello world' in 'Hello World'[0m
[1m[31mE    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m_____________ TestNormalizationService.test_normalize_async_method _____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:158: in test_normalize_async_method
    [0masyncio.run(run_test())[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py[0m:195: in run
    [0m[94mreturn[39;49;00m runner.run(main)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/runners.py[0m:118: in run
    [0m[94mreturn[39;49;00m [96mself[39;49;00m._loop.run_until_complete(task)[90m[39;49;00m
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/asyncio/base_events.py[0m:725: in run_until_complete
    [0m[94mreturn[39;49;00m future.result()[90m[39;49;00m
           ^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:156: in run_test
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mHello world[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Hello world' in 'Hello World'[0m
[1m[31mE    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m______________ TestNormalizationService.test_normalize_with_flags ______________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:171: in test_normalize_with_flags
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mHello world[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Hello world' in 'Hello World'[0m
[1m[31mE    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m_________ TestNormalizationService.test_normalize_russian_complex_text _________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:216: in test_normalize_russian_complex_text
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mАнна[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Анна' in 'Иван Петров Анны Смирнов'[0m
[1m[31mE    +  where 'Иван Петров Анны Смирнов' = NormalizationResult(normalized='Иван Петров Анны Смирнов', tokens=['Иван', 'Петров', 'Анны', 'Смирнов'], trace=[TokenT...re_female': 0, 'score_male': 7, 'gap': 7}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m________ TestNormalizationService.test_normalize_ukrainian_complex_text ________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:227: in test_normalize_ukrainian_complex_text
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mАнна[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Анна' in 'Іван Петров Анни Смірнов'[0m
[1m[31mE    +  where 'Іван Петров Анни Смірнов' = NormalizationResult(normalized='Іван Петров Анни Смірнов', tokens=['Іван', 'Петров', 'Анни', 'Смірнов'], trace=[TokenT...re_female': 0, 'score_male': 7, 'gap': 7}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m__ TestNormalizationServiceConfiguration.test_diminutive_maps_initialization ___[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:292: in test_diminutive_maps_initialization
    [0m[94massert[39;49;00m [33m'[39;49;00m[33men[39;49;00m[33m'[39;49;00m [95min[39;49;00m service.diminutive_maps[90m[39;49;00m
[1m[31mE   AssertionError: assert 'en' in {'ru': {'алекс': 'Александр', 'алекса': 'Александра', 'алина': 'Алина', 'алис': 'Алиса', ...}, 'uk': {'алекс': 'Олександр', 'алекса': 'Олександра', 'алина': 'Алина', 'алка': 'Алла', ...}}[0m
[1m[31mE    +  where {'ru': {'алекс': 'Александр', 'алекса': 'Александра', 'алина': 'Алина', 'алис': 'Алиса', ...}, 'uk': {'алекс': 'Олександр', 'алекса': 'Олександра', 'алина': 'Алина', 'алка': 'Алла', ...}} = <ai_service.layers.normalization.normalization_service.NormalizationService object at 0x581463bd0>.diminutive_maps[0m
[31m[1m__________ TestNormalizationResult.test_normalization_result_creation __________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:304: in test_normalization_result_creation
    [0mresult = NormalizationResult([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 1 validation error for NormalizationResult[0m
[1m[31mE   normalized[0m
[1m[31mE     Field required [type=missing, input_value={'original_text': 'test',...ss': True, 'errors': []}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.11/v/missing[0m
[31m[1m_________ TestNormalizationResult.test_normalization_result_error_case _________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_fixed.py[0m:328: in test_normalization_result_error_case
    [0mresult = NormalizationResult([90m[39;49;00m
[1m[31mE   pydantic_core._pydantic_core.ValidationError: 1 validation error for NormalizationResult[0m
[1m[31mE   normalized[0m
[1m[31mE     Field required [type=missing, input_value={'original_text': 'test',...errors': ['Test error']}, input_type=dict][0m
[1m[31mE       For further information visit https://errors.pydantic.dev/2.11/v/missing[0m
[31m[1m_____________ TestNormalizationService.test_normalize_english_text _____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:53: in test_normalize_english_text
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mHello world[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Hello world' in 'Hello World'[0m
[1m[31mE    +  where 'Hello World' = NormalizationResult(normalized='Hello World', tokens=['Hello', 'World'], trace=[TokenTrace(token='Hello', role='given'...re_female': 0, 'score_male': 0, 'gap': 0}}], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m_____________ TestNormalizationService.test_normalize_russian_text _____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:61: in test_normalize_russian_text
    [0m[94massert[39;49;00m [33m"[39;49;00m[33mПривет[39;49;00m[33m"[39;49;00m [95min[39;49;00m result.normalized[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Привет' in ''[0m
[1m[31mE    +  where '' = NormalizationResult(normalized='', tokens=[], trace=[], errors=[], language='ru', confidence=1.0, original_length=10, ..._core=[], organizations_core=[], persons=[], person_gender=None, gender_confidence=None, organizations=[], org_core='').normalized[0m
[31m[1m_________ TestNormalizationService.test_tokenize_text_fallback_to_nltk _________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:75: in test_tokenize_text_fallback_to_nltk
    [0mservice.language_configs[[33m"[39;49;00m[33men[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mspacy_model[39;49;00m[33m"[39;49;00m] = [94mNone[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m__________ TestNormalizationService.test_tokenize_text_basic_fallback __________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:90: in test_tokenize_text_basic_fallback
    [0mservice.language_configs[[33m"[39;49;00m[33men[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mspacy_model[39;49;00m[33m"[39;49;00m] = [94mNone[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m___________ TestNormalizationService.test_remove_stop_words_english ____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:104: in test_remove_stop_words_english
    [0mservice.language_configs[[33m"[39;49;00m[33men[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mstop_words[39;49;00m[33m"[39;49;00m] = {[33m"[39;49;00m[33mthe[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mis[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33ma[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33man[39;49;00m[33m"[39;49;00m}[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m___________ TestNormalizationService.test_remove_stop_words_russian ____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:114: in test_remove_stop_words_russian
    [0mservice.language_configs[[33m"[39;49;00m[33mru[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mstop_words[39;49;00m[33m"[39;49;00m] = {[33m"[39;49;00m[33mи[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mв[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mна[39;49;00m[33m"[39;49;00m, [33m"[39;49;00m[33mс[39;49;00m[33m"[39;49;00m}[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m___________ TestNormalizationService.test_remove_stop_words_fallback ___________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:123: in test_remove_stop_words_fallback
    [0m[94mwith[39;49;00m patch([90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1497: in __enter__
    [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
                      ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1467: in get_original
    [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
[1m[31mE   AttributeError: <module 'src.ai_service.layers.normalization.normalization_service' from '/Users/dariapavlova/Desktop/ai-service/src/ai_service/layers/normalization/normalization_service.py'> does not have the attribute '_nltk_stopwords'[0m
[31m[1m_____________ TestNormalizationService.test_apply_stemming_english _____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:139: in test_apply_stemming_english
    [0mservice.language_configs[[33m"[39;49;00m[33men[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mstemmer[39;49;00m[33m"[39;49;00m] = mock_stemmer[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m_____________ TestNormalizationService.test_apply_stemming_russian _____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:152: in test_apply_stemming_russian
    [0mservice.language_configs[[33m"[39;49;00m[33mru[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mstemmer[39;49;00m[33m"[39;49;00m] = mock_stemmer[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m____________ TestNormalizationService.test_apply_stemming_ukrainian ____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:165: in test_apply_stemming_ukrainian
    [0mservice.language_configs[[33m"[39;49;00m[33muk[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mstemmer[39;49;00m[33m"[39;49;00m] = mock_stemmer[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m____________ TestNormalizationService.test_apply_stemming_fallback _____________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:176: in test_apply_stemming_fallback
    [0mservice.language_configs[[33m"[39;49;00m[33men[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mstemmer[39;49;00m[33m"[39;49;00m] = [94mNone[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m__________ TestNormalizationService.test_apply_lemmatization_english ___________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:199: in test_apply_lemmatization_english
    [0mservice.language_configs[[33m"[39;49;00m[33men[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mspacy_model[39;49;00m[33m"[39;49;00m] = mock_nlp[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m__________ TestNormalizationService.test_apply_lemmatization_russian ___________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:219: in test_apply_lemmatization_russian
    [0mservice.language_configs[[33m"[39;49;00m[33mru[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mspacy_model[39;49;00m[33m"[39;49;00m] = mock_nlp[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m__________ TestNormalizationService.test_apply_lemmatization_fallback __________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:230: in test_apply_lemmatization_fallback
    [0mservice.language_configs[[33m"[39;49;00m[33men[39;49;00m[33m"[39;49;00m][[33m"[39;49;00m[33mspacy_model[39;49;00m[33m"[39;49;00m] = [94mNone[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationService' object has no attribute 'language_configs'[0m
[31m[1m___ TestNormalizationServiceConfiguration.test_initialization_without_spacy ____[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:581: in test_initialization_without_spacy
    [0m[94mwith[39;49;00m patch([90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1497: in __enter__
    [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
                      ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1467: in get_original
    [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
[1m[31mE   AttributeError: <module 'src.ai_service.layers.normalization.normalization_service' from '/Users/dariapavlova/Desktop/ai-service/src/ai_service/layers/normalization/normalization_service.py'> does not have the attribute 'SPACY_AVAILABLE'[0m
[31m[1m____ TestNormalizationServiceConfiguration.test_initialization_without_nltk ____[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:598: in test_initialization_without_nltk
    [0m[94mwith[39;49;00m patch([90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1497: in __enter__
    [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
                      ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1467: in get_original
    [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
[1m[31mE   AttributeError: <module 'src.ai_service.layers.normalization.normalization_service' from '/Users/dariapavlova/Desktop/ai-service/src/ai_service/layers/normalization/normalization_service.py'> does not have the attribute 'NLTK_AVAILABLE'[0m
[31m[1m_ TestNormalizationServiceConfiguration.test_initialization_minimal_dependencies _[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:615: in test_initialization_minimal_dependencies
    [0m[94mwith[39;49;00m patch([90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1497: in __enter__
    [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
                      ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1467: in get_original
    [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
[1m[31mE   AttributeError: <module 'src.ai_service.layers.normalization.normalization_service' from '/Users/dariapavlova/Desktop/ai-service/src/ai_service/layers/normalization/normalization_service.py'> does not have the attribute 'SPACY_AVAILABLE'[0m
[31m[1m________ TestNormalizationServiceConfiguration.test_cache_functionality ________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:647: in test_cache_functionality
    [0m[94mwith[39;49;00m patch([90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1497: in __enter__
    [0moriginal, local = [96mself[39;49;00m.get_original()[90m[39;49;00m
                      ^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31m/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/unittest/mock.py[0m:1467: in get_original
    [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([90m[39;49;00m
[1m[31mE   AttributeError: <module 'src.ai_service.layers.normalization.normalization_service' from '/Users/dariapavlova/Desktop/ai-service/src/ai_service/layers/normalization/normalization_service.py'> does not have the attribute 'nlp_en'[0m
[31m[1m_________ TestNormalizationResult.test_normalization_result_error_case _________[0m
[1m[31mtests/unit/text_processing/test_normalization_service_old.py[0m:720: in test_normalization_result_error_case
    [0m[94massert[39;49;00m result.error == [33m"[39;49;00m[33mProcessing failed[39;49;00m[33m"[39;49;00m[90m[39;49;00m
           ^^^^^^^^^^^^[90m[39;49;00m
[1m[31mvenv/lib/python3.13/site-packages/pydantic/main.py[0m:991: in __getattr__
    [0m[94mraise[39;49;00m [96mAttributeError[39;49;00m([33mf[39;49;00m[33m'[39;49;00m[33m{[39;49;00m[96mtype[39;49;00m([96mself[39;49;00m).[91m__name__[39;49;00m[33m!r}[39;49;00m[33m object has no attribute [39;49;00m[33m{[39;49;00mitem[33m!r}[39;49;00m[33m'[39;49;00m)[90m[39;49;00m
[1m[31mE   AttributeError: 'NormalizationResult' object has no attribute 'error'. Did you mean: 'errors'?[0m
[31m[1m____________________ TestUnicodeService.test_final_cleanup _____________________[0m
[1m[31mtests/unit/text_processing/test_unicode_service.py[0m:182: in test_final_cleanup
    [0m[94massert[39;49;00m normalized == [33m"[39;49;00m[33m  Multiple   spaces  [39;49;00m[33m\t[39;49;00m[33m\n[39;49;00m[33m  [39;49;00m[33m"[39;49;00m  [90m# Should be unchanged by UnicodeService[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Multiple spaces' == '  Multiple   spaces  \t\n  '[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m-   Multiple   spaces  	[39;49;00m[90m[39;49;00m[0m
[1m[31mE     ? --         --      ----[90m[39;49;00m[0m
[1m[31mE     [92m+ Multiple spaces[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [91m-   [39;49;00m[90m[39;49;00m[0m
[31m[1m___________ TestCanaryOverfit.test_context_words_never_become_names ____________[0m
[1m[31mtests/unit/utilities/test_canary_overfit.py[0m:34: in test_context_words_never_become_names
    [0m[94massert[39;49;00m name [95min[39;49;00m normalized, [33mf[39;49;00m[33m"[39;49;00m[33mExpected name [39;49;00m[33m'[39;49;00m[33m{[39;49;00mname[33m}[39;49;00m[33m'[39;49;00m[33m not found in normalized output: [39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Expected name 'п.і.' not found in normalized output: П. І. Коваленко Петросян[0m
[1m[31mE   assert 'п.і.' in 'п. і. коваленко петросян'[0m
[31m[1m________________ TestCanaryOverfit.test_ukrainian_context_words ________________[0m
[1m[31mtests/unit/utilities/test_canary_overfit.py[0m:55: in test_ukrainian_context_words
    [0m[94massert[39;49;00m context_word [95mnot[39;49;00m [95min[39;49;00m result.normalized.lower(), [33mf[39;49;00m[33m"[39;49;00m[33mContext word [39;49;00m[33m'[39;49;00m[33m{[39;49;00mcontext_word[33m}[39;49;00m[33m'[39;49;00m[33m should not appear in normalized output: [39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Context word 'і' should not appear in normalized output: Іван І. Петро Коваленко[0m
[1m[31mE   assert 'і' not in 'іван і. петро коваленко'[0m
[1m[31mE     [0m
[1m[31mE     'і' is contained here:[0m
[1m[31mE       іван і. петро коваленко[0m
[1m[31mE     ? +[0m
[31m[1m_________________ TestCanaryOverfit.test_russian_context_words _________________[0m
[1m[31mtests/unit/utilities/test_canary_overfit.py[0m:78: in test_russian_context_words
    [0m[94massert[39;49;00m context_word [95mnot[39;49;00m [95min[39;49;00m result.normalized.lower(), [33mf[39;49;00m[33m"[39;49;00m[33mContext word [39;49;00m[33m'[39;49;00m[33m{[39;49;00mcontext_word[33m}[39;49;00m[33m'[39;49;00m[33m should not appear in normalized output: [39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Context word 'и' should not appear in normalized output: Иван Петр Коваленко[0m
[1m[31mE   assert 'и' not in 'иван петр коваленко'[0m
[1m[31mE     [0m
[1m[31mE     'и' is contained here:[0m
[1m[31mE       иван петр коваленко[0m
[1m[31mE     ? +[0m
[31m[1m_____________ TestCanaryOverfit.test_mixed_language_context_words ______________[0m
[1m[31mtests/unit/utilities/test_canary_overfit.py[0m:119: in test_mixed_language_context_words
    [0m[94massert[39;49;00m context_word [95mnot[39;49;00m [95min[39;49;00m normalized, [33mf[39;49;00m[33m"[39;49;00m[33mContext word [39;49;00m[33m'[39;49;00m[33m{[39;49;00mcontext_word[33m}[39;49;00m[33m'[39;49;00m[33m should not appear in normalized output: [39;49;00m[33m{[39;49;00mresult.normalized[33m}[39;49;00m[33m"[39;49;00m[90m[39;49;00m
[1m[31mE   AssertionError: Context word 'and' should not appear in normalized output: П. І. Коваленко And Петросян Work Together[0m
[1m[31mE   assert 'and' not in 'п. і. ковал...ork together'[0m
[1m[31mE     [0m
[1m[31mE     'and' is contained here:[0m
[1m[31mE       п. і. коваленко and петросян work together[0m
[1m[31mE     ?                 +++[0m
[31m[1m________________ TestInputValidator.test_homoglyph_replacement _________________[0m
[1m[31mtests/unit/utilities/test_input_validation.py[0m:48: in test_homoglyph_replacement
    [0m[94massert[39;49;00m result.sanitized_text == [33m"[39;49;00m[33mPavlov[39;49;00m[33m"[39;49;00m  [90m# Should be normalized[39;49;00m[90m[39;49;00m
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^[90m[39;49;00m
[1m[31mE   AssertionError: assert 'Pаvlоv' == 'Pavlov'[0m
[1m[31mE     [0m
[1m[31mE     [0m[91m- Pavlov[39;49;00m[90m[39;49;00m[0m
[1m[31mE     [92m+ Pаvlоv[39;49;00m[90m[39;49;00m[0m
[31m[1m_______ TestInputValidator.test_suspicion_analysis_high_homoglyph_ratio ________[0m
[1m[31mtests/unit/utilities/test_input_validation.py[0m:207: in test_suspicion_analysis_high_homoglyph_ratio
    [0m[94massert[39;49;00m analysis[[33m'[39;49;00m[33mis_suspicious[39;49;00m[33m'[39;49;00m] [95mis[39;49;00m [94mTrue[39;49;00m[90m[39;49;00m
[1m[31mE   assert False is True[0m
============================= slowest 25 durations =============================
34.45s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_organization_vs_personal_names_distinction
19.51s call     tests/unit/test_embedding_config.py::TestEmbeddingService::test_single_text_encoding
10.94s call     tests/unit/text_processing/test_language_detection_service.py::TestLanguageDetectionService::test_confidence_scores_limit
9.29s call     tests/unit/test_language_detection_service.py::TestLanguageDetectionService::test_confidence_scores_limit
6.59s call     tests/unit/test_embedding_model_switch.py::TestEmbeddingModelSwitch::test_model_switch_preserves_functionality
6.23s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServicePerformance::test_model_cache_efficiency
6.11s call     tests/unit/test_embedding_config.py::TestEmbeddingService::test_embedding_dimension
4.82s setup    tests/unit/test_variant_generation_service.py::TestVariantGenerationService::test_duplicate_removal
4.30s call     tests/unit/test_embedding_config.py::TestEmbeddingService::test_device_from_config
4.28s call     tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_encode_one_returns_384_floats
4.22s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_preprocessing_removes_dates_ids
4.12s call     tests/unit/test_embedding_contract.py::TestEmbeddingContract::test_enable_index_ignored
4.10s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_multilingual_name_triangle_similarity
4.08s call     tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_batch_performance_p95
4.05s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_empty_and_whitespace_handling
4.04s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServicePerformance::test_processing_time_tracking
3.90s call     tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_large_batch_performance
3.81s call     tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_embedding_dimensions_consistency
3.65s call     tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_preprocessing_effectiveness
3.65s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceIntegration::test_real_world_embedding_scenarios
3.64s call     tests/integration/test_embeddings_multilingual.py::TestMultilingualEmbeddings::test_name_variants_similarity
3.63s call     tests/performance/test_embeddings_perf.py::TestEmbeddingsPerformance::test_warmup_performance
3.58s call     tests/unit/test_embeddings_canary_names.py::TestEmbeddingsCanaryNames::test_consistency_across_calls
3.56s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_embedding_result_format
3.53s call     tests/unit/embeddings/test_embedding_service_comprehensive_fixed.py::TestEmbeddingServiceCore::test_encode_single_text
[36m[1m=========================== short test summary info ============================[0m
[31mFAILED[0m tests/e2e/test_nightmare_scenario.py::[1mTestNightmareScenario::test_nightmare_scenario_gnatyuk_abdullaev[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/e2e/test_nightmare_scenario.py::[1mTestNightmareScenario::test_multilingual_nightmare[0m - assert False is True
[31mFAILED[0m tests/e2e/test_nightmare_scenario.py::[1mTestNightmareScenario::test_corrupted_encoding_nightmare[0m - AssertionError: Failed to process corrupted text 0: Ð¡ÐµÑ€Ð³Ð¸Ð¹ Ð˜Ð²Ð°Ð½Ð¾Ð²
[31mFAILED[0m tests/e2e/test_nightmare_scenario.py::[1mTestNightmareScenario::test_performance_nightmare[0m - AssertionError: Complex text processing should succeed
[31mFAILED[0m tests/e2e/test_nightmare_scenario.py::[1mTestNightmareScenario::test_edge_cases_nightmare[0m - TypeError: object of type 'NoneType' has no len()
[31mFAILED[0m tests/e2e/test_nightmare_scenario.py::[1mTestNightmareScenario::test_cache_effectiveness_nightmare[0m - TypeError: UnifiedOrchestrator.process() got an unexpected keyword argument...
[31mFAILED[0m tests/e2e/test_nightmare_scenario.py::[1mTestNightmareScenario::test_batch_nightmare[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'process_batch'
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningPipelineE2E::test_ukrainian_surname_pattern_detection[0m - AssertionError: assert <Mock name='mock.screen_entity().input_text' id='566...
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningPipelineE2E::test_malicious_input_sanitization[0m - assert <Mock name='mock.screen_entity().input_text' id='5667723920'> == "<s...
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningPipelineE2E::test_early_stopping_high_confidence[0m - AssertionError: assert <Mock name='mock.screen_entity().early_stopped' id='...
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningPipelineE2E::test_performance_under_load[0m - AssertionError: assert <Mock name='mock.screen_entity().input_text' id='566...
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningPipelineE2E::test_audit_trail_completeness[0m - AssertionError: assert 'start_time' in {'tiers': ['tier1', 'tier2']}
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningPipelineE2E::test_screening_metrics_collection[0m - TypeError: argument of type 'coroutine' is not iterable
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningPipelineE2E::test_sanctions_data_format_compatibility[0m - AssertionError: assert <Mock name='mock.screen_entity().input_text' id='566...
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningRobustness::test_extremely_long_input_handling[0m - TypeError: object Mock can't be used in 'await' expression
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningRobustness::test_unicode_edge_cases[0m - TypeError: object Mock can't be used in 'await' expression
[31mFAILED[0m tests/e2e/test_sanctions_screening_pipeline.py::[1mTestSanctionsScreeningRobustness::test_concurrent_screening_stress[0m - TypeError: An asyncio.Future, a coroutine or an awaitable is required
[31mFAILED[0m tests/integration/test_e2e_sanctions_screening.py::[1mTestE2ESanctionsScreening::test_russian_person_with_documents[0m - AssertionError: assert 'Сергей' in ['Иванов', 'Петрович', 'No']
[31mFAILED[0m tests/integration/test_e2e_sanctions_screening.py::[1mTestE2ESanctionsScreening::test_ukrainian_organization_with_legal_form[0m - AssertionError: assert 'ru' == 'uk'
[31mFAILED[0m tests/integration/test_e2e_sanctions_screening.py::[1mTestE2ESanctionsScreening::test_golden_dataset_stability[0m - AssertionError: assert 'Иванов Сергей Петрович' in 'Иванов Петрович Д. Р.'
[31mFAILED[0m tests/integration/test_full_normalization_suite.py::[1mtest_ukrainian_full_normalization[\u0414\u043b\u044f \u0416\u0435\u043d\u0456 \u0413\u0430\u043b\u0438\u0447\u0430 \u0437 \u0433\u0440\u0443\u043f\u0438 O.Torvald-\u0404\u0432\u0433\u0435\u043d \u0413\u0430\u043b\u0438\u0447][0m - AssertionError: Ожидалось: {'євген', 'галич'}, получено: {'євген', 'галич',...
[31mFAILED[0m tests/integration/test_full_normalization_suite.py::[1mtest_ukrainian_full_normalization[\u0417\u0443\u0441\u0442\u0440\u0456\u0447 \u0437 \u041b\u0456\u043d\u043e\u044e \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e-\u041b\u0456\u043d\u0430 \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e][0m - AssertionError: Ожидалось: {'ліна', 'костенко'}, получено: {'ліна', 'з.', '...
[31mFAILED[0m tests/integration/test_full_normalization_suite.py::[1mtest_ukrainian_full_normalization[\u0420\u043e\u0437\u043c\u043e\u0432\u043b\u044f\u0432 \u0437 \u0412\u0430\u043b\u0435\u0440\u0456\u0454\u043c \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u043c-\u0412\u0430\u043b\u0435\u0440\u0456\u0439 \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u0439][0m - AssertionError: Ожидалось: {'залужний', 'валерій'}, получено: {'залужний', ...
[31mFAILED[0m tests/integration/test_full_normalization_suite.py::[1mtest_russian_full_normalization[\u0414\u043b\u044f \u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430][0m - AssertionError: Ожидалось: {'пугачева', 'алла', 'борисовна'}, получено: {'а...
[31mFAILED[0m tests/integration/test_full_normalization_suite.py::[1mtest_russian_full_normalization[\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439][0m - AssertionError: Ожидалось: {'чайковский', 'петр'}, получено: {'петр', 'чайк...
[31mFAILED[0m tests/integration/test_full_normalization_suite.py::[1mtest_russian_full_normalization[\u0412\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0410\u043d\u043d\u043e\u0439 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u043e\u0439-\u0410\u043d\u043d\u0430 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u0430][0m - AssertionError: Ожидалось: {'ахматова', 'анна'}, получено: {'ахматова', 'с....
[31mFAILED[0m tests/integration/test_full_normalization_suite.py::[1mtest_english_full_normalization[Sent to ELON MUSK for X corp-Elon Musk][0m - AssertionError: Ожидалось: {'elon', 'musk'}, получено: {'x', 'elon', 'musk'}
[31mFAILED[0m tests/integration/test_full_normalization_suite.py::[1mtest_critical_russian_normalization[0m - AssertionError: Expected {'петров', 'владимирович', 'сергей'}, but got {'вл...
[31mFAILED[0m tests/integration/test_gender_adjustment.py::[1mTestGenderAdjustmentIntegration::test_ukrainian_female_name_with_patronymic[0m - AssertionError: assert ['Павлов', 'Дарʼї', 'Юріївна'] == ['Павлов', 'Дарʼя'...
[31mFAILED[0m tests/integration/test_mixed_script_names.py::[1mTestMixedScriptNames::test_ascii_names_with_cyrillic_surnames[0m - AssertionError: assert 'Петрова' in 'John Коваленко Mary Петров'
[31mFAILED[0m tests/integration/test_mixed_script_names.py::[1mTestMixedScriptNames::test_ascii_names_no_morphology[0m - AssertionError: assert 'morph' not in 'morph'
[31mFAILED[0m tests/integration/test_normalization_pipeline.py::[1mTestNormalizationPipeline::test_ukrainian_name_pipeline[0m - AssertionError: assert None == 'Олена Петрівна'
[31mFAILED[0m tests/integration/test_normalization_pipeline.py::[1mTestNormalizationPipeline::test_russian_name_pipeline[0m - AssertionError: assert 'token_variants' in NormalizationResult(normalized='...
[31mFAILED[0m tests/integration/test_normalization_pipeline.py::[1mTestNormalizationPipeline::test_mixed_language_text_pipeline[0m - AssertionError: assert 'token_variants' in NormalizationResult(normalized='...
[31mFAILED[0m tests/integration/test_normalization_pipeline.py::[1mTestNormalizationPipeline::test_compound_name_pipeline[0m - AssertionError: assert 'token_variants' in NormalizationResult(normalized='...
[31mFAILED[0m tests/integration/test_normalization_pipeline.py::[1mTestNormalizationPipeline::test_empty_text_pipeline[0m - assert None == 0
[31mFAILED[0m tests/integration/test_normalization_pipeline.py::[1mTestNormalizationPipeline::test_performance_pipeline[0m - AssertionError: assert 'token_variants' in NormalizationResult(normalized='...
[31mFAILED[0m tests/integration/test_normalization_pipeline.py::[1mTestNormalizationPipeline::test_morphology_integration[0m - AttributeError: 'NoneType' object has no attribute 'values'
[31mFAILED[0m tests/integration/test_normalization_pipeline.py::[1mTestNormalizationPipeline::test_transliteration_integration[0m - AttributeError: 'NoneType' object has no attribute 'values'
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[ukrainian_simple_name][0m - AssertionError: Expected language uk, got ru
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[ukrainian_full_name_with_patronymic][0m - AssertionError: Expected language uk, got ru
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[ukrainian_company_with_legal_form][0m - AssertionError: Expected 1 orgs, got 0
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[mixed_person_and_company][0m - AssertionError: Expected language uk, got ru
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[person_with_birth_date][0m - AssertionError: Expected language uk, got ru
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[person_with_inn][0m - AssertionError: Expected language uk, got ru
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[mixed_script_names][0m - AssertionError: Expected normalized 'John Smith Олена Петренко', got 'John ...
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[noise_context_should_filter][0m - AssertionError: Expected language uk, got ru
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[quoted_company_with_person][0m - AssertionError: Language confidence 0.75 below minimum 0.8
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[hyphenated_surname][0m - AssertionError: Expected language uk, got ru
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[overfit_canary][0m - AssertionError: Expected language uk, got ru
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_pipeline_integration[full_pipeline_stress_test][0m - AssertionError: Expected language uk, got ru
[31mFAILED[0m tests/integration/test_pipeline_end2end.py::[1mTestPipelineEnd2End::test_normalization_flags_behavior[0m - AssertionError: Flags should produce different results but all were identic...
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_initials_only[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_english_initials_with_surname[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_mixed_initials_and_full_name[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_russian_organization_ooo[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_ukrainian_organization_tov[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_english_organization_llc[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_organization_with_person_name[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_multiple_organizations[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_person_and_organization_mixed[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_organization_with_quotes[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_initials_with_organization[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_multiple_legal_forms[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_organization_with_numbers[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_foreign_organization[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_initials_without_periods[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_organization_in_sentence[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_mixed_case_organization[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_organization_with_address[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_initials_orgs.py::[1mTestPipelineInitialsOrgsCase::test_no_unknown_in_normalized_output[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_english_full_name[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_english_name_with_apostrophe[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_english_hyphenated_name[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_mixed_english_ukrainian[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_mixed_english_russian[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_english_initials[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_english_name_with_title[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_transliterated_name[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_multiple_english_names[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_english_name_with_middle_initial[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_english_compound_surname[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_english_name_case_insensitive[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_mixed_en.py::[1mTestPipelineMixedEnglishCases::test_three_language_mix[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_empty_text[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_whitespace_only[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_numbers_only[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_punctuation_only[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_stop_words_only[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_random_gibberish[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_special_characters[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_emoji_only[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_very_long_text[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_mixed_scripts_nonsense[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_common_words_not_names[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_dates_and_addresses[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_currencies_and_amounts[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_technical_terms[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_medical_terms[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_country_and_city_names[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_brand_names[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_malformed_input[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_sql_injection_attempt[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_negative_canaries.py::[1mTestPipelineNegativeCanaries::test_no_unknown_tokens_in_output[0m - AssertionError: Processing failed for 'random gibberish text': ["'str' obje...
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_full_name_with_patronymic[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_full_name_with_patronymic[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_female_name_with_patronymic[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_female_name_with_patronymic[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_double_surname[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_double_surname[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_name_with_initials[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_name_with_initials[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_compound_name[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_compound_name[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_name_with_apostrophe[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_name_with_apostrophe[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_multiple_ukrainian_names[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_multiple_russian_names[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_name_with_typos[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_name_with_typos[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_name_with_numbers[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_name_with_numbers[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_name_with_punctuation[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_name_with_punctuation[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_name_with_extra_spaces[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_name_with_extra_spaces[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_ukrainian_name_case_insensitive[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_pipeline_ru_uk_cases.py::[1mTestPipelineRuUkCases::test_russian_name_case_insensitive[0m - AssertionError: Processing failed: ["'str' object has no attribute 'get'"]
[31mFAILED[0m tests/integration/test_role_based_normalization.py::[1mtest_role_based_slavic_normalization[\u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430-ru][0m - AssertionError: Ожидалось: {'пугачева', 'алла', 'борисовна'}, получено: {'а...
[31mFAILED[0m tests/integration/test_role_based_normalization.py::[1mtest_role_based_slavic_normalization[\u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439-ru][0m - AssertionError: Ожидалось: {'чайковский', 'петр'}, получено: {'петр', 'чайк...
[31mFAILED[0m tests/integration/test_ru_uk_sentences.py::[1mTestRussianUkrainianSentences::test_multiple_persons_same_surname[0m - AssertionError: assert 'Владимир Петров' in 'Владимир Анна Петров'
[31mFAILED[0m tests/integration/test_ru_uk_sentences.py::[1mTestRussianUkrainianSentences::test_surname_variations[0m - AssertionError: assert 'Петрова' in 'Петров Петров Петров Петров'
[31mFAILED[0m tests/integration/test_ru_uk_sentences.py::[1mTestRussianUkrainianSentences::test_organization_legal_forms_filtering[0m - AssertionError: assert 'EXAMPLE' in ['ПРИВАТБАНК', 'ТЕСТ']
[31mFAILED[0m tests/integration/test_ru_uk_sentences.py::[1mTestRussianUkrainianSentences::test_performance_with_long_text[0m - AssertionError: assert 'Анна Петровна Сидорова' in 'Петр Иванович Коваленко...
[31mFAILED[0m tests/unit/layers/test_smart_filter_adapter.py::[1mTestSmartFilterAdapterIntegration::test_should_process_basic_functionality[0m - NameError: name 'adapter' is not defined
[31mFAILED[0m tests/unit/monitoring/test_metrics_basic.py::[1mtest_orchestrator_with_metrics_service[0m - assert False is True
[31mFAILED[0m tests/unit/monitoring/test_orchestrator_metrics.py::[1mTestOrchestratorMetrics::test_successful_processing_metrics[0m - assert 0 > 0
[31mFAILED[0m tests/unit/monitoring/test_orchestrator_metrics.py::[1mTestOrchestratorMetrics::test_normalization_failure_metrics[0m - AssertionError: assert 'processing.normalization.failed' in {'processing.ex...
[31mFAILED[0m tests/unit/monitoring/test_orchestrator_metrics.py::[1mTestOrchestratorMetrics::test_variants_failure_metrics[0m - AssertionError: assert 'processing.variants.failed' in {'processing.excepti...
[31mFAILED[0m tests/unit/monitoring/test_orchestrator_metrics.py::[1mTestOrchestratorMetrics::test_embeddings_failure_metrics[0m - AssertionError: assert 'processing.embeddings.failed' in {'processing.excep...
[31mFAILED[0m tests/unit/monitoring/test_orchestrator_metrics.py::[1mTestOrchestratorMetrics::test_decision_failure_metrics[0m - AssertionError: assert 'processing.decision.failed' in {'processing.excepti...
[31mFAILED[0m tests/unit/monitoring/test_orchestrator_metrics.py::[1mTestOrchestratorMetrics::test_slow_processing_metrics[0m - AssertionError: assert 'processing.slow_requests' in {'processing.exception...
[31mFAILED[0m tests/unit/monitoring/test_orchestrator_metrics.py::[1mTestOrchestratorMetrics::test_language_detection_distribution[0m - AssertionError: assert 'language_detection.detected.en' in {'processing.exc...
[31mFAILED[0m tests/unit/monitoring/test_orchestrator_metrics.py::[1mTestOrchestratorMetrics::test_metrics_without_optional_services[0m - AssertionError: assert 'processing.requests.successful' in {'processing.exc...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_process_basic_functionality[0m - assert False is True
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_process_with_cache_hit[0m - TypeError: UnifiedProcessingResult.__init__() missing 3 required positional...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_process_with_cache_miss[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'cache_servic...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_process_with_embeddings[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'embedding_se...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_process_error_handling[0m - assert 'Unicode service error' in "'str' object has no attribute 'get'"
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_process_batch[0m - TypeError: UnifiedProcessingResult.__init__() missing 3 required positional...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_process_batch_with_exceptions[0m - TypeError: UnifiedProcessingResult.__init__() missing 3 required positional...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_search_similar_names_with_embeddings[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'embedding_se...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_search_similar_names_fallback[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'embedding_se...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_analyze_text_complexity[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'signal_servi...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_get_processing_stats[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'processing_s...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_clear_cache[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'clear_cache'
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_reset_stats[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'processing_s...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_generate_cache_key[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute '_generate_ca...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_update_stats[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'processing_s...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_calculate_complexity_score[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute '_calculate_c...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_generate_complexity_recommendations[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute '_generate_co...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_force_reprocess_ignores_cache[0m - TypeError: UnifiedProcessingResult.__init__() missing 3 required positional...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_orchestrator_initialization[0m - AttributeError: 'UnifiedOrchestrator' object has no attribute 'cache_servic...
[31mFAILED[0m tests/unit/test_orchestrator_service_old.py::[1mTestOrchestratorService::test_process_normalization_service_exception[0m - assert False
[31mFAILED[0m tests/unit/test_pattern_service.py::[1mTestPatternService::test_case_sensitivity_handling[0m - assert 0 > 0
[31mFAILED[0m tests/unit/test_smart_filter_service.py::[1mTestSmartFilterService::test_service_words_cleaning[0m - AssertionError: 'оплата за консультацію Петров Іван' == 'оплата за консульт...
[31mFAILED[0m tests/unit/test_smart_filter_service.py::[1mTestSmartFilterService::test_should_process_text_excluded[0m - AssertionError: 'исключен' not found in 'Text excluded from processing (ser...
[31mFAILED[0m tests/unit/test_unicode_service.py::[1mTestUnicodeService::test_final_cleanup[0m - AssertionError: assert 'Multiple spaces' == 'multiple spaces'
[31mFAILED[0m tests/unit/test_unicode_service.py::[1mTestUnicodeService::test_unicode_normalization_failure_handling[0m - AttributeError: module 'src.ai_service.services' has no attribute 'unicode_...
[31mFAILED[0m tests/unit/test_unicode_service.py::[1mTestUnicodeService::test_case_normalization[0m - AssertionError: assert False
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_complete_pipeline[0m - NameError: name 'UnifiedUnifiedProcessingResult' is not defined
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_normalization_flags_passed_correctly[0m - TypeError: 'NoneType' object is not subscriptable
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_optional_services_disabled[0m - assert False is True
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_error_handling[0m - assert 'Normalization failed' in '["\'str\' object has no attribute \'get\'"]'
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_performance_warning[0m - assert False is True
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_backward_compatibility_methods[0m - AttributeError: 'str' object has no attribute 'get'
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_signals_integration[0m - assert None is not None
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_trace_preservation[0m - assert 0 == 2
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_language_hint[0m - TypeError: 'NoneType' object is not subscriptable
[31mFAILED[0m tests/unit/test_unified_orchestrator.py::[1mTestUnifiedOrchestrator::test_result_serialization[0m - AssertionError: assert '' == 'Іван Петров'
[31mFAILED[0m tests/unit/text_processing/test_normalization_logic.py::[1mtest_ukrainian_full_normalization[\u0414\u043b\u044f \u0416\u0435\u043d\u0456 \u0413\u0430\u043b\u0438\u0447\u0430 \u0437 \u0433\u0440\u0443\u043f\u0438 O.Torvald-\u0404\u0432\u0433\u0435\u043d \u0413\u0430\u043b\u0438\u0447][0m - AssertionError: Expected 'Євген Галич', but got 'Євген Галич З.'
[31mFAILED[0m tests/unit/text_processing/test_normalization_logic.py::[1mtest_ukrainian_full_normalization[\u0417\u0443\u0441\u0442\u0440\u0456\u0447 \u0437 \u041b\u0456\u043d\u043e\u044e \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e-\u041b\u0456\u043d\u0430 \u041a\u043e\u0441\u0442\u0435\u043d\u043a\u043e][0m - AssertionError: Expected 'Ліна Костенко', but got 'З. Ліна Костенко'
[31mFAILED[0m tests/unit/text_processing/test_normalization_logic.py::[1mtest_ukrainian_full_normalization[\u0420\u043e\u0437\u043c\u043e\u0432\u043b\u044f\u0432 \u0437 \u0412\u0430\u043b\u0435\u0440\u0456\u0454\u043c \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u043c-\u0412\u0430\u043b\u0435\u0440\u0456\u0439 \u0417\u0430\u043b\u0443\u0436\u043d\u0438\u0439][0m - AssertionError: Expected 'Валерій Залужний', but got 'З. Валерій Залужний'
[31mFAILED[0m tests/unit/text_processing/test_normalization_logic.py::[1mtest_ukrainian_full_normalization[\u0414\u043b\u044f \u0406\u0432\u0430\u043d\u043e\u0432\u0430-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u0430 \u0421.\u0412.-\u0406\u0432\u0430\u043d\u043e\u0432-\u041f\u0435\u0442\u0440\u0435\u043d\u043a\u043e \u0421.\u0412.][0m - AssertionError: Expected 'Іванов-Петренко С.В.', but got 'Іванов-Петренко С...
[31mFAILED[0m tests/unit/text_processing/test_normalization_logic.py::[1mtest_russian_full_normalization[\u0414\u043b\u044f \u0410\u043b\u043b\u044b \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u044b \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u043e\u0439-\u0410\u043b\u043b\u0430 \u0411\u043e\u0440\u0438\u0441\u043e\u0432\u043d\u0430 \u041f\u0443\u0433\u0430\u0447\u0435\u0432\u0430][0m - AssertionError: Expected 'Алла Борисовна Пугачева', but got 'Аллы Борисовн ...
[31mFAILED[0m tests/unit/text_processing/test_normalization_logic.py::[1mtest_russian_full_normalization[\u0411\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u043d\u043e\u0441\u0442\u044c \u041f\u0435\u0442\u0440\u0443 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u043e\u043c\u0443-\u041f\u0435\u0442\u0440 \u0427\u0430\u0439\u043a\u043e\u0432\u0441\u043a\u0438\u0439][0m - AssertionError: Expected 'Петр Чайковский', but got 'Петр Чайковском'
[31mFAILED[0m tests/unit/text_processing/test_normalization_logic.py::[1mtest_russian_full_normalization[\u0412\u0441\u0442\u0440\u0435\u0447\u0430 \u0441 \u0410\u043d\u043d\u043e\u0439 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u043e\u0439-\u0410\u043d\u043d\u0430 \u0410\u0445\u043c\u0430\u0442\u043e\u0432\u0430][0m - AssertionError: Expected 'Анна Ахматова', but got 'С. Анна Ахматова'
[31mFAILED[0m tests/unit/text_processing/test_normalization_logic.py::[1mtest_russian_full_normalization[\u0417\u0430\u0447\u0438\u0441\u043b\u0435\u043d\u0438\u0435 \u043e\u0442 \u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432\u0430 \u041c.\u042e.-\u041b\u0435\u0440\u043c\u043e\u043d\u0442\u043e\u0432 \u041c.\u042e.][0m - AssertionError: Expected 'Лермонтов М.Ю.', but got 'Лермонтов М. Ю.'
[31mFAILED[0m tests/unit/text_processing/test_normalization_logic.py::[1mtest_english_full_normalization[Sent to ELON MUSK for X corp-Elon Musk][0m - AssertionError: Expected 'Elon Musk', but got 'Elon Musk X'
[31mFAILED[0m tests/unit/text_processing/test_normalization_result_fields.py::[1mTestNormalizationResultFields::test_normalization_result_basic_serialization[0m - TypeError: asdict() should be called on dataclass instances
[31mFAILED[0m tests/unit/text_processing/test_normalization_service.py::[1mTestNormalizationService::test_normalize_russian_complex_text[0m - AssertionError: assert 'Анна' in 'Иван Петров Анны Смирнов'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service.py::[1mTestNormalizationService::test_normalize_ukrainian_complex_text[0m - AssertionError: assert 'Анна' in 'Іван Петров Анни Смірнов'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_english_text[0m - AssertionError: assert 'Hello world' in 'Hello World'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_russian_text[0m - AssertionError: assert 'Привет' in ''
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_with_fallback[0m - AssertionError: assert 'Hello world' in 'Hello World'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_with_auto_language_detection[0m - pydantic_core._pydantic_core.ValidationError: 1 validation error for Normal...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_with_special_characters[0m - assert "O'Connor" in "O'connor"
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_sync_method[0m - AssertionError: assert 'Hello world' in 'Hello World'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_async_method[0m - AssertionError: assert 'Hello world' in 'Hello World'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_with_flags[0m - AssertionError: assert 'Hello world' in 'Hello World'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_russian_complex_text[0m - AssertionError: assert 'Анна' in 'Иван Петров Анны Смирнов'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationService::test_normalize_ukrainian_complex_text[0m - AssertionError: assert 'Анна' in 'Іван Петров Анни Смірнов'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationServiceConfiguration::test_diminutive_maps_initialization[0m - AssertionError: assert 'en' in {'ru': {'алекс': 'Александр', 'алекса': 'Але...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationResult::test_normalization_result_creation[0m - pydantic_core._pydantic_core.ValidationError: 1 validation error for Normal...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_fixed.py::[1mTestNormalizationResult::test_normalization_result_error_case[0m - pydantic_core._pydantic_core.ValidationError: 1 validation error for Normal...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_normalize_english_text[0m - AssertionError: assert 'Hello world' in 'Hello World'
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_normalize_russian_text[0m - AssertionError: assert 'Привет' in ''
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_tokenize_text_fallback_to_nltk[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_tokenize_text_basic_fallback[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_remove_stop_words_english[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_remove_stop_words_russian[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_remove_stop_words_fallback[0m - AttributeError: <module 'src.ai_service.layers.normalization.normalization_...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_apply_stemming_english[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_apply_stemming_russian[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_apply_stemming_ukrainian[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_apply_stemming_fallback[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_apply_lemmatization_english[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_apply_lemmatization_russian[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationService::test_apply_lemmatization_fallback[0m - AttributeError: 'NormalizationService' object has no attribute 'language_co...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationServiceConfiguration::test_initialization_without_spacy[0m - AttributeError: <module 'src.ai_service.layers.normalization.normalization_...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationServiceConfiguration::test_initialization_without_nltk[0m - AttributeError: <module 'src.ai_service.layers.normalization.normalization_...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationServiceConfiguration::test_initialization_minimal_dependencies[0m - AttributeError: <module 'src.ai_service.layers.normalization.normalization_...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationServiceConfiguration::test_cache_functionality[0m - AttributeError: <module 'src.ai_service.layers.normalization.normalization_...
[31mFAILED[0m tests/unit/text_processing/test_normalization_service_old.py::[1mTestNormalizationResult::test_normalization_result_error_case[0m - AttributeError: 'NormalizationResult' object has no attribute 'error'. Did ...
[31mFAILED[0m tests/unit/text_processing/test_unicode_service.py::[1mTestUnicodeService::test_final_cleanup[0m - AssertionError: assert 'Multiple spaces' == '  Multiple   spaces  \t\n  '
[31mFAILED[0m tests/unit/utilities/test_canary_overfit.py::[1mTestCanaryOverfit::test_context_words_never_become_names[0m - AssertionError: Expected name 'п.і.' not found in normalized output: П. І. ...
[31mFAILED[0m tests/unit/utilities/test_canary_overfit.py::[1mTestCanaryOverfit::test_ukrainian_context_words[0m - AssertionError: Context word 'і' should not appear in normalized output: Ів...
[31mFAILED[0m tests/unit/utilities/test_canary_overfit.py::[1mTestCanaryOverfit::test_russian_context_words[0m - AssertionError: Context word 'и' should not appear in normalized output: Ив...
[31mFAILED[0m tests/unit/utilities/test_canary_overfit.py::[1mTestCanaryOverfit::test_mixed_language_context_words[0m - AssertionError: Context word 'and' should not appear in normalized output: ...
[31mFAILED[0m tests/unit/utilities/test_input_validation.py::[1mTestInputValidator::test_homoglyph_replacement[0m - AssertionError: assert 'Pаvlоv' == 'Pavlov'
[31mFAILED[0m tests/unit/utilities/test_input_validation.py::[1mTestInputValidator::test_suspicion_analysis_high_homoglyph_ratio[0m - assert False is True
