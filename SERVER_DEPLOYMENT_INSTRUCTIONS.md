# üöÄ –ü–û–®–ê–ì–û–í–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø –î–õ–Ø –ù–ê–°–¢–†–û–ô–ö–ò –ü–†–û–î–ê–ö–®–ï–ù –°–ï–†–í–ï–†–ê

## üìã –ö—Ä–∞—Ç–∫–∞—è –°–ø—Ä–∞–≤–∫–∞
- **–°–µ—Ä–≤–µ—Ä**: 95.217.84.234:8000
- **–ü—Ä–æ–±–ª–µ–º–∞**: SmartFilter –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å

---

## üîë –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É (–∑–∞–º–µ–Ω–∏—Ç–µ user –Ω–∞ –≤–∞—à–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
ssh user@95.217.84.234

# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å AI —Å–µ—Ä–≤–∏—Å–æ–º
cd /path/to/ai-service  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å
```

---

## ‚öôÔ∏è –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É **–æ–¥–Ω–∏–º –±–ª–æ–∫–æ–º**:

```bash
cat > .env << 'EOF'
# Production Environment Variables for AI Service
# –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤—Å–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω–æ–≥–æ —Å–∫—Ä–∏–Ω–∏–Ω–≥–∞

# AC Pattern Search - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!
ENABLE_AHO_CORASICK=true
AHO_CORASICK_CONFIDENCE_BONUS=0.3

# SmartFilter Configuration
ENABLE_SMART_FILTER=true
ALLOW_SMART_FILTER_SKIP=true

# Search Functionality
ENABLE_SEARCH=true
ENABLE_VECTOR_FALLBACK=true

# Other Features
ENABLE_VARIANTS=true
ENABLE_EMBEDDINGS=true
ENABLE_DECISION_ENGINE=true
ENABLE_METRICS=true

# Performance
PRIORITIZE_QUALITY=true
ENABLE_FAISS_INDEX=true

# Feature Flags
ENABLE_AC_TIER0=true
EOF
```

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Ñ–∞–π–ª —Å–æ–∑–¥–∞–Ω:**
```bash
cat .env
```

---

## üîÑ –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å

### –í–∞—Ä–∏–∞–Ω—Ç A: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è systemd
```bash
sudo systemctl restart ai-service
sudo systemctl status ai-service
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -f 'python.*main.py'

# –ü–æ–¥–æ–∂–¥–∞—Ç—å 2 —Å–µ–∫—É–Ω–¥—ã
sleep 2

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å –≤ —Ñ–æ–Ω–µ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
nohup python -m src.ai_service.main > service.log 2>&1 &

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
ps aux | grep python
```

### –í–∞—Ä–∏–∞–Ω—Ç C: –° –∑–∞–≥—Ä—É–∑–∫–æ–π .env —Ñ–∞–π–ª–∞
```bash
pkill -f 'python.*main.py'
sleep 2

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ .env –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
source .env && nohup python -m src.ai_service.main > service.log 2>&1 &
```

---

## üß™ –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å–µ—Ä–≤–∏—Å —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:
```bash
curl http://localhost:8000/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** `{"status": "healthy"}`

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è SmartFilter:
```bash
curl -X POST http://localhost:8000/process \
  -H 'Content-Type: application/json' \
  -d '{
    "text": "–ö–æ–≤—Ä–∏–∫–æ–≤ –†–æ–º–∞–Ω –í–∞–ª–µ—Ä—ñ–π–æ–≤–∏—á",
    "options": {
      "enable_advanced_features": true,
      "enable_search": true
    }
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ü–û–°–õ–ï –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```json
{
  "decision": {
    "risk_level": "high",
    "decision_details": {
      "smartfilter_should_process": true  ‚Üê –î–û–õ–ñ–ù–û –ë–´–¢–¨ true!
    }
  },
  "search_results": {
    "total_hits": 4  ‚Üê –î–û–õ–ñ–ù–û –ë–´–¢–¨ > 0!
  }
}
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `"smartfilter_should_process": false` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å!**

---

## üîç –®–∞–≥ 5: –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ SmartFilter –≤—Å–µ –µ—â–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ:**
```bash
ps aux | grep python
# –ù–∞–π—Ç–∏ PID –ø—Ä–æ—Ü–µ—Å—Å–∞

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ PID)
cat /proc/PID/environ | tr '\0' '\n' | grep ENABLE_AHO_CORASICK
```

2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å —è–≤–Ω—ã–º —ç–∫—Å–ø–æ—Ä—Ç–æ–º:**
```bash
pkill -f 'python.*main.py'

export ENABLE_AHO_CORASICK=true
export ENABLE_SEARCH=true
export ENABLE_SMART_FILTER=true
export ALLOW_SMART_FILTER_SKIP=true

python -m src.ai_service.main
```

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:**
```bash
tail -f service.log
# –ò—â–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å "SERVICE_CONFIG" –∏–ª–∏ "SmartFilter"
```

---

## ‚úÖ –®–∞–≥ 6: –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª—É—á–∞–µ–≤:

```bash
# –¢–µ—Å—Ç 1: –°–∞–Ω–∫—Ü–∏–æ–Ω–Ω–æ–µ –ª–∏—Ü–æ (–¥–æ–ª–∂–µ–Ω –Ω–∞–π—Ç–∏)
curl -X POST http://localhost:8000/process \
  -H 'Content-Type: application/json' \
  -d '{"text": "–ü–µ—Ç—Ä–æ –ü–æ—Ä–æ—à–µ–Ω–∫–æ", "options": {"enable_search": true}}'

# –¢–µ—Å—Ç 2: –û–±—ã—á–Ω–æ–µ –∏–º—è (–¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏)
curl -X POST http://localhost:8000/process \
  -H 'Content-Type: application/json' \
  -d '{"text": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤", "options": {"enable_search": true}}'
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ `smartfilter_should_process: true` –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ `search_results.total_hits > 0` –¥–ª—è —Å–∞–Ω–∫—Ü–∏–æ–Ω–Ω—ã—Ö –ª–∏—Ü
- ‚úÖ –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 1 —Å–µ–∫—É–Ω–¥—ã

---

## üö® –í–∞–∂–Ω—ã–µ –ó–∞–º–µ—á–∞–Ω–∏—è

1. **–§–∞–π–ª .env –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞**
2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –î–û –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞**
3. **–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä Docker, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —á–µ—Ä–µ–∑ docker run -e**
4. **–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ systemd, –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ unit —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞**

---

## üîß –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ —á–µ—Ä–µ–∑ systemd unit

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è systemd, –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ unit —Ñ–∞–π–ª:

```bash
sudo nano /etc/systemd/system/ai-service.service
```

–î–æ–±–∞–≤—å—Ç–µ –≤ —Å–µ–∫—Ü–∏—é `[Service]`:
```ini
[Service]
Environment=ENABLE_AHO_CORASICK=true
Environment=ENABLE_SEARCH=true
Environment=ENABLE_SMART_FILTER=true
Environment=ALLOW_SMART_FILTER_SKIP=true
...
```

–ó–∞—Ç–µ–º:
```bash
sudo systemctl daemon-reload
sudo systemctl restart ai-service
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞: `tail -f service.log`
2. –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤: `ps aux | grep python`
3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `printenv | grep ENABLE`

**–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ —Å–∏—Å—Ç–µ–º–∞ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å "–∫–∞–∫ —á–∞—Å—ã"! üéØ**