# –ê–Ω–∞–ª–∏–∑ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤ AI Service

## üîç –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞

### 1. **–û–†–ö–ï–°–¢–†–ê–¢–û–†–´ - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –î–£–ë–õ–ò–ö–ê–¢–´**

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –°—Ç–∞—Ç—É—Å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ |
|------|--------|--------|---------------|
| `orchestrator_service.py` | 59KB (1485 —Å—Ç—Ä–æ–∫) | ‚úÖ –ê–ö–¢–ò–í–ù–û | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ main.py |
| `orchestrator_v2.py` | 18KB (400 —Å—Ç—Ä–æ–∫) | üîÑ –ù–û–í–´–ô | –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥, –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω |
| `processing_pipeline.py` | 16KB | üîÑ –ù–û–í–´–ô | –ß–∞—Å—Ç—å V2 |
| `service_coordinator.py` | 8KB | üîÑ –ù–û–í–´–ô | –ß–∞—Å—Ç—å V2 |
| `clean_orchestrator.py` | 14KB | ‚ùå –î–£–ë–õ–ò–ö–ê–¢ | –¢—Ä–µ—Ç—å—è –≤–µ—Ä—Å–∏—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ |
| `orchestration/pipeline.py` | 11KB | ‚ùå –î–£–ë–õ–ò–ö–ê–¢ | –ï—â–µ –æ–¥–Ω–∞ –≤–µ—Ä—Å–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ |

**–ü–†–û–ë–õ–ï–ú–ê**: 6 —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞! –¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production.

### 2. **TEMPLATE BUILDERS - –ò–ó–ë–´–¢–û–ß–ù–û–°–¢–¨**

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –°—Ç–∞—Ç—É—Å |
|------|--------|--------|
| `template_builder.py` | 13KB | ‚úÖ –ë–ê–ó–û–í–´–ô |
| `enhanced_template_builder.py` | 20KB | üîÑ –†–ê–°–®–ò–†–ï–ù–ù–´–ô |

### 3. **NORMALIZATION SERVICES - –§–†–ê–ì–ú–ï–ù–¢–ê–¶–ò–Ø**

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|--------|------------|
| `normalization_service.py` | 82KB | –û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å |
| `advanced_normalization_service.py` | 38KB | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –≤–µ—Ä—Å–∏—è |
| `base_morphology.py` | 5KB | –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å |
| `russian_morphology.py` | 23KB | –†—É—Å—Å–∫–∞—è –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—è |
| `ukrainian_morphology.py` | 15KB | –£–∫—Ä–∞–∏–Ω—Å–∫–∞—è –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—è |
| `word_normalizer.py` | 13KB | –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ–≤ |

### 4. **–ê–•–ûCORASICK –ì–ï–ù–ï–†–ê–¢–û–†–´ - –ú–ù–û–ñ–ï–°–¢–í–ï–ù–ù–´–ï –í–ê–†–ò–ê–ù–¢–´**

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –°—Ç–∞—Ç—É—Å |
|------|--------|--------|
| `optimized_ac_pattern_generator.py` | 27KB | ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø |
| `high_recall_ac_generator.py` | 26KB | ‚ùì –ù–ï–Ø–°–ù–û |
| `final_ac_optimizer.py` | 19KB | ‚ùì –ù–ï–Ø–°–ù–û |

**–í–ê–ñ–ù–û**: Aho-Corasick —Å–µ—Ä–≤–∏—Å—ã –µ—Å—Ç—å –≤ –∫–æ–¥–µ, –Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ SmartFilter!

### 5. **SMART FILTER –ö–û–ú–ü–û–ù–ï–ù–¢–´**

| –§–∞–π–ª | –†–∞–∑–º–µ—Ä | –°—Ç–∞—Ç—É—Å |
|------|--------|--------|
| `smart_filter_service.py` | 21KB | ‚úÖ –ê–ö–¢–ò–í–ù–´–ô |
| `company_detector.py` | 20KB | ‚úÖ –ê–ö–¢–ò–í–ù–´–ô |
| `name_detector.py` | 4KB | ‚úÖ –ê–ö–¢–ò–í–ù–´–ô |
| `confidence_scorer.py` | 13KB | ‚úÖ –ê–ö–¢–ò–í–ù–´–ô |
| `decision_logic.py` | 22KB | ‚úÖ –ê–ö–¢–ò–í–ù–´–ô |
| `pattern_builder.py` | 7KB | ‚ùì –ù–ï–Ø–°–ù–û |
| `document_detector.py` | 5KB | ‚ùì –ù–ï–Ø–°–ù–û |
| `terrorism_detector.py` | 8KB | ‚ùì –ù–ï–Ø–°–ù–û |
| `demo_smart_filter.py` | 5KB | ‚ùå –î–ï–ú–û |

### 6. **–°–ï–†–í–ò–°–´ –ò–ù–î–ï–ö–°–ê–¶–ò–ò –ò –ü–û–ò–°–ö–ê**

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|------|--------|
| `embedding_service.py` | ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø |
| `vector_index_service.py` | ‚ùì –ù–ï–Ø–°–ù–û |
| `watchlist_index_service.py` | ‚ùì –ù–ï–Ø–°–ù–û |

### 7. **–í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –°–ï–†–í–ò–°–´**

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|------|--------|
| `cache_service.py` | ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø |
| `language_detection_service.py` | ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø |
| `unicode_service.py` | ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø |
| `signal_service.py` | ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø |
| `pattern_service.py` | ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø |
| `variant_generation_service.py` | ‚úÖ –ò–°–ü–û–õ–¨–ó–£–ï–¢–°–Ø |

### 8. **–°–ö–†–ò–ü–¢–´ –ò –£–¢–ò–õ–ò–¢–´**

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|------|--------|
| `build_templates.py` | ‚úÖ –°–ö–†–ò–ü–¢ |
| `inspect_normalization.py` | ‚úÖ –û–¢–õ–ê–î–û–ß–ù–´–ô |
| `post_install.py` | ‚úÖ –£–°–¢–ê–ù–û–í–ö–ê |

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ó–ë–´–¢–û–ß–ù–û–°–¢–ò

- **–í—Å–µ–≥–æ Python —Ñ–∞–π–ª–æ–≤**: 97
- **–î—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤**: 6 (—Ç–æ–ª—å–∫–æ 1 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- **–í–µ—Ä—Å–∏–π template builder**: 2
- **AC –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤**: 3
- **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**: ~15-20 —Ñ–∞–π–ª–æ–≤
- **–û–±—â–∏–π –∏–∑–±—ã—Ç–æ–∫ –∫–æ–¥–∞**: ~300KB+ (30% –æ—Ç –æ–±—â–µ–≥–æ –æ–±—ä–µ–º–∞)

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Ä–∞–∑–¥—É—Ç –∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω**
- 6 —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ä—Å–∏–π
- –¢–æ–ª—å–∫–æ 1 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production
- 59KB –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–¥ vs 18KB —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

### 2. **Aho-Corasick —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∞**
```python
# from ..aho_corasick_service import AhoCorasickService  # Removed - templates only
self.aho_corasick_enabled = False
```

### 3. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –±–∏–ª–¥–µ—Ä—ã –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è**
- `template_builder.py`
- `enhanced_template_builder.py` 
- `pattern_builder.py`

### 4. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç—è–∂–µ–ª—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
- `multi_tier_screening_service.py` (28KB)
- `reranker_service.py`
- `blocking_service.py`

## üéØ –ü–õ–ê–ù –ö–û–ù–°–û–õ–ò–î–ê–¶–ò–ò

### **–§–ê–ó–ê 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥—É–±–ª–∏–∫–∞—Ç—ã –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤**
1. **–û—Å—Ç–∞–≤–∏—Ç—å**: `orchestrator_v2.py` (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥)
2. **–£–¥–∞–ª–∏—Ç—å**: 
   - `clean_orchestrator.py`
   - `orchestration/pipeline.py`
3. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å**: main.py –Ω–∞ V2
4. **–ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å**: —Å—Ç–∞—Ä—ã–π `orchestrator_service.py`

### **–§–ê–ó–ê 2: –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è AC —Å–µ—Ä–≤–∏—Å–æ–≤**
1. **–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å**: –∫–∞–∫–æ–π AC –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω—É–∂–µ–Ω
2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å**: AhoCorasickService
3. **–£–¥–∞–ª–∏—Ç—å**: –Ω–µ–Ω—É–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

### **–§–ê–ó–ê 3: –û—á–∏—Å—Ç–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
1. **–£–¥–∞–ª–∏—Ç—å**:
   - `demo_smart_filter.py`
   - `normalization_service.py.backup`
   - –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–µ—Ç–µ–∫—Ç–æ—Ä—ã –≤ smart_filter/
2. **–ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å**: template builders

### **–§–ê–ó–ê 4: –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã**
1. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å**: —É—Ç–∏–ª–∏—Ç—ã –≤ utils/
2. **–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å**: –ø–æ—Ö–æ–∂–∏–µ —Å–µ—Ä–≤–∏—Å—ã
3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å**: –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

- **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –∫–æ–¥–∞**: –Ω–∞ 30-40% (~300KB)
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã**: 6‚Üí1 –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä
- **–ü–æ–≤—ã—à–µ–Ω–∏–µ —è—Å–Ω–æ—Å—Ç–∏**: –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- **–£–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**: —É–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–£–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**: –º–µ–Ω—å—à–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

## üö¶ –°–¢–ê–¢–£–° –ö–û–ú–ü–û–ù–ï–ù–¢–û–í

### üü¢ –û–°–¢–ê–í–ò–¢–¨ (CORE)
- `orchestrator_v2.py`
- `normalization_service.py`
- `smart_filter/` (–æ—Å–Ω–æ–≤–Ω—ã–µ –¥–µ—Ç–µ–∫—Ç–æ—Ä—ã)
- –í—Å–µ –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- `cache_service.py`
- `embedding_service.py`
- –ë–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã

### üü° –ü–ï–†–ï–°–ú–û–¢–†–ï–¢–¨
- AC –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã (–≤—ã–±—Ä–∞—Ç—å 1 –∏–∑ 3)
- Template builders (–≤—ã–±—Ä–∞—Ç—å 1 –∏–∑ 2)
- Vector/Index —Å–µ—Ä–≤–∏—Å—ã (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)

### üî¥ –£–î–ê–õ–ò–¢–¨
- `clean_orchestrator.py`
- `demo_smart_filter.py`  
- `normalization_service.py.backup`
- –î—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ø–∞–π–ø–ª–∞–π–Ω—ã
- –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¥–µ—Ç–µ–∫—Ç–æ—Ä—ã

–≠—Ç–æ—Ç –∞–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ —Å–µ—Ä—å–µ–∑–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏–∏ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è maintainability –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.