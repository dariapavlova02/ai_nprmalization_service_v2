# Комплексный отчет по тестированию близости эмбеддингов

## Обзор теста

Проведен комплексный анализ близости эмбеддингов для 16 вариантов имен "Вика/Виктория" и "Даша/Дарья" с использованием модели `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2`.

### Тестовые имена:

**Группа Виктории (8 имен):**
- **Русские**: Вика, Виктория, Викуля
- **Украинские**: Вікторія, Віка  
- **Латинские**: Viktoriia, Victoriia, Viktoriya

**Группа Дарьи (8 имен):**
- **Русские**: Даша, Дашенька, Дарья, Дашуля
- **Украинские**: Дарʼя, Дарія
- **Латинские**: Dashenka, Daria

## Ключевые результаты

### 1. Наиболее похожие пары (топ-10)

| Ранг | Имя 1 | Имя 2 | Сходство | Группа |
|------|-------|-------|----------|--------|
| 1 | Виктория | Viktoriia | 0.9848 (98.48%) | Внутри Виктории |
| 2 | Viktoriia | Вікторія | 0.9695 (96.95%) | Внутри Виктории |
| 3 | Виктория | Вікторія | 0.9669 (96.69%) | Внутри Виктории |
| 4 | Дарья | Дарія | 0.9488 (94.88%) | Внутри Дарьи |
| 5 | Вика | Віка | 0.9413 (94.13%) | Внутри Виктории |
| 6 | Дарья | Дарʼя | 0.9331 (93.31%) | Внутри Дарьи |
| 7 | Віка | Дашенька | 0.9240 (92.40%) | **Межгрупповое** |
| 8 | Даша | Дашуля | 0.9203 (92.03%) | Внутри Дарьи |
| 9 | Вика | Дашенька | 0.8943 (89.43%) | **Межгрупповое** |
| 10 | Daria | Дарья | 0.8923 (89.23%) | Внутри Дарьи |

### 2. Наименее похожие пары (топ-5)

| Ранг | Имя 1 | Имя 2 | Сходство | Группа |
|------|-------|-------|----------|--------|
| 1 | Викуля | Daria | 0.2113 (21.13%) | **Межгрупповое** |
| 2 | Викуля | Viktoriia | 0.3903 (39.03%) | Внутри Виктории |
| 3 | Виктория | Викуля | 0.3938 (39.38%) | Внутри Виктории |
| 4 | Виктория | Viktoriya | 0.4351 (43.51%) | Внутри Виктории |
| 5 | Викуля | Victoriia | 0.4456 (44.56%) | Внутри Виктории |

### 3. Анализ внутри групп

#### Группа Виктории:
- **Среднее внутригрупповое сходство**: 0.6271 (62.71%)
- **Стандартное отклонение**: 0.1741
- **Количество пар**: 28

#### Группа Дарьи:
- **Среднее внутригрупповое сходство**: 0.7739 (77.39%)
- **Стандартное отклонение**: 0.1114
- **Количество пар**: 28

**Вывод**: Группа Дарьи более когерентна (выше сходство, меньше разброс).

### 4. Межгрупповое сходство

- **Среднее межгрупповое сходство**: 0.5804 (58.04%)
- **Стандартное отклонение**: 0.1596
- **Диапазон**: 0.2113 - 0.9240
- **Количество пар**: 64

**Топ-5 межгрупповых пар:**
1. Віка ↔ Дашенька: 0.9240 (92.40%)
2. Вика ↔ Дашенька: 0.8943 (89.43%)
3. Віка ↔ Дарія: 0.8921 (89.21%)
4. Вика ↔ Дарія: 0.8532 (85.32%)
5. Віка ↔ Дарья: 0.8492 (84.92%)

### 5. Анализ по языковым группам

| Язык | Количество имен | Среднее сходство | Стандартное отклонение |
|------|----------------|------------------|------------------------|
| Украинский | 4 | 0.7344 (73.44%) | 0.1210 |
| Русский | 7 | 0.6527 (65.27%) | 0.1882 |
| Латинский | 5 | 0.5200 (52.00%) | 0.1252 |

**Вывод**: Украинские имена наиболее когерентны, латинские - наименее.

### 6. Кластерный анализ

#### При пороге 0.7:
- **Кластер 1**: Вика, Viktoriya, Віка, Даша, Дашенька, Dashenka, Дарья, Дарʼя, Дарія, Дашуля (смешанный)
- **Кластер 2**: Виктория, Viktoriia, Вікторія (полные формы Виктории)

#### При пороге 0.8:
- **Кластер 1**: Вика, Віка, Даша, Дашенька, Дарья, Дарія, Дашуля (сокращенные формы)
- **Кластер 2**: Виктория, Viktoriia, Вікторія (полные формы Виктории)
- **Кластер 3**: Daria, Дарʼя (латинская и украинская полные формы Дарьи)

#### При пороге 0.9:
- **Кластер 1**: Вика, Віка (сокращенные формы Виктории)
- **Кластер 2**: Виктория, Viktoriia, Вікторія (полные формы Виктории)
- **Кластер 3**: Даша, Дашуля (сокращенные формы Дарьи)
- **Кластер 4**: Дарья, Дарʼя, Дарія (полные формы Дарьи)

### 7. Общая статистика

- **Общее количество пар**: 240
- **Среднее сходство**: 0.6365 (63.65%)
- **Медиана**: 0.6278 (62.78%)
- **Стандартное отклонение**: 0.1722
- **Диапазон**: 0.2113 - 0.9848
- **25-й перцентиль**: 0.4974 (49.74%)
- **75-й перцентиль**: 0.7854 (78.54%)

## Ключевые выводы

### 1. Сильные стороны модели

**Отличное распознавание полных форм:**
- "Виктория" ↔ "Viktoriia" ↔ "Вікторія": 96-98% сходства
- "Дарья" ↔ "Дарія" ↔ "Дарʼя": 93-95% сходства

**Хорошее распознавание сокращенных форм:**
- "Вика" ↔ "Віка": 94.13% сходства
- "Даша" ↔ "Дашуля": 92.03% сходства

**Межъязыковая совместимость:**
- Модель хорошо работает с кириллицей и латиницей
- Украинские и русские варианты имеют высокое сходство

### 2. Проблемные области

**Низкое сходство с "Викуля":**
- Имеет низкое сходство со всеми остальными вариантами (21-60%)
- Требует явного добавления в словарь уменьшительных

**Слабое распознавание некоторых латинских вариантов:**
- "Viktoriya" имеет низкое сходство с полными формами (43-54%)
- "Dashenka" показывает средние результаты (50-74%)

**Межгрупповые аномалии:**
- "Викуля" ↔ "Daria": всего 21.13% сходства
- Некоторые сокращенные формы показывают неожиданно высокое сходство между разными именами

### 3. Рекомендации для системы нормализации

#### 3.1 Словарные дополнения
1. **Добавить "Викуля" в словарь уменьшительных** с явной связью к "Вика"
2. **Добавить "Дашуля" в словарь уменьшительных** с явной связью к "Даша"
3. **Создать межъязыковые маппинги** для полных форм

#### 3.2 Пороговые значения
1. **Использовать порог 0.7+ для группировки** похожих имен
2. **Порог 0.8+ для уверенной идентификации** вариантов одного имени
3. **Порог 0.9+ для точного маппинга** между языками

#### 3.3 Специальная обработка
1. **"Viktoriya" требует специальной обработки** - низкое сходство с полными формами
2. **"Dashenka" может требовать нормализации** к "Daria"
3. **Учитывать языковые особенности** при группировке

### 4. Практические применения

#### 4.1 Поиск по именам
- Модель отлично подходит для поиска вариантов одного имени
- Рекомендуемый порог: 0.7+ для включения в результаты поиска

#### 4.2 Группировка контактов
- Можно группировать контакты с разными вариантами одного имени
- Порог 0.8+ для уверенной группировки

#### 4.3 Нормализация имен
- Модель может использоваться как дополнительный источник для нормализации
- Комбинировать с правилами и словарями для лучших результатов

### 5. Технические детали

- **Модель**: sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
- **Метрика**: Косинусное сходство
- **Нормализация эмбеддингов**: Да
- **Размерность эмбеддингов**: 384
- **Общее количество тестируемых пар**: 240

## Заключение

Модель показывает отличные результаты для межъязыкового распознавания имен и хорошо группирует варианты одного имени. Особенно сильна в распознавании полных форм и межъязыковых соответствий. 

Основные области для улучшения:
1. Обработка уменьшительных форм (особенно "Викуля")
2. Нормализация некоторых латинских вариантов
3. Учет контекста при межгрупповом сравнении

Рекомендуется использовать модель как дополнительный инструмент в системе нормализации имен в сочетании с правилами и словарями.
