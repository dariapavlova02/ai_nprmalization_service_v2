# Алгоритм нормализации имен и фамилий

## 1. Классификация слов

### 1.1 Типы слов для нормализации:
- **Имена** (уменьшительные → полные формы)
  - Петрик → Петро
  - Петруся → Петро  
  - Вовчика → Володимир
  - Сашка → Олександр
  - Дашеньки → Дарія
  - Жені → Євген
  - Ліною → Ліна

- **Фамилии** (падежные формы → именительный падеж)
  - Іванова → Іванов (женская → мужская)
  - Порошенка → Порошенко (родительный → именительный)
  - Квіткової → Квіткова (родительный → именительный)
  - Положинського → Положинський (родительный → именительный)
  - Зеленського → Зеленський (родительный → именительный)
  - Скрипці → Скрипка (дательный → именительный)
  - Петренка → Петренко (родительный → именительный)

- **Отчества** (падежные формы → именительный падеж)
  - В. О. → В. О. (инициалы остаются как есть)

- **Компании/Организации** (остаются как есть)
  - O.Torvald → O.Torvald

- **Обычные слова** (остаются как есть)
  - оплата, за, ремонт, переказ, від, для, квитки, зустріч, з, групи

## 2. Алгоритм нормализации

### 2.1 Этап 1: Классификация слова
```
1. Проверить длину слова (если <= 2 символа, пропустить)
2. Проверить, является ли слово инициалом (одна буква + точка)
3. Проверить, является ли слово именем (уменьшительная форма)
4. Проверить, является ли слово фамилией (падежная форма)
5. Проверить, является ли слово отчеством (падежная форма)
6. Если ничего не подошло, оставить как есть
```

### 2.2 Этап 2: Нормализация по типу

#### 2.2.1 Имена (уменьшительные → полные)
```
1. Проверить в словаре уменьшительных форм
2. Если найдено, заменить на полную форму
3. Если не найдено, оставить как есть
```

#### 2.2.2 Фамилии (падежные → именительный)
```
1. Женские фамилии (-ова, -ева, -ина, -ская, -цкая) → мужские (-ов, -ев, -ин, -ский, -цкий)
2. Родительный падеж (-а) → именительный (-о) для мужских фамилий
3. Родительный падеж (-ої) → именительный (-а) для женских фамилий
4. Дательный падеж (-і) → именительный (-а) для женских фамилий
5. Другие падежные формы → именительный падеж
```

#### 2.2.3 Отчества (падежные → именительный)
```
1. Падежные формы → именительный падеж
2. Инициалы остаются как есть
```

## 3. Порядок применения правил

### 3.1 Приоритет правил:
1. **Инициалы** - не изменяются
2. **Имена** - уменьшительные → полные формы
3. **Фамилии** - падежные формы → именительный падеж
4. **Отчества** - падежные формы → именительный падеж
5. **Остальные слова** - не изменяются

### 3.2 Контекстная нормализация:
- Если рядом с фамилией есть имя, использовать пол имени для определения пола фамилии
- Если контекста нет, использовать общие правила

## 4. Словари и ресурсы

### 4.1 Словарь уменьшительных форм:
- Петрик → Петро
- Петруся → Петро
- Вовчика → Володимир
- Сашка → Олександр
- Дашеньки → Дарія
- Жені → Євген
- Ліною → Ліна

### 4.2 Словарь окончаний фамилий:
- Женские: -ова, -ева, -ина, -ская, -цкая
- Мужские: -ов, -ев, -ин, -ский, -цкий
- Украинские мужские: -ко, -енко, -чук, -юк, -ак, -ик, -ук, -сько, -цько

### 4.3 Словарь падежных окончаний:
- Родительный (-а) → именительный (-о)
- Родительный (-ої) → именительный (-а)
- Дательный (-і) → именительный (-а)
- Творительный (-ою) → именительный (-а)

## 5. Примеры работы алгоритма

### 5.1 Пример 1: "Для Петруся Іванова, за ремонт"
```
1. "Для" - обычное слово → "для"
2. "Петруся" - имя (уменьшительное) → "Петро"
3. "Іванова" - фамилия (женская) → "Іванов"
4. "," - знак препинания → удалить
5. "за" - обычное слово → "за"
6. "ремонт" - обычное слово → "ремонт"
Результат: "для Петро Іванов за ремонт"
```

### 5.2 Пример 2: "Переказ від Вовчика Зеленського В. О."
```
1. "Переказ" - обычное слово → "переказ"
2. "від" - обычное слово → "від"
3. "Вовчика" - имя (уменьшительное) → "Володимир"
4. "Зеленського" - фамилия (родительный) → "Зеленський"
5. "В." - инициал → "В."
6. "О." - инициал → "О."
Результат: "переказ від Володимир Зеленський В. О."
```

## 6. Реализация

### 6.1 Структура класса:
```python
class WordNormalizer:
    def __init__(self):
        self.diminutives = {}  # словарь уменьшительных форм
        self.surname_endings = {}  # словарь окончаний фамилий
        self.case_endings = {}  # словарь падежных окончаний
    
    def classify_word(self, word):
        """Классифицирует слово по типу"""
        pass
    
    def normalize_name(self, word):
        """Нормализует имя"""
        pass
    
    def normalize_surname(self, word, context=None):
        """Нормализует фамилию"""
        pass
    
    def normalize_word(self, word, context=None):
        """Главный метод нормализации"""
        pass
```

### 6.2 Интеграция с существующей системой:
- Заменить метод `_get_ukrainian_forms` на новый алгоритм
- Сохранить существующие интерфейсы
- Добавить новые словари и правила
